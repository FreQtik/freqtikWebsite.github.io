<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FreQtik</title>
  <link rel="icon" type="image/png" href="QLogoPNGBlack_17x30.png">
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;600&display=swap" rel="stylesheet">
  <meta name="description" content="FreQtik — one-person studio, building professional audio tools, software solutions and games.">
  <style>
    :root {
      --bg: #fff;
      --text: #000;
      --muted: #666;
      --line: #e0e0e0;
      --shadow: rgba(0,0,0,0.08);
      --accent: #111;
      --accent2:#0b0b0b;
      --header-height: 200px;
      --rad: 14px;
    }
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Manrope',sans-serif; }
    html {
      background:var(--bg); color:var(--text);
      overflow-x:hidden; scroll-behavior:smooth;
      scroll-padding-top:var(--header-height);
    }
    body {
      overflow-x:hidden;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* INTRO */
    .intro {
      position:fixed; inset:0;
      background:var(--bg);
      display:flex; flex-direction:column;
      justify-content:center; align-items:center;
      z-index:9999;
      transition:opacity 1.5s,filter 1.5s;
    }
    .intro.hidden { opacity:0; filter:blur(8px); pointer-events:none; }
    .intro img { width:300px; max-width:90vw; }
    .intro p { margin-top:10px; font-size:18px; font-style:italic; opacity:0.5; }

    /* HEADER & TOGGLE */
    #menuToggle {
      position:fixed; top:10px; left:10px;
      z-index:200; background:none; border:none;
      font-size:24px; display:none; cursor:pointer;
    }
    header {
      position:fixed; top:0; left:0; right:0;
      background:var(--bg); z-index:100;
      box-shadow:0 4px 10px var(--shadow);
      transition:transform 0.3s;
      overflow:visible;
    }
    .logo-container {
      height:150px; border-bottom:1px solid var(--line);
      display:flex; justify-content:center; align-items:center;
    }
    .logo-button {
      background:none;
      border:none;
      padding:0;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .logo-container img {
      height:120px;
    }

    /* NAV */
    nav {
      display:flex; justify-content:center;
      padding:20px 0; border-bottom:1px solid var(--line);
      overflow:visible;
    }
    nav ul {
      display:flex; gap:40px; list-style:none; align-items:center;
    }
    nav ul li { position:relative; }
    nav ul li button, nav ul li a.nav-link {
      background:none; border:none; font-weight:600;
      font-size:16px; color:var(--text);
      padding:8px 16px; cursor:pointer;
      transition:transform 0.2s;
      text-decoration:none;
    }
    nav ul li button:hover,
    nav ul li a.nav-link:hover {
      transform:scale(1.05);
    }

    /* DROPDOWNS */
    .dropdown-content {
      display:none; position:absolute; top:100%; left:0;
      background:var(--bg); border:1px solid var(--line);
      padding:10px 15px; min-width:220px;
      box-shadow:0 4px 8px var(--shadow); z-index:999;
      white-space:nowrap;
    }
    nav ul li.dropdown:last-child .dropdown-content { left:auto; right:0; }

    .dropdown-open .dropdown-content { display:block; animation:fadeIn 0.3s; }

    .dropdown-content a {
      display:block; margin-bottom:12px;
      text-decoration:none; color:var(--text);
      font-size:16px;
      transition:transform 0.15s ease-out;
    }
    .dropdown-content a:last-child { margin-bottom:0; }
    .dropdown-content a:hover {
      transform:scale(1.03);
    }

    @keyframes fadeIn { from{opacity:0;transform:translateY(-5px);} to{opacity:1;transform:translateY(0);} }

    /* CONTENT */
    .content-container {
      padding-top:var(--header-height);
      flex:1 0 auto;
    }
    .responsive-iframe { display:block; width:100%; max-width:600px; height:300px; border:none; }
    section {
      padding:60px 20px; max-width:1100px; margin:auto;
      border-bottom:1px solid var(--line);
      opacity:0; transform:translateY(30px);
      animation:slideIn 0.6s ease forwards;
    }
    @keyframes slideIn { from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);} }
    section h2 { margin-bottom:20px; font-size:32px; border-bottom:1px solid var(--line); padding-bottom:5px; }
    section p, section ul { font-size:16px; line-height:1.65; color:var(--text); }
    section small { color:var(--muted); }
    section ul { list-style:inside; }
    .flex-container {
      display:flex; gap:20px; flex-wrap:wrap; justify-content:center; margin-top:20px;
    }
    .flex-container a {
      display:flex; align-items:center; gap:8px; text-decoration:none; font-size:16px; color:var(--text);
      padding:6px 12px; border-bottom:1px solid transparent; transition:border-color 0.3s;
    }
    .flex-container a:hover { border-bottom:1px solid var(--text); }
    .social-icon { width:20px; height:20px; }

    /* PRODUCT UI */
    .hero {
      display:grid; gap:18px; align-items:center;
      grid-template-columns: 1.2fr 1fr;
    }
    .hero h1 { font-size:40px; line-height:1.1; }
    .tagline { color:var(--muted); font-weight:600; }
    .cta-row { display:flex; gap:12px; flex-wrap:wrap; margin-top:14px; }
    .btn {
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 16px; border-radius:var(--rad);
      border:1px solid var(--text); background:#fff; color:#000; text-decoration:none; font-weight:600;
      transition:transform .15s, box-shadow .2s, background .2s, color .2s;
      box-shadow:0 2px 6px var(--shadow);
    }
    .btn:hover { transform:translateY(-1px); }
    .btn.primary { background:var(--text); color:#fff; border-color:var(--text); }
    .btn.ghost { border-style:dashed; }
    .grid {
      display:grid; gap:18px; grid-template-columns: repeat(3,1fr);
    }
    .card {
      border:1px solid var(--line); border-radius:var(--rad); padding:18px;
      box-shadow:0 4px 12px var(--shadow);
      background:#fff;
    }
    .card h3 { font-size:20px; margin-bottom:8px; }
    .price { font-weight:800; font-size:26px; margin:8px 0 2px; }
    .sub { color:var(--muted); font-size:13px; }
    .badge { display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--line); margin-left:8px; color:#333; }
    .popular { border-color:#111; box-shadow:0 8px 20px var(--shadow); position:relative; }
    .popular::after{
      content:"Most popular"; position:absolute; top:10px; right:10px; font-size:11px;
      padding:4px 8px; border:1px solid var(--line); border-radius:999px; background:#fff;
    }
    .matrix { width:100%; border-collapse:collapse; margin-top:8px; }
    .matrix th, .matrix td { border:1px solid var(--line); padding:10px; font-size:14px; text-align:center; }
    .matrix th { background:#fafafa; }
    .muted { color:var(--muted); }
    .kicker { text-transform:uppercase; letter-spacing:.12em; font-weight:800; font-size:12px; color:#333; }
    .note { font-size:13px; color:var(--muted); margin-top:8px; }
    .cols { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
    .list { margin-top:8px; }
    .list li { margin:6px 0; }
    .hr { height:1px; background:var(--line); margin:18px 0; }
    .tiny { font-size:12px; color:var(--muted); }

    /* MEDIA PANE (product images) */
    .media-pane { border:1px solid var(--line); border-radius:var(--rad); overflow:hidden; box-shadow:0 4px 12px var(--shadow); background:#000; display:flex; align-items:center; justify-content:center; aspect-ratio: 16/10; }
    .media-pane img { width:100%; height:100%; object-fit:cover; display:block; filter:saturate(0.95) contrast(1.02); }
    .media-hide { display:none; }

    /* APPLE-LIKE DARK BAND (used for Anvil & Smith tips & Forge) */
    .band-dark {
      padding:80px 0;
      max-width:100%;
      margin:0;
      background:#000;
      color:#f5f5f5;
      border-bottom:none;
    }
    .band-dark .band-inner {
      max-width:1100px;
      margin:0 auto;
      padding:0 20px;
    }
    .band-dark h2 {
      border-bottom:none;
      font-size:32px;
      margin-bottom:6px;
      padding-bottom:0;
      color:#f5f5f5;
    }
    .band-dark .kicker {
      color:#bbb;
    }
    .band-dark p,
    .band-dark li {
      color:#e0e0e0;
    }
    .band-dark .muted {
      color:#9a9a9a;
    }

    .anvil-slides {
      margin-top:32px;
      display:flex;
      gap:16px;
      overflow-x:scroll;
      overflow-y:hidden;
      scroll-snap-type:none;
      padding:24px 0 32px 0;
      -webkit-overflow-scrolling:touch;
      width:100vw;
      margin-left:calc(50% - 50vw); /* full-bleed, like Apple */
      scrollbar-width:none;         /* Firefox hide scrollbar */
      -ms-overflow-style:none;      /* IE/Edge hide scrollbar */
    }
    .anvil-slides::-webkit-scrollbar {
      display:none;                 /* Chrome/Safari hide scrollbar */
    }

    .anvil-slide {
      flex:0 0 82%;
      max-width:460px;
      scroll-snap-align:start;
      background:radial-gradient(circle at top left, #222 0, #111 40%, #050505 100%);
      border-radius:var(--rad);
      padding:20px 18px 22px;
      border:1px solid rgba(255,255,255,0.08);
      box-shadow:0 20px 50px rgba(0,0,0,0.85);
      transition:
        transform 0.35s ease,
        box-shadow 0.35s ease,
        border-color 0.35s ease,
        background 0.35s ease;
    }
    .anvil-slide h3 {
      font-size:20px;
      margin-bottom:8px;
      color:#fdfdfd;
    }
    .anvil-slide p {
      font-size:15px;
      margin-bottom:8px;
    }
    .anvil-slide ul.list {
      margin-top:6px;
      padding-left:0;
      list-style:none;
    }
    .anvil-slide ul.list li::before {
      content:"•";
      display:inline-block;
      margin-right:6px;
      color:#cfcfcf;
    }
    .anvil-slide:hover {
      transform:translateY(-6px) scale(1.01);
      box-shadow:0 26px 70px rgba(0,0,0,0.95);
      border-color:rgba(255,255,255,0.32);
      background:radial-gradient(circle at top left, #303030 0, #141414 40%, #050505 100%);
    }

    .band-pill {
      display:inline-flex;
      align-items:center;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      margin-bottom:10px;
      color:#cfcfcf;
    }

    .band-dark small {
      color:#7a7a7a;
    }

    @media (min-width:900px){
      .anvil-slide { flex-basis:30%; }
    }
            /* IMPULSE ANVIL – ANATOMY SECTION */
    .anatomy-band {
      border-bottom:none;
      padding-top:80px;
      padding-bottom:80px;
    }

    .plugin-anatomy {
      display:grid;
      grid-template-columns:minmax(0, 1.1fr) minmax(0, 1fr);
      gap:32px;
      align-items:start;
      margin-top:32px;
    }

    .plugin-anatomy__image-wrap {
      position:sticky;
      top:120px;
      align-self:flex-start;
      overflow:visible;
    }

    .plugin-anatomy__image-inner {
      position:relative;
      border-radius:var(--rad);
      overflow:hidden;
      box-shadow:0 24px 70px rgba(0,0,0,0.9);
      background:#000;
      max-width:700px;
      margin:0 auto;
      aspect-ratio: 950 / 640;
      transition:transform 0.5s ease;
    }

    .plugin-anatomy__img {
      display:block;
      width:100%;
      height:100%;
      position:absolute;
      inset:0;
      object-fit:cover;
    }

    .plugin-anatomy__img--blur {
      filter:blur(2px) saturate(0.9);
      opacity:0.85;
    }

    .plugin-anatomy__img--focus {
      opacity:1;
      transition:clip-path 0.4s ease, opacity 0.4s ease;
      clip-path:inset(40% 40% 40% 40%);
    }

    .plugin-anatomy__focus-box {
      position:absolute;
      border:1px solid rgba(255,255,255,0.85);
      box-shadow:0 0 0 1px rgba(0,0,0,0.6);
      border-radius:10px;
      pointer-events:none;
      transition:all 0.4s ease;
    }

    .plugin-anatomy__focus-line {
      position:absolute;
      height:2px;
      background:rgba(255,255,255,0.9);
      transform-origin:left center;
      pointer-events:none;
      transition:all 0.4s ease;
    }
  
        .plugin-anatomy__steps {
      position:relative;
      margin-top:16px;
      transition:height 0.3s ease;
    }

    .anatomy-step {
      position:absolute;
      inset:0;
      padding:16px 18px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.11);
      background:radial-gradient(circle at top left,#202020 0,#101010 50%,#050505 100%);
      box-shadow:0 14px 40px rgba(0,0,0,0.8);
      opacity:0;
      transform:translateY(12px);
      transition:opacity 0.35s ease, transform 0.35s ease, box-shadow 0.35s ease;
      pointer-events:none;
    }

    .anatomy-step.is-active {
      opacity:1;
      transform:translateY(0);
      box-shadow:0 22px 55px rgba(0,0,0,0.95);
      pointer-events:auto;
    }

    .plugin-anatomy__dots {
      display:flex;
      justify-content:center;
      gap:10px;
      margin:22px auto 8px;
    }

    .plugin-anatomy__dot {
      width:10px;
      height:10px;
      border-radius:999px;
      border:2px solid #fff;
      background:#fff;
      cursor:pointer;
      padding:0;
      outline:none;
      transition:background 0.2s, transform 0.2s, border-color 0.2s, opacity 0.2s;
      opacity:0.75;
    }

    .plugin-anatomy__dot.is-active {
      background:#000;
      border-color:#fff;
      opacity:1;
      transform:scale(1.15);
    }


    .anatomy-step h3 {
      font-size:18px;
      margin-bottom:6px;
      color:#fdfdfd;
    }

    .anatomy-step p,
    .anatomy-step li {
      font-size:14px;
      color:#dedede;
    }

    .anatomy-step.is-active {
      opacity:1;
      transform:translateY(0);
      box-shadow:0 22px 55px rgba(0,0,0,0.95);
      pointer-events:auto;
    }

    .anatomy-step ul {
      list-style:none;
      margin-top:6px;
      padding-left:0;
    }
    .anatomy-step ul li::before {
      content:"•";
      display:inline-block;
      margin-right:6px;
      color:#cfcfcf;
    }

    @media (max-width:900px){
      .plugin-anatomy {
        grid-template-columns:1fr;
      }
      .plugin-anatomy__image-wrap {
        position:static;
        margin-bottom:24px;
      }
      .plugin-anatomy__focus-line,
      .plugin-anatomy__focus-box {
        display:none; /* keep mobile clean */
      }
    }

    /* FOOTER */
    footer {
      padding:24px 16px;
      text-align:center;
      font-size:14px;
      color:#555;
      flex-shrink:0;
    }
    footer a { color:inherit; text-decoration:none; border-bottom:1px solid transparent; }
    footer a:hover { border-bottom-color:#888; }

    /* MOBILE */
    @media (max-width:600px) {
      :root { --header-height:110px; }

      html { font-size:90%; }

      .logo-container { height:72px; }
      .logo-container img { height:56px; }

      nav { padding:8px 0; }
      nav ul { flex-wrap:wrap; gap:6px; }
      nav ul li { flex:1 1 33%; text-align:center; }
      nav ul li button,
      nav ul li a.nav-link {
        padding:6px 8px;
        font-size:13px;
      }
      .dropdown-content {
        width:auto; margin-top:8px; text-align:center;
      }

      #menuToggle { top:6px; font-size:20px; }

      .hero {
        grid-template-columns:1fr;
      }
      .hero h1 { font-size:32px; }

      .cols {
        grid-template-columns:1fr;
      }

      .anvil-slide {
        flex-basis:90%;
      }

      .grid {
        grid-template-columns:1fr;
      }
    }
  </style>

  <!-- Organization JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "FreQtik",
    "url": "https://freqtik.com",
    "logo": "https://freqtik.com/FreQtikBlackLogo.png",
    "email": "mailto:freqtiksup@gmail.com",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Wilhelm Leuschner Str. 93",
      "postalCode": "63263",
      "addressLocality": "Neu Isenburg",
      "addressCountry": "DE"
    },
    "sameAs": [
      "https://www.youtube.com/@FreQtik",
      "https://www.instagram.com/freqtik/",
      "https://open.spotify.com/artist/7sbdoA5VGDrbEjY3AngmgK"
    ]
  }
  </script>

  <!-- Product JSON-LD: Impulse Anvil -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "applicationCategory":"AudioApplication",
    "operatingSystem":"Windows 10/11 (64-bit)",
    "name":"Impulse Anvil",
    "description":"VST3 IR-morphing and design workstation with spectral/time morphing, curve shaping, Color/Fractal stages, and bake-to-IR export.",
    "offers":{"@type":"AggregateOffer","lowPrice":"39","highPrice":"129","priceCurrency":"EUR"}
  }
  </script>

  <!-- Product JSON-LD: Impulse Forge -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "applicationCategory":"AudioApplication",
    "operatingSystem":"Windows 10/11 (64-bit)",
    "name":"Impulse Forge",
    "description":"Acoustic editor for building rooms, importing meshes, simulating acoustics and baking impulse responses.",
    "offers":{"@type":"AggregateOffer","lowPrice":"49","highPrice":"199","priceCurrency":"EUR"}
  }
  </script>

  <!-- Product JSON-LD: Impulse Smith (bundle) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "name":"Impulse Smith",
    "description":"Bundle of Impulse Anvil (VST3) and Impulse Forge (Acoustic Editor) for building, flying through and baking custom spaces.",
    "offers":{"@type":"Offer","price":"249","priceCurrency":"EUR"}
  }
  </script>
</head>
<body>

  <button id="menuToggle" aria-label="Open menu" title="Open menu">☰</button>

  <div class="intro" id="intro" aria-hidden="true">
    <img src="FreQtikBlackLogo.png" alt="FreQtik Logo" />
    <p>create experiences & find solutions.</p>
  </div>

  <header id="mainHeader" role="banner">
    <div class="logo-container">
      <button class="logo-button" type="button" onclick="loadFeed('impulse'); closeDropdowns();">
        <img src="FreQtikBlackLogo.png" id="scrollLogo" alt="FreQtik Logo">
      </button>
    </div>
    <nav role="navigation" aria-label="Main">
      <ul>
        <!-- Audio Tools menu -->
        <li class="dropdown">
          <button onclick="toggleDropdown(this)" type="button" aria-haspopup="true" aria-expanded="false">Audio Tools</button>
          <div class="dropdown-content" role="menu" aria-label="Audio Tools">
            <a href="#" onclick="loadFeed('impulse');closeDropdowns();return false;">Impulse (All)</a>
            <a href="#" onclick="loadFeed('anvil');closeDropdowns();return false;">Impulse Anvil (VST3)</a>
            <a href="#" onclick="loadFeed('forge');closeDropdowns();return false;">Impulse Forge (Acoustic Editor)</a>
            <a href="#" onclick="loadFeed('smith');closeDropdowns();return false;">Impulse Smith (Bundle)</a>
          </div>
        </li>

        <li><button onclick="loadFeed('downloads')" type="button">Downloads</button></li>
        <li><button onclick="loadFeed('socials')" type="button">Connect</button></li>

        <!-- About & personal projects on the far right -->
        <li class="dropdown">
          <button onclick="toggleDropdown(this)" type="button" aria-haspopup="true" aria-expanded="false">About & Projects</button>
          <div class="dropdown-content" role="menu" aria-label="About & Projects">
            <a href="#" onclick="loadFeed('about');closeDropdowns();return false;">About FreQtik</a>

            <a href="#" onclick="loadFeed('ltb');closeDropdowns();return false;">Games · Learning to Bear</a>
            <a href="#" onclick="loadFeed('aim');closeDropdowns();return false;">Games · Aim Trainer Bee Pro</a>
            <a href="aimgame.html" onclick="closeDropdowns()">Games · UFO Clicker</a>

            <a href="#" onclick="loadFeed('youtube');closeDropdowns();return false;">Music · YouTube</a>
            <a href="#" onclick="loadFeed('spotify');closeDropdowns();return false;">Music · Spotify</a>
          </div>
        </li>
      </ul>
    </nav>
  </header>

  <div class="content-container" id="mainContent" role="main"></div>

  <footer role="contentinfo">
    <div>© <span id="yearSpan"></span> FreQtik. All rights reserved. ·
      <a href="#" onclick="loadFeed('impressum');return false;">Impressum / Legal Notice</a> ·
      <a href="/privacy.html">Privacy / Datenschutz</a> ·
      <a href="/terms.html">Terms / AGB</a>
    </div>
  </footer>

  <script>
    "use strict";

    /** steam app IDs (immutable) */
    const STEAM_IDS = Object.freeze({ ltb:2789890, aim:3666950 });

    const introEl   = document.getElementById('intro');
    const headerEl  = document.getElementById('mainHeader');
    const toggleBtn = document.getElementById('menuToggle');
    const mainEl    = document.getElementById('mainContent');

    let lastY = window.scrollY;

    /* Dropdown helpers */
    function toggleDropdown(btn) {
      const li = btn.parentElement;
      if (!li) return;
      const isOpen = li.classList.toggle('dropdown-open');
      btn.setAttribute('aria-expanded', String(isOpen));
      document.querySelectorAll('nav .dropdown').forEach(d => {
        if (d !== li) {
          d.classList.remove('dropdown-open');
          const b = d.querySelector('button');
          if (b) b.setAttribute('aria-expanded', 'false');
        }
      });
    }
    function closeDropdowns() {
      document.querySelectorAll('nav .dropdown').forEach(d => {
        d.classList.remove('dropdown-open');
        const b = d.querySelector('button');
        if (b) b.setAttribute('aria-expanded', 'false');
      });
    }

    /* Close dropdowns when clicking anywhere outside nav dropdowns */
    document.addEventListener('click', (event) => {
      const target = event.target;
      // If click is not inside a nav dropdown, close all
      if (!target.closest('nav .dropdown')) {
        closeDropdowns();
      }
    });

    /* Tiny util */
    function escapeHtml(str){
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#39;");
    }

    /* Product building blocks (with image support) */
    function productHero(opts){
      return `
      <section id="${opts.id}">
        <div class="hero">
          <div>
            <span class="kicker">${opts.kicker}</span>
            <h1>${opts.title}</h1>
            <p class="tagline">${opts.tagline}</p>
            <div class="cta-row">
              <a class="btn primary" href="${opts.buyHref}" target="_blank" rel="noopener" aria-label="Buy ${opts.title}">Buy from €${opts.priceFrom}</a>
              <a class="btn" href="${opts.demoHref}" target="_blank" rel="noopener" aria-label="Download demo for ${opts.title}">Try Demo</a>
              <a class="btn ghost" href="${opts.docsHref}" target="_blank" rel="noopener">Docs</a>
            </div>
            <p class="note">Windows 10/11 · 64-bit · ${opts.req}</p>
          </div>
          <div class="media-pane" ${opts.img ? '' : 'aria-hidden="true"'}>
            <img src="${opts.img || ''}" alt="${opts.title}" onerror="this.closest('.media-pane').classList.add('media-hide')">
          </div>
        </div>
      </section>`;
    }

    function pricingGrid(title, plans){
      return `
      <section>
        <h2>${title}</h2>
        <div class="grid">
          ${plans.map(p=>`
            <div class="card ${p.popular?'popular':''}">
              <h3>${p.name}${p.badge?` <span class="badge">${p.badge}</span>`:''}</h3>
              <div class="price">€${p.price}</div>
              <div class="sub muted">${p.subtitle}</div>
              <div class="hr"></div>
              <ul class="list">
                ${p.points.map(pt=>`<li>${escapeHtml(pt)}</li>`).join('')}
              </ul>
              <div class="hr"></div>
              <div class="cta-row">
                <a class="btn primary" href="${p.buyHref}" target="_blank" rel="noopener">Buy</a>
                <a class="btn" href="${p.demoHref}" target="_blank" rel="noopener">Demo</a>
              </div>
              ${p.foot?`<div class="note">${p.foot}</div>`:''}
            </div>
          `).join('')}
        </div>
      </section>`;
    }

    function featureMatrix(title, cols, rows){
      return `
      <section>
        <h2>${title}</h2>
        <div class="card">
          <table class="matrix" aria-describedby="matrix-desc">
            <caption id="matrix-desc" class="tiny" style="caption-side:bottom;text-align:left;padding-top:8px;">Feature comparison across versions</caption>
            <thead>
              <tr>
                <th style="text-align:left">Feature</th>
                ${cols.map(c=>`<th>${escapeHtml(c)}</th>`).join('')}
              </tr>
            </thead>
            <tbody>
              ${rows.map(r=>`
                <tr>
                  <td style="text-align:left">${escapeHtml(r.name)}</td>
                  ${r.cells.map(c=>`<td>${c}</td>`).join('')}
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      </section>`;
    }

    function demoSection(items){
      return `
      <section>
        <h2>Demo & Licensing</h2>
        <div class="cols">
          <div class="card">
            <h3>Demo Limits</h3>
            <ul class="list">
              ${items.map(i=>`<li><strong>${escapeHtml(i.name)}:</strong> ${escapeHtml(i.detail)}</li>`).join('')}
            </ul>
          </div>
          <div class="card">
            <h3>License & Installer</h3>
            <ul class="list">
              <li>Perpetual license · 12 months of updates included</li>
              <li>3 activations per license (offline fallback available)</li>
              <li>Installer required for folder structure <span class="muted">(code-signing planned)</span></li>
              <li>Windows 10/11 (64-bit). Anvil: VST3 host · Forge: Acoustic Editor</li>
            </ul>
          </div>
        </div>
      </section>`;
    }

        /* Auto-scrolling slides (Apple-like, with hover pause + wheel horizontal scroll) */
    function initAutoSlides() {
      const sliders = mainEl.querySelectorAll('.anvil-slides');
      sliders.forEach(slidesEl => {
        if (!slidesEl || slidesEl.dataset.scrollInit === '1')
          return;

        const originalChildren = Array.from(slidesEl.children);
        if (!originalChildren.length)
          return;

        slidesEl.dataset.scrollInit = '1';

        // Duplicate children once to allow seamless looping for auto-scroll
        originalChildren.forEach(child => {
          slidesEl.appendChild(child.cloneNode(true));
        });

        const state = {
          pos: slidesEl.scrollLeft || 0,
          speed: 0.22,       // px per frame
          auto: true,
          contentWidth: slidesEl.scrollWidth / 2
        };

        // Pause auto-scroll while user is over the cards
        slidesEl.addEventListener('mouseenter', () => {
          state.auto = false;
        });

        // Resume auto-scroll when leaving the card area
        slidesEl.addEventListener('mouseleave', () => {
          if (state.contentWidth > 0) {
            state.pos = slidesEl.scrollLeft % state.contentWidth;
          } else {
            state.pos = slidesEl.scrollLeft || 0;
          }
          state.auto = true;
        });

        // Vertical wheel = horizontal scroll when over the card area
        const onWheel = (ev) => {
          const absX = Math.abs(ev.deltaX);
          const absY = Math.abs(ev.deltaY);

          if (absY > absX) {
            state.auto = false;
            slidesEl.scrollLeft += ev.deltaY;

            if (state.contentWidth > 0) {
              state.pos = slidesEl.scrollLeft % state.contentWidth;
            } else {
              state.pos = slidesEl.scrollLeft || 0;
            }

            ev.preventDefault();
          }
        };

        slidesEl.addEventListener('wheel', onWheel, { passive: false });

        function step() {
          // stop if this node is no longer in the DOM
          if (!document.body.contains(slidesEl))
            return;

          if (state.auto && state.contentWidth > 0) {
            state.pos += state.speed;
            if (state.pos >= state.contentWidth)
              state.pos -= state.contentWidth;

            slidesEl.scrollLeft = state.pos;
          } else if (state.contentWidth > 0) {
            // keep internal position in sync when user scrolls manually
            state.pos = slidesEl.scrollLeft % state.contentWidth;
          }

          requestAnimationFrame(step);
        }

        requestAnimationFrame(step);
      });
    }

        /* IMPULSE ANVIL – ANATOMY HIGHLIGHTING */

    const anatomyFeatureMap = {
      global:  { top:0.03, left:0.02, width:0.36, height:0.30 },  // top-left: bypass, wet, normalize, levels
      ira:     { top:0.24, left:0.03, width:0.40, height:0.70 },  // left IR A panel
      irb:     { top:0.21, left:0.58, width:0.40, height:0.73 },  // right IR B panel
      morph:   { top:0.16, left:0.32, width:0.34, height:0.70 },  // central morph module
      fractal: { top:0.63, left:0.03, width:0.94, height:0.32 }   // bottom color/fractal rows
    };

    const anatomyLayoutMap = {
      global:{ shift:0 },
      ira:   { shift:-24 },
      irb:   { shift:24 },
      morph: { shift:0 },
      fractal:{ shift:0 }
    };

    function updateAnatomyHighlight(featureKey){
      const anatomy = mainEl.querySelector('.plugin-anatomy');
      if (!anatomy) return;

      const area = anatomyFeatureMap[featureKey];
      if (!area) return;

      const wrap     = anatomy.querySelector('.plugin-anatomy__image-wrap');
      const inner    = anatomy.querySelector('.plugin-anatomy__image-inner');
      const focusImg = anatomy.querySelector('.plugin-anatomy__img--focus');
      const box      = anatomy.querySelector('.plugin-anatomy__focus-box');
      const line     = anatomy.querySelector('.plugin-anatomy__focus-line');

      if (!wrap || !inner || !focusImg || !box || !line) return;

      const layout = anatomyLayoutMap[featureKey] || { shift:0 };
      inner.style.transform = `translateX(${layout.shift}px)`;

      const innerRect = inner.getBoundingClientRect();
      const wrapRect  = wrap.getBoundingClientRect();

      const x = innerRect.width  * area.left;
      const y = innerRect.height * area.top;
      const w = innerRect.width  * area.width;
      const h = innerRect.height * area.height;

      const topInset    = 100 * area.top;
      const rightInset  = 100 * (1 - area.left - area.width);
      const bottomInset = 100 * (1 - area.top  - area.height);
      const leftInset   = 100 * area.left;
      focusImg.style.clipPath = `inset(${topInset}% ${rightInset}% ${bottomInset}% ${leftInset}%)`;

      box.style.left   = `${x}px`;
      box.style.top    = `${y}px`;
      box.style.width  = `${w}px`;
      box.style.height = `${h}px`;

            // Start line at the right edge of the highlighted box, so it “grows” out of the focus area
      const startX = innerRect.left - wrapRect.left + x + w + 6;
      const startY = innerRect.top  - wrapRect.top + y + h/2;


      const endX = wrapRect.width + 40; // 40px into the text column
      const endY = startY;

      const dx = endX - startX;
      const dy = endY - startY;
      const length = Math.sqrt(dx*dx + dy*dy);
      const angle  = Math.atan2(dy, dx) * 180 / Math.PI;

      line.style.left  = `${startX}px`;
      line.style.top   = `${startY}px`;
      line.style.width = `${length}px`;
      line.style.transform = `rotate(${angle}deg)`;
    }

            function initAnatomy(){
      const anatomy = mainEl.querySelector('.plugin-anatomy');
      if (!anatomy) return;

      const steps = Array.from(anatomy.querySelectorAll('.anatomy-step'));
      if (!steps.length) return;

      const bandRoot = anatomy.closest('.anatomy-band') || anatomy;
      const dots  = Array.from(bandRoot.querySelectorAll('.plugin-anatomy__dot'));
      const stepsContainer = anatomy.querySelector('.plugin-anatomy__steps');

      // Order of features for stepping
      const featureOrder = ['global','ira','irb','morph','fractal'];
      let currentIndex = 0;

      function setActiveByIndex(idx) {
        if (idx < 0 || idx >= featureOrder.length) return;
        currentIndex = idx;
        const feature = featureOrder[currentIndex];

        let activeStep = null;
        steps.forEach(step => {
          const on = step.getAttribute('data-feature') === feature;
          step.classList.toggle('is-active', on);
          if (on) activeStep = step;
        });

        dots.forEach(dot => {
          const on = dot.getAttribute('data-target') === feature;
          dot.classList.toggle('is-active', on);
        });

        if (activeStep && stepsContainer) {
          stepsContainer.style.height = activeStep.offsetHeight + 'px';
        }

        updateAnatomyHighlight(feature);
      }

      // Dots: jump directly to a feature
      dots.forEach(dot => {
        dot.addEventListener('click', () => {
          const feature = dot.getAttribute('data-target');
          const idx = featureOrder.indexOf(feature);
          if (idx !== -1) {
            setActiveByIndex(idx);
          }
        });
      });

      // Wheel inside the anatomy band: step through features first,
      // only scroll the page once you’re at the first/last feature.
      const band = bandRoot;
      band.addEventListener('wheel', (ev) => {
        const delta = ev.deltaY || ev.detail || 0;
        if (!delta) return;

        if (delta > 0 && currentIndex < featureOrder.length - 1) {
          // Scroll down -> next feature
          ev.preventDefault();
          setActiveByIndex(currentIndex + 1);
        } else if (delta < 0 && currentIndex > 0) {
          // Scroll up -> previous feature
          ev.preventDefault();
          setActiveByIndex(currentIndex - 1);
        } else {
          // At edges: let normal page scroll continue
        }
      }, { passive:false });

      // Optional keyboard nav (up/down arrows) when the section is focused
      band.addEventListener('keydown', (ev) => {
        if (ev.key === 'ArrowDown') {
          if (currentIndex < featureOrder.length - 1) {
            ev.preventDefault();
            setActiveByIndex(currentIndex + 1);
          }
        } else if (ev.key === 'ArrowUp') {
          if (currentIndex > 0) {
            ev.preventDefault();
            setActiveByIndex(currentIndex - 1);
          }
        }
      });

      // Initialise: first card & first dot, plugin aligned
      setActiveByIndex(0);

      // Keep highlight & height aligned on resize
      window.addEventListener('resize', () => {
        const feature = featureOrder[currentIndex];
        setActiveByIndex(currentIndex);
        updateAnatomyHighlight(feature);
      }, { passive:true });
    }



    /* PAGE BUILDS */

    function buildImpulseAll(){
      const hero = productHero({
        id:'impulse',
        kicker:'New · Audio Toolkit',
        title:'Impulse Smith',
        tagline:'Design, morph and bake impulse responses — from room shape to IR file.',
        buyHref:'#TODO-buy-smith',
        demoHref:'#TODO-demo-smith',
        docsHref:'#TODO-docs-smith',
        priceFrom: '99',
        req:'Includes Impulse Anvil (VST3) & Impulse Forge (Acoustic Editor)',
        img:'impulse-forge-hero.png'
      });

      const tipsBand = `
      <section class="band-dark">
        <div class="band-inner">
          <div class="band-header">
            <span class="band-pill">Creative Tips</span>
            <h2>Why creators want Impulse Smith.</h2>
          </div>

          <div class="anvil-slides" aria-label="Impulse Smith tips and creative ideas">
            <article class="anvil-slide">
              <h3>No limits. At all.</h3>
              <p>You’re not locked into any one ecosystem. If you can turn it into audio, you can turn it into an impulse response.</p>
              <ul class="list">
                <li>Record a percussive hit or burst through your favourite reverb at 100% wet.</li>
                <li>Export that audio and drop it into Impulse Anvil as an IR.</li>
                <li>Capture and combine hardware, plugins and weird chains as new IRs.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>No worries about formats</h3>
              <p>Mix and match mono and stereo IRs with different samplerates. Impulse Anvil automatically resamples slot B to match slot A so morphs are always aligned.</p>
              <ul class="list">
                <li>Mono ↔ stereo combinations supported.</li>
                <li>Different samplerates? Automatically matched for you.</li>
                <li>You focus on sound, not file management.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Build · Fly · Bake</h3>
              <p>Design the room in Impulse Forge, fly through it in real time, then bake its acoustics as IRs for Impulse Anvil or any IR loader.</p>
              <ul class="list">
                <li>Build any room or environment you can imagine.</li>
                <li>Walk it like a game level and hear its acoustics instantly.</li>
                <li>Bake IRs and reuse them in your favourite plugins.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Capture any reverb you ever imagined</h3>
              <p>Between Forge and Anvil you can go from “what if?” to a finished impulse response pack.</p>
              <ul class="list">
                <li>Capture real or virtual spaces with Forge.</li>
                <li>Reshape, morph and colour those IRs in Anvil.</li>
                <li>Export WAVs and use them in any convolution reverb or cab sim.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Creative Workshops</h3>
              <p>In the Creative section and docs you’ll find tips, tricks and videos that go beyond the manual.</p>
              <ul class="list">
                <li>Watch in-depth walkthroughs of Anvil and Forge.</li>
                <li>Learn practical recipes for sound design and mixing.</li>
                <li>Use them like creative workshops, not just tools.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Test any room shape</h3>
              <p>Ever wondered how a very specific room shape would sound? Sketch it in Forge, walk through it and bake its IRs.</p>
              <ul class="list">
                <li>Scan distances to match real-world rooms more closely.</li>
                <li>See particles visualise sound bouncing around your geometry.</li>
                <li>Turn pure curiosity into usable presets.</li>
              </ul>
            </article>
          </div>
        </div>
      </section>`;

      const pricing = pricingGrid('Bundle Pricing – Impulse Smith', [
        {
          name:'Basic Bundle', badge:'Best value', price:99,
          subtitle:'Starter morph + on-engine capture',
          points:[
            'Anvil Basic + Forge Basic',
            'Time morph, linear curve',
            '8–10s demo-friendly workflows',
            'Great for creating first IR packs'
          ],
          buyHref:'#TODO-buy-smith-basic', demoHref:'#TODO-demo-smith'
        },
        {
          name:'Pro Bundle', price:249, popular:true,
          subtitle:'Full creative workstation',
          points:[
            'Anvil Pro + Forge Pro',
            'Spectral & time morph, all curves + K',
            'Color ×2 per IR, full Fractal depth',
            'Batch morph/bake + headless CLI in Forge'
          ],
          buyHref:'#TODO-buy-smith-pro', demoHref:'#TODO-demo-smith',
          foot:'Launch promo −20% for 2 weeks'
        }
      ]);

      const matrix = featureMatrix('At a glance', ['Basic Bundle','Pro Bundle'], [
        { name:'Morph modes (Anvil)', cells:['Time','Time + Spectral'] },
        { name:'Curves (Anvil)', cells:['Linear','Linear, Exp, Log, S, Power (+K)'] },
        { name:'Color / Fractal (Anvil)', cells:['—','2× Color per IR + full Fractal'] },
        { name:'Export / Bake (Anvil)', cells:['—','Bake morphed IRs + batch'] },
        { name:'Capture tools (Forge)', cells:['Manual capture','Batch + presets + CLI'] },
        { name:'Workflow', cells:['Single-user sound design','Full IR design pipeline'] }
      ]);

      const demo = demoSection([
        { name:'Anvil', detail:'Perpetual demo. Short periodic mute; export limited to 10s with subtle watermark; disk preset save disabled in Basic.' },
        { name:'Forge', detail:'Capture up to 8s (+1.5s tail). Batch/CLI disabled. Filenames tagged “_DEMO”.' }
      ]);

      const tiles = `
      <section>
        <h2>Included Apps</h2>
        <div class="grid">
          <div class="card">
            <h3>Impulse Anvil <span class="badge">VST3</span></h3>
            <div class="media-pane" style="margin-bottom:10px;">
              <img src="impulse-anvil-header.png" alt="Impulse Anvil" onerror="this.closest('.media-pane').classList.add('media-hide')">
            </div>
            <p class="muted">IR morphing, shaping & export inside your DAW.</p>
            <div class="hr"></div>
            <ul class="list">
              <li>Load A/B IRs, stretch & morph</li>
              <li>Spectral or time domain modes</li>
              <li>Curve shaping (Linear→Power, K-shape)</li>
              <li>Color & Fractal enrichment</li>
              <li>Bake-to-WAV (Pro)</li>
            </ul>
            <div class="hr"></div>
            <div class="cta-row">
              <a class="btn" href="#" onclick="loadFeed('anvil');return false;">See Anvil</a>
            </div>
          </div>
          <div class="card">
            <h3>Impulse Forge <span class="badge">Acoustic Editor</span></h3>
            <div class="media-pane" style="margin-bottom:10px;">
              <img src="impulse-forge-hero.png" alt="Impulse Forge" onerror="this.closest('.media-pane').classList.add('media-hide')">
            </div>
            <p class="muted">Build rooms, fly through them and bake their acoustics.</p>
            <div class="hr"></div>
            <ul class="list">
              <li>Geometry-based acoustic sandbox</li>
              <li>Frequency-dependent acoustic materials</li>
              <li>.OBJ import from any 3D tool</li>
              <li>Real-time listening inside your scene</li>
              <li>IR capture & export</li>
            </ul>
            <div class="hr"></div>
            <div class="cta-row">
              <a class="btn" href="#" onclick="loadFeed('forge');return false;">See Forge</a>
            </div>
          </div>
          <div class="card">
            <h3>Get the Bundle</h3>
            <p class="muted">One key. Shared activation. Seamless workflow.</p>
            <div class="hr"></div>
            <div class="cta-row">
              <a class="btn primary" href="#TODO-buy-smith" target="_blank" rel="noopener">Buy Impulse Smith</a>
              <a class="btn" href="#TODO-demo-smith" target="_blank" rel="noopener">Try Demo</a>
            </div>
          </div>
        </div>
      </section>`;

      const related = `
      <section>
        <h2>Continue exploring the Impulse family</h2>
        <div class="grid">
          <div class="card">
            <h3>Impulse Anvil</h3>
            <p class="muted">Part of the Impulse Smith bundle · VST3 IR forge inside your DAW.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('anvil');return false;">Go to Impulse Anvil</a>
          </div>
          <div class="card">
            <h3>Impulse Forge</h3>
            <p class="muted">Part of the Impulse Smith bundle · Standalone acoustic editor for building and baking spaces.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('forge');return false;">Go to Impulse Forge</a>
          </div>
        </div>
      </section>`;

      return hero + tipsBand + pricing + matrix + tiles + demo + related;
    }

        function buildAnvil(){
      const hero = productHero({
        id:'anvil',
        kicker:'VST3 Plugin',
        title:'Impulse Anvil',
        tagline:'Forge new IRs from the ones you already own – then use them everywhere.',
        buyHref:'#TODO-buy-anvil',
        demoHref:'#TODO-demo-anvil',
        docsHref:'#TODO-docs-anvil',
        priceFrom:'39',
        req:'VST3 host (64-bit)',
        img:'impulse-anvil-header.png'
      });

      const anvilIntro = `
      <section>
        <h2>What Impulse Anvil is</h2>
        <div class="cols">
          <div>
            <p><strong>Impulse Anvil</strong> is a dual-slot impulse response morphing &amp; baking plugin. It takes the IRs you already have – from other plugins, IR packs, your own captures, even AI-generated files – and lets you reshape, blend and re-forge them into new, portable WAV IRs.</p>
            <p>It’s not a “wiggle everything in real time” effect. Every move you make <strong>rebuilds the impulse response itself</strong> behind the scenes. You dial in the sound, bake it, and then use that IR in any other convolution reverb, cab sim or IR loader you own.</p>
            <p>Impulse Anvil started from a simple problem: <em>great instruments that felt dusty and over-used</em>. The solution was to create brand new spaces and resonances around them – spaces that hadn’t been heard before.</p>
          </div>
          <div class="card">
            <h3>Impulse Responses, in short</h3>
            <p>An <strong>Impulse Response (IR)</strong> is not just a reverb preset. It’s a full fingerprint of a signal path:</p>
            <ul class="list">
              <li>Rooms and halls</li>
              <li>Speaker cabinets &amp; mics</li>
              <li>Hardware chains &amp; FX</li>
              <li>Any linear time-based process</li>
            </ul>
            <p class="note">With the right IR you can make a sound feel like it’s inside a cathedral, a bedroom closet, a guitar cab, or some impossible, cinematic space. Impulse Anvil lets you <strong>design those fingerprints yourself</strong>.</p>
          </div>
        </div>
      </section>`;

      const anvilBand = `
      <section class="band-dark">
        <div class="band-inner">
          <div class="band-header">
            <span class="band-pill">Why producers reach for Impulse Anvil</span>
            <h2>Turn every IR collection into a forge.</h2>
          </div>

          <div class="anvil-slides" aria-label="Impulse Anvil highlights">
            <article class="anvil-slide">
              <h3>Use any IRs you already own</h3>
              <p>Load IRs from other reverbs, cab sims, hardware captures, sample packs or AI tools. Impulse Anvil doesn’t care where they came from – it treats them as raw material.</p>
              <ul class="list">
                <li>Drop in WAV IRs from any plugin or library.</li>
                <li>Combine spaces, cabs and chains that were never meant to meet.</li>
                <li>Turn existing collections into a source of <strong>new</strong> IRs.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Forge, don’t automate</h3>
              <p>Impulse Anvil is a <strong>forge</strong>, not an automatable reverb. Every knob drag rebuilds the IR itself, so the result is precise, clean and portable.</p>
              <ul class="list">
                <li>Work deliberately, commit when it sounds right.</li>
                <li>No parameter-chasing in every project – just load the baked IR.</li>
                <li>Perfect for building reusable, recall-safe sounds.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Colour Stripes &amp; Fractal depth</h3>
              <p>Shape each source IR with independent Colour Stripes and optional Fractal stacking to build complex, living spaces.</p>
              <ul class="list">
                <li>Time, phase and gain control per stripe for precise shaping.</li>
                <li>Fractal mode re-applies that colouring in layers, adding density and richness.</li>
                <li>Turn simple rooms or cabs into hyper-detailed, characterful spaces.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Morph between A and B</h3>
              <p>Morph two IRs in time or in the spectral domain – or use hybrid modes to create spaces that feel almost synthesized.</p>
              <ul class="list">
                <li>Time or spectral morphing, with optional peak alignment.</li>
                <li>Multiple morph curves (Linear, Exp, Log, S, Power) with K control.</li>
                <li>From transparent blends to bold, broken spaces.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>IRs you can use anywhere</h3>
              <p>When you’ve forged something special, bake it out as a high-quality WAV IR and use it in any other impulse response tool you own.</p>
              <ul class="list">
                <li>Bake morphed, coloured and fractal-processed IRs to disk.</li>
                <li>Drop them into your favourite convolution reverb or cab sim.</li>
                <li>Build your own signature IR folders and packs.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>For creators who’ve heard it all</h3>
              <p>If your instruments and presets feel old, Impulse Anvil gives them new life by changing the space around them – not just the EQ or compressor on top.</p>
              <ul class="list">
                <li>Refresh dusty VST instruments with unheard spaces.</li>
                <li>Turn “boring” sounds into something exciting and inspiring.</li>
                <li>Perfect for artists chasing a <strong>truly personal</strong> sound.</li>
              </ul>
            </article>
          </div>
        </div>
      </section>`;

      const pricing = pricingGrid('Impulse Anvil – Versions', [
        {
          name:'Basic', price:39, subtitle:'Core morphing',
          points:[
            'Time morph · Linear curve',
            'Load A/B IRs (≤ 6s each)',
            'Session recall; user banks disabled',
            'No Color/Fractal, no export'
          ],
          buyHref:'#TODO-buy-anvil-basic', demoHref:'#TODO-demo-anvil'
        },
        {
          name:'Advanced', price:79, subtitle:'Power tools',
          points:[
            'Time + Spectral morph',
            'Curves: Linear, Exp, Log, S (+K)',
            'Color ×1 per IR · Fractal to 50%',
            'Bake to WAV · User presets',
            'IR length up to 12s'
          ],
          buyHref:'#TODO-buy-anvil-adv', demoHref:'#TODO-demo-anvil'
        },
        {
          name:'Pro', price:129, subtitle:'Full workstation', popular:true,
          points:[
            'All curves incl. Power (+ extended K)',
            'Color ×2 per IR · Fractal 0–100%',
            'Batch morph & bake',
            'High-res meters + bridge diagnostics',
            'IR length up to 60s'
          ],
          buyHref:'#TODO-buy-anvil-pro', demoHref:'#TODO-demo-anvil'
        }
      ]);

      const matrix = featureMatrix('Feature comparison (Anvil)', ['Basic','Advanced','Pro'], [
        { name:'Morph modes', cells:['Time','Time + Spectral','Time + Spectral'] },
        { name:'Curves', cells:['Linear','Lin/Exp/Log/S (+K)','All + Power (+K+)'] },
        { name:'Color per IR', cells:['—','×1','×2'] },
        { name:'Fractal depth', cells:['—','0–50%','0–100%'] },
        { name:'Bake/export', cells:['—','✓','✓ (batch)'] },
        { name:'Max IR length', cells:['6s','12s','60s'] },
        { name:'Bridge preview', cells:['—','✓','✓ + diagnostics'] },
        { name:'User presets', cells:['—','✓','✓'] }
      ]);

      const anatomy = `
            const anatomy = `
      <section class="band-dark anatomy-band">
        <div class="band-inner">
          <div class="band-header">
            <span class="band-pill">Anatomy of Impulse Anvil</span>
            <h2>See exactly what each section does.</h2>
            <p class="muted">Scroll through the cards or use the dots to highlight each area on the plugin.</p>
          </div>

          <div class="plugin-anatomy__dots">
            <button type="button" class="plugin-anatomy__dot" data-target="global" aria-label="Global controls"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="ira" aria-label="IR A slot"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="irb" aria-label="IR B slot"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="morph" aria-label="Morph engine"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="fractal" aria-label="Fractal depth"></button>
          </div>

          <div class="plugin-anatomy">
            <div class="plugin-anatomy__image-wrap">
              <div class="plugin-anatomy__image-inner">
                <img src="Impulse-Anvil-UI.png" alt="Impulse Anvil user interface"
                     class="plugin-anatomy__img plugin-anatomy__img--blur">
                <img src="Impulse-Anvil-UI.png" alt="" aria-hidden="true"
                     class="plugin-anatomy__img plugin-anatomy__img--focus">
                <div class="plugin-anatomy__focus-box"></div>
              </div>
              <div class="plugin-anatomy__focus-line"></div>
            </div>

            <div class="plugin-anatomy__steps">
              <article class="anatomy-step" data-feature="global">
                <h3>Global control &amp; loudness</h3>
                <p>The top-left of Anvil gives you global control over the chain: bypass, wet-only listening, IR normalisation and the main input / wet level knobs.</p>
                <ul>
                  <li>Quickly check “wet only” to hear what the IR is really doing.</li>
                  <li>Normalize IRs when you just want a healthy level without thinking.</li>
                  <li>Use the Input &amp; Wet Level to hit the morph engine exactly as hard as you like.</li>
                </ul>
              </article>

              <article class="anatomy-step" data-feature="ira">
                <h3>IR A slot · Your main source</h3>
                <p>On the left side you load <strong>IR A</strong> – the main space, cab or chain you’re starting from.</p>
                <ul>
                  <li>Load any WAV IR from disk or from your preset banks.</li>
                  <li>Set IR A Gain in dB to match loudness by ear.</li>
                  <li>Use the Time A stretch to make that IR tighter or more cinematic before any morphing happens.</li>
                  <li>Shape A Colors to emphasise specific reflections or tonal regions.</li>
                </ul>
                <p>The result is a perfectly prepared “base reality” that everything else builds on.</p>
              </article>

              <article class="anatomy-step" data-feature="irb">
                <h3>IR B slot · The counterweight</h3>
                <p>On the right, <strong>IR B</strong> is the counterpart that pulls your sound into a new direction.</p>
                <ul>
                  <li>Load IRs from other plugins, packs, hardware or AI tools.</li>
                  <li>Match its level with IR B Gain so the morph feels natural.</li>
                  <li>Use Time B stretch to decide if B should feel tighter, longer or completely otherworldly.</li>
                  <li>B Colors let you pre-shape B so its character comes through exactly as much as you want.</li>
                </ul>
                <p>Think of B as the “what if?” version of your sound – waiting to be forged together with A.</p>
              </article>

              <article class="anatomy-step" data-feature="morph">
                <h3>Morph engine · Where A becomes B</h3>
                <p>The central Morph section is the heart of Impulse Anvil. Every move of the big knob rebuilds the IR between A and B.</p>
                <ul>
                  <li>Choose between Time Morph and Spectral Morph for temporal vs tonal focus.</li>
                  <li>Pick the Curve (Linear, Exp, Log, S, Power) and tune the K-parameter for how the transition behaves.</li>
                  <li>Align peaks when you want transparent blends that still feel punchy.</li>
                </ul>
                <p>Once it feels right, you bake it – and that exact fusion becomes a single IR you can load anywhere.</p>
              </article>

              <article class="anatomy-step" data-feature="fractal">
                <h3>Fractal / Recursive depth</h3>
                <p>At the bottom of the A and B sections you’ll find the Fractal depth controls. They tell Anvil how far to recursively re-apply its own IR structure.</p>
                <ul>
                  <li>Low values subtly increase density and smoothness, keeping things realistic.</li>
                  <li>Higher values create rich, layered tails that feel closer to a hybrid of convolution and algorithmic reverb.</li>
                  <li>Enable Fractal on both A and B and morph between two evolving, deeply textured spaces.</li>
                </ul>
                <p>It’s how you turn simple, flat IRs into living, modern spaces that still fit into a single WAV file.</p>
              </article>
            </div>
          </div>
        </div>
      </section>`;


      const demo = demoSection([
        { name:'Anvil', detail:'Perpetual; short periodic mute every ~60s; export limited to 10s with subtle watermark; disk preset save disabled in Basic.' }
      ]);

      const related = `
      <section>
        <h2>Part of the Impulse Smith bundle</h2>
        <div class="grid">
          <div class="card">
            <h3>Impulse Smith</h3>
            <p class="muted">Bundle including Impulse Anvil (VST3) and Impulse Forge (Acoustic Editor).</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('impulse');return false;">View Impulse Smith bundle</a>
          </div>
          <div class="card">
            <h3>Impulse Forge</h3>
            <p class="muted">Design the rooms and spaces that feed your Impulse Anvil IRs.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('forge');return false;">Go to Impulse Forge</a>
          </div>
        </div>
      </section>`;

      // order: hero / intro / first dark band / pricing / matrix / anatomy (dark) / demo / related
      return hero + anvilIntro + anvilBand + pricing + matrix + anatomy + demo + related;
    }



    function buildForge(){
      const hero = productHero({
        id:'forge',
        kicker:'Acoustic Editor',
        title:'Impulse Forge',
        tagline:'Build any room, fly through it, and bake its acoustics as impulse responses.',
        buyHref:'#TODO-buy-forge',
        demoHref:'#TODO-demo-forge',
        docsHref:'#TODO-docs-forge',
        priceFrom:'49',
        req:'Acoustic Editor · Windows 64-bit',
        img:'impulse-forge-hero.png'
      });

      const forgeIntro = `
      <section>
        <h2>What Impulse Forge is</h2>
        <div class="cols">
          <div>
            <p><strong>Impulse Forge</strong> is a geometry-based acoustic sandbox. You can build any room you can imagine, fly through it in first-person and hear its acoustics react in real time.</p>
            <p>Create simple box rooms or intricate multi-room levels, edit them with precise snapping and grouping tools, then bake their response as IRs you can load in Impulse Anvil or any convolution reverb.</p>
            <p>You can also create complex meshes in any 3D package, export them as <strong>.obj</strong> and import them as runtime actors with full acoustic materials attached – perfect for architectural experiments, sound design spaces or game levels.</p>
          </div>
          <div class="card">
            <h3>Acoustic materials, for real</h3>
            <p>Every surface in Forge can have a dedicated acoustic material component with clearly exposed parameters:</p>
            <ul class="list">
              <li><strong>Absorption</strong> – Low / Mid / High bands</li>
              <li><strong>Transmission</strong> – Low / Mid / High bands</li>
              <li><strong>Scattering</strong> – how strongly the surface diffuses sound</li>
              <li>Material presets (Concrete, Brick, Glass, Wood, Curtain, Carpet, Metal) + fully Custom</li>
            </ul>
            <p class="note">Those values map directly into the underlying acoustic engine so what you see in the editor is what you hear in the simulation.</p>
          </div>
        </div>
      </section>`;

      const forgeBand = `
      <section class="band-dark">
        <div class="band-inner">
          <div class="band-header">
            <span class="band-pill">Build · Fly · Bake</span>
            <h2>From room shape to impulse response.</h2>
          </div>

          <div class="anvil-slides" aria-label="Impulse Forge highlights">
            <article class="anvil-slide">
              <h3>Geometry-based acoustic sandbox</h3>
              <p>Lay out walls, floors, ceilings and meshes directly in the editor. Snap, align and group like a level designer, but with acoustics as the main focus.</p>
              <ul class="list">
                <li>Precision grid and angle snapping.</li>
                <li>Selection, grouping and duplication for fast layout.</li>
                <li>Save/load complete acoustic levels as presets.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Import complex meshes via .OBJ</h3>
              <p>Already comfortable in Blender, Maya or Max? Model there, export as <strong>.obj</strong>, and let Forge create runtime actors with full collision and acoustic material support.</p>
              <ul class="list">
                <li>Runtime .OBJ import with triangulation and uniform scaling.</li>
                <li>Each imported mesh gets its own acoustic material component.</li>
                <li>Included in selection, grouping and acoustic export.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Walk the room, hear the room</h3>
              <p>A dedicated first-person character lets you fly or walk through your scene and listen as the space reacts around you.</p>
              <ul class="list">
                <li>Convolution preview wired to a submix for instant “room feel”.</li>
                <li>Physical acoustic simulation under the hood.</li>
                <li>Switch between exploring and editing with a single UI toggle.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Scan distances & visualise sound</h3>
              <p>Answer questions like “how big would this really feel?” by scanning distances and watching particle-based sound visualisations.</p>
              <ul class="list">
                <li>Scan distances to match real-world rooms or design targets.</li>
                <li>Fire particles to see sound bounces across your geometry.</li>
                <li>Use visuals and hearing together to refine your design.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>High-resolution IR capture</h3>
              <p>When a space feels right, bake its acoustics into impulse responses you can use anywhere.</p>
              <ul class="list">
                <li>Probe-based baking with ray count, bounce depth and duration.</li>
                <li>Parametric or convolution bake types.</li>
                <li>Export float32 WAV IRs ready for Anvil or any IR loader.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>From “I wonder how this sounds” to presets</h3>
              <p>Have you ever wondered how a very specific room shape might sound? With Forge you can build it, fly through it, and create your own presets in one workflow.</p>
              <ul class="list">
                <li>Experiment freely with shapes and materials.</li>
                <li>Save the ones you love as IRs and level presets.</li>
                <li>Use them in music, games, sound design and beyond.</li>
              </ul>
            </article>
          </div>
        </div>
      </section>`;

      const pricing = pricingGrid('Impulse Forge – Versions', [
        {
          name:'Basic', price:49, subtitle:'Get started',
          points:[
            'Pulse or noise capture',
            'Max 10s capture (+2s tail)',
            'Convolution preview (wet/dry)',
            'Manual bake; no batch'
          ],
          buyHref:'#TODO-buy-forge-basic', demoHref:'#TODO-demo-forge'
        },
        {
          name:'Studio', price:119, subtitle:'Production workflow',
          points:[
            'Max 60s capture (+tail)',
            'Trim + normalization per capture',
            'Batch bake UI',
            'VST Bridge component to Anvil',
            'Blueprint helpers & templates'
          ],
          buyHref:'#TODO-buy-forge-studio', demoHref:'#TODO-demo-forge'
        },
        {
          name:'Pro', price:199, subtitle:'Team & automation', popular:true,
          points:[
            'Everything in Studio',
            'Headless/CLI baking for CI',
            'Per-map presets & auto-naming',
            'Capture variants (multi-seed)',
            'Team license (2 seats)'
          ],
          buyHref:'#TODO-buy-forge-pro', demoHref:'#TODO-demo-forge'
        }
      ]);

      const matrix = featureMatrix('Feature comparison (Forge)', ['Basic','Studio','Pro'], [
        { name:'Capture duration', cells:['≤10s (+2s)','≤60s (+tail)','≤60s (+tail)'] },
        { name:'Trim / Normalize', cells:['Trim basic','Full','Full'] },
        { name:'Batch bake', cells:['—','✓','✓ + CLI'] },
        { name:'DAW bridge', cells:['—','✓','✓'] },
        { name:'Presets / Auto-naming', cells:['—','—','✓'] },
        { name:'Team / Seats', cells:['Single','Single','2 seats (add-on)'] }
      ]);

      const demo = demoSection([
        { name:'Forge', detail:'Demo captures up to 8s (+1.5s tail), batch & CLI disabled, filenames tagged “_DEMO”.' }
      ]);

      const related = `
      <section>
        <h2>Part of the Impulse Smith ecosystem</h2>
        <div class="grid">
          <div class="card">
            <h3>Impulse Smith Bundle</h3>
            <p class="muted">Impulse Forge is included in the Impulse Smith bundle alongside Impulse Anvil.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('impulse');return false;">View Impulse Smith bundle</a>
          </div>
          <div class="card">
            <h3>Impulse Anvil</h3>
            <p class="muted">Use your baked rooms as IRs and forge completely new spaces inside your DAW.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('anvil');return false;">Go to Impulse Anvil</a>
          </div>
        </div>
      </section>`;

      return hero + forgeIntro + forgeBand + pricing + matrix + demo + related;
    }

    /* Router */
    function loadFeed(feed){
      try {
        // Always close dropdowns when changing section
        closeDropdowns();

        let html = '';
        switch(feed){
          case 'impulse': html = buildImpulseAll(); break;
          case 'anvil': html = buildAnvil(); break;
          case 'forge': html = buildForge(); break;
          case 'smith': html = buildImpulseAll(); break; // alias to bundle page

          case 'about':
            html = `<section id="about"><h2>About FreQtik</h2><p>FreQtik is a one-person studio, building professional audio tools, software solutions and games.</p></section>`;
            break;

          case 'ltb': case 'aim': {
            const id = STEAM_IDS[feed];
            html = `<section id="${feed}" class="depth-effect">
              <h2>${feed==='ltb'?'Learning to Bear':'Aim Trainer Bee Pro'}</h2>
              <iframe class="responsive-iframe" src="https://store.steampowered.com/widget/${id}/" frameborder="0" loading="lazy" title="Steam widget ${id}"></iframe>
              <div id="steam-${feed}"><p>Loading details…</p></div>
            </section>`;
            setTimeout(()=>fetchSteam(feed,id),0);
            break;
          }

          case 'youtube':
            html = `<section id="youtube" class="depth-effect">
              <h2>YouTube Channel</h2>
              <div class="flex-container">
                <a href="https://www.youtube.com/@FreQtik" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png" alt="YouTube">Visit Channel
                </a>
              </div>
            </section>`;
            break;

          case 'spotify':
            html = `<section id="spotify" class="depth-effect">
              <h2>Spotify</h2>
              <iframe class="responsive-iframe" src="https://open.spotify.com/embed/artist/7sbdoA5VGDrbEjY3AngmgK" allow="encrypted-media" loading="lazy" title="Spotify embed"></iframe>
            </section>`;
            break;

          case 'downloads':
            html = `<section id="downloads" class="depth-effect">
              <h2>Downloads & Tools</h2>
              <p>Grab demos and updates here once links are live.</p>
              <div class="grid" style="margin-top:14px">
                <div class="card">
                  <h3>Impulse Anvil Demo</h3>
                  <p class="muted">VST3 · Windows 64-bit</p>
                  <div class="hr"></div>
                  <a class="btn" href="#TODO-demo-anvil" target="_blank" rel="noopener">Download</a>
                </div>
                <div class="card">
                  <h3>Impulse Forge Demo</h3>
                  <p class="muted">Acoustic Editor · Windows 64-bit</p>
                  <div class="hr"></div>
                  <a class="btn" href="#TODO-demo-forge" target="_blank" rel="noopener">Download</a>
                </div>
                <div class="card">
                  <h3>Impulse Smith (Bundle) Demo</h3>
                  <p class="muted">Both installers</p>
                  <div class="hr"></div>
                  <a class="btn" href="#TODO-demo-smith" target="_blank" rel="noopener">Download</a>
                </div>
              </div>
              <p class="note">Windows SmartScreen may warn because the installer isn’t code-signed yet. <a href="#TODO-smartscreen-help" target="_blank" rel="noopener">Here’s why and how to proceed safely</a>.</p>
            </section>`;
            break;

          case 'socials':
            html = `<section id="socials" class="depth-effect">
              <h2>Connect</h2>
              <div class="flex-container">
                <a href="https://www.instagram.com/freqtik/" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">Instagram
                </a>
                <a href="https://open.spotify.com/artist/7sbdoA5VGDrbEjY3AngmgK" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="Spotify">Spotify
                </a>
                <a href="mailto:freqtiksup@gmail.com">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Mail_%28iOS%29.svg" alt="Email">Email
                </a>
              </div>
            </section>`;
            break;

          case 'impressum':
            html = `<section id="impressum" class="depth-effect">
              <h2>Impressum / Legal Notice</h2>

              <div lang="de">
                <p><strong>Angaben gemäß § 5 TMG</strong></p>
                <address>
                  <div><strong>FreQtik</strong></div>
                  <div>Maximilian Georg Walla</div>
                  <div>Wilhelm Leuschner Str. 93</div>
                  <div>63263 Neu Isenburg</div>
                  <div>Deutschland</div>
                </address>

                <p><strong>Kontakt</strong><br>
                  E-Mail: <a href="mailto:freqtiksup@gmail.com">freqtiksup@gmail.com</a>
                </p>

                <p><strong>Verantwortlich für den Inhalt nach § 18 Abs. 2 MStV</strong><br>
                  Maximilian Georg Walla, Wilhelm Leuschner Str. 93, 63263 Neu Isenburg, Deutschland
                </p>

                <h3>Haftungsausschluss, Links, Urheberrecht</h3>
                <p>Als Diensteanbieter sind wir gemäß § 7 Abs. 1 TMG für eigene Inhalte verantwortlich. Nach §§ 8–10 TMG sind wir nicht verpflichtet, fremde Informationen zu überwachen. Bei Kenntnis von Rechtsverletzungen entfernen wir Inhalte/Links umgehend. Inhalte unterliegen dem deutschen Urheberrecht.</p>

                <p><strong>EU-Streitschlichtung</strong><br>
                  Plattform der EU-Kommission: <a href="https://ec.europa.eu/consumers/odr" target="_blank" rel="noopener noreferrer">https://ec.europa.eu/consumers/odr</a>.
                </p>

                <p style="opacity:.7;margin-top:16px;">Stand: 2025-11-07</p>
              </div>

              <hr style="margin:24px 0;border:none;border-top:1px solid var(--line)">

              <div lang="en">
                <p><strong>Legal Notice (non-binding translation)</strong></p>
                <address>
                  <div><strong>FreQtik</strong></div>
                  <div>Maximilian Georg Walla</div>
                  <div>Wilhelm Leuschner Str. 93</div>
                  <div>63263 Neu Isenburg</div>
                  <div>Germany</div>
                </address>

                <p><strong>Contact</strong><br>
                  Email: <a href="mailto:freqtiksup@gmail.com">freqtiksup@gmail.com</a>
                </p>

                <h3>Disclaimer</h3>
                <p>The German version above governs. The English text is for convenience and does not change the legal meaning of the German “Impressum”.</p>

                <p style="opacity:.7">Last updated: 2025-11-07</p>
              </div>
            </section>`;
            break;

          default:
            html = `<section><h2>Not found</h2><p>Sorry, that section doesn't exist.</p></section>`;
        }

                mainEl.innerHTML = html;
        initAutoSlides(); // initialize auto-scrolling on any slides in this view
        initAnatomy();    // initialize plugin anatomy highlight if present
        mainEl.scrollIntoView({behavior:'smooth'});

      } catch (err) {
        console.error(err);
        mainEl.innerHTML = `<section><h2>Error</h2><p>Something went wrong loading this section.</p></section>`;
      }
    }

    /* Steam fetch helper */
    async function fetchSteam(feed, id){
      const targetId = `steam-${feed}`;
      const container = document.getElementById(targetId);
      if (!container) return;

      try{
        const url = encodeURIComponent(`https://store.steampowered.com/api/appdetails?appids=${id}&cc=US&l=en`);
        const res = await fetch(`https://api.allorigins.win/raw?url=${url}`, { method:'GET' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const json = await res.json();

        if (!json || !json[id] || !json[id].success) {
          throw new Error('Steam API returned no data.');
        }
        const info = json[id].data;
        const shots = Array.isArray(info?.screenshots)
          ? info.screenshots.map(
              s=>`<img src="${s.path_full}" style="max-width:100%;margin:10px 0;border-radius:4px;" alt="Screenshot">`
            ).join('')
          : '';

        container.innerHTML = `
          <p><strong>${escapeHtml(info?.name ?? 'Unknown')}</strong></p>
          <p>${escapeHtml(info?.short_description ?? '')}</p>
          ${shots}
          <p><a href="https://store.steampowered.com/app/${id}" target="_blank" rel="noopener noreferrer">View on Steam</a></p>
        `;
      }catch(e){
        container.innerHTML = `<p>Error loading Steam details. ${escapeHtml((e).message || '')}</p>`;
      }
    }

    /* menu toggle */
    toggleBtn.addEventListener('click', ()=>{
      headerEl.style.transform='translateY(0)';
      toggleBtn.style.display='none';
    });

    /* scroll behavior (header hide/show only; logo stays fixed) */
    window.addEventListener('scroll', ()=>{
      const y = window.scrollY;
      const hidden = (y>0);
      headerEl.style.transform = hidden ? 'translateY(-100%)' : 'translateY(0)';
      toggleBtn.style.display = hidden ? 'block' : 'none';

      // Close dropdowns when user scrolls
      closeDropdowns();
    });

    /* persist scroll */
    window.addEventListener('beforeunload', ()=> {
      try { sessionStorage.setItem('scrollPos', String(window.scrollY)); } catch {}
    });

    window.addEventListener('load', ()=>{
      const ySpan = document.getElementById('yearSpan');
      if (ySpan) ySpan.textContent = String(new Date().getFullYear());
      try {
        const pos = sessionStorage.getItem('scrollPos');
        if (pos) window.scrollTo(0, parseFloat(pos));
      } catch {}
      loadFeed('impulse'); // default landing section
      if (window.innerWidth < 600) introEl.classList.add('hidden');
    });

    // dismiss intro on minimal mouse movement
    let moved=0,lx=null,ly=null,done=false;
    document.addEventListener('mousemove',e=>{
      if(done||window.innerWidth<600) return;
      if(lx!==null) moved+=Math.abs(e.clientX-lx)+Math.abs(e.clientY-ly);
      lx=e.clientX; ly=e.clientY;
      if(moved>300){ introEl.classList.add('hidden'); done=true; }
    });
  </script>
</body>
</html>





