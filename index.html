<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FreQtik</title>
  <link rel="icon" type="image/png" href="QLogoPNGBlack_17x30.png">
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;600&display=swap" rel="stylesheet">
  <meta name="description" content="FreQtik — one-person studio, building professional audio tools, software solutions and games.">
  <style>
    :root {
      --bg: #fff;
      --text: #000;
      --muted: #666;
      --line: #e0e0e0;
      --shadow: rgba(0,0,0,0.08);
      --accent: #111;
      --accent2:#0b0b0b;
      --header-height: 200px;
      --rad: 14px;
    }
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Manrope',sans-serif; }
    html {
      background:var(--bg); color:var(--text);
      overflow-x:hidden; scroll-behavior:smooth;
      scroll-padding-top:var(--header-height);
    }
    body {
      overflow-x:hidden;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
     @media (min-width:901px){
      main > section:first-of-type {
        min-height: calc(100vh - 80px);
      }
    }
    /* INTRO */
    .intro {
      position:fixed; inset:0;
      background:var(--bg);
      display:flex; flex-direction:column;
      justify-content:center; align-items:center;
      z-index:9999;
      transition:opacity 1.5s,filter 1.5s;
    }
    .intro.hidden { opacity:0; filter:blur(8px); pointer-events:none; }
    .intro img { width:300px; max-width:90vw; }
    .intro p { margin-top:10px; font-size:18px; font-style:italic; opacity:0.5; }

    /* HEADER & TOGGLE */
    #menuToggle {
      position:fixed; top:10px; left:10px;
      z-index:200; background:none; border:none;
      font-size:24px; display:none; cursor:pointer;
    }
    header {
      position:fixed; top:0; left:0; right:0;
      background:var(--bg); z-index:100;
      box-shadow:0 4px 10px var(--shadow);
      transition:transform 0.3s;
      overflow:visible;
    }
    .logo-container {
      height:150px; border-bottom:1px solid var(--line);
      display:flex; justify-content:center; align-items:center;
    }
    .logo-button {
      background:none;
      border:none;
      padding:0;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .logo-container img {
      height:120px;
    }

    /* NAV */
    nav {
      display:flex; justify-content:center;
      padding:20px 0; border-bottom:1px solid var(--line);
      overflow:visible;
    }
    nav ul {
      display:flex; gap:40px; list-style:none; align-items:center;
    }
    nav ul li { position:relative; }
    nav ul li button, nav ul li a.nav-link {
      background:none; border:none; font-weight:600;
      font-size:16px; color:var(--text);
      padding:8px 16px; cursor:pointer;
      transition:transform 0.2s;
      text-decoration:none;
    }
    nav ul li button:hover,
    nav ul li a.nav-link:hover {
      transform:scale(1.05);
    }

    /* DROPDOWNS */
    .dropdown-content {
      display:none; position:absolute; top:100%; left:0;
      background:var(--bg); border:1px solid var(--line);
      padding:10px 15px; min-width:220px;
      box-shadow:0 4px 8px var(--shadow); z-index:999;
      white-space:nowrap;
    }
    nav ul li.dropdown:last-child .dropdown-content { left:auto; right:0; }

    .dropdown-open .dropdown-content { display:block; animation:fadeIn 0.3s; }

    .dropdown-content a {
      display:block; margin-bottom:12px;
      text-decoration:none; color:var(--text);
      font-size:16px;
      transition:transform 0.15s ease-out;
    }
    .dropdown-content a:last-child { margin-bottom:0; }
    .dropdown-content a:hover {
      transform:scale(1.03);
    }

    @keyframes fadeIn { from{opacity:0;transform:translateY(-5px);} to{opacity:1;transform:translateY(0);} }

    /* CONTENT */
    .content-container {
      padding-top:var(--header-height);
      flex:1 0 auto;
    }
    .responsive-iframe { display:block; width:100%; max-width:600px; height:300px; border:none; }
    section {
      padding:60px 20px; max-width:1100px; margin:auto;
      border-bottom:1px solid var(--line);
      opacity:0; transform:translateY(30px);
      animation:slideIn 0.6s ease forwards;
    }
    @keyframes slideIn { from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);} }
    section h2 { margin-bottom:20px; font-size:32px; border-bottom:1px solid var(--line); padding-bottom:5px; }
    section p, section ul { font-size:16px; line-height:1.65; color:var(--text); }
    section small { color:var(--muted); }
    section ul { list-style:inside; }
    .flex-container {
      display:flex; gap:20px; flex-wrap:wrap; justify-content:center; margin-top:20px;
    }
    .flex-container a {
      display:flex; align-items:center; gap:8px; text-decoration:none; font-size:16px; color:var(--text);
      padding:6px 12px; border-bottom:1px solid transparent; transition:border-color 0.3s;
    }
    .flex-container a:hover { border-bottom:1px solid var(--text); }
    .social-icon { width:20px; height:20px; }

    /* PRODUCT UI */
    .hero {
      display:grid; gap:18px; align-items:center;
      grid-template-columns: 1.2fr 1fr;
    }
    .hero h1 { font-size:40px; line-height:1.1; }
    .tagline { color:var(--muted); font-weight:600; }
    .cta-row { display:flex; gap:12px; flex-wrap:wrap; margin-top:14px; }
    .btn {
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 16px; border-radius:var(--rad);
      border:1px solid var(--text); background:#fff; color:#000; text-decoration:none; font-weight:600;
      transition:transform .15s, box-shadow .2s, background .2s, color .2s;
      box-shadow:0 2px 6px var(--shadow);
    }
    .btn:hover { transform:translateY(-1px); }
    .btn.primary { background:var(--text); color:#fff; border-color:var(--text); }
    .btn.ghost { border-style:dashed; }
    .grid {
      display:grid; gap:18px; grid-template-columns: repeat(3,1fr);
    }
    .card {
      border:1px solid var(--line); border-radius:var(--rad); padding:18px;
      box-shadow:0 4px 12px var(--shadow);
      background:#fff;
    }
    .card h3 { font-size:20px; margin-bottom:8px; }
    .price { font-weight:800; font-size:26px; margin:8px 0 2px; }
    .sub { color:var(--muted); font-size:13px; }
    .badge { display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--line); margin-left:8px; color:#333; }
    .popular { border-color:#111; box-shadow:0 8px 20px var(--shadow); position:relative; }
    .popular::after{
      content:"Most popular"; position:absolute; top:10px; right:10px; font-size:11px;
      padding:4px 8px; border:1px solid var(--line); border-radius:999px; background:#fff;
    }
    .matrix { width:100%; border-collapse:collapse; margin-top:8px; }
    .matrix th, .matrix td { border:1px solid var(--line); padding:10px; font-size:14px; text-align:center; }
    .matrix th { background:#fafafa; }
    .muted { color:var(--muted); }
    .kicker { text-transform:uppercase; letter-spacing:.12em; font-weight:800; font-size:12px; color:#333; }
    .note { font-size:13px; color:var(--muted); margin-top:8px; }
    .cols { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
    .list { margin-top:8px; }
    .list li { margin:6px 0; }
    .hr { height:1px; background:var(--line); margin:18px 0; }
    .tiny { font-size:12px; color:var(--muted); }

    /* MEDIA PANE (product images) */
    .media-pane { border:1px solid var(--line); border-radius:var(--rad); overflow:hidden; box-shadow:0 4px 12px var(--shadow); background:#000; display:flex; align-items:center; justify-content:center; aspect-ratio: 16/10; }
    .media-pane img { width:100%; height:100%; object-fit:cover; display:block; filter:saturate(0.95) contrast(1.02); }
    .media-hide { display:none; }

    /* APPLE-LIKE DARK BAND (used for Anvil & Smith tips & Forge) */
    .band-dark {
      padding:80px 0;
      max-width:100%;
      margin:0;
      background:#000;
      color:#f5f5f5;
      border-bottom:none;
    }
    .band-dark .band-inner {
      max-width:1100px;
      margin:0 auto;
      padding:0 20px;
    }
    .band-dark h2 {
      border-bottom:none;
      font-size:32px;
      margin-bottom:6px;
      padding-bottom:0;
      color:#f5f5f5;
    }
    .band-dark .kicker {
      color:#bbb;
    }
    .band-dark p,
    .band-dark li {
      color:#e0e0e0;
    }
    .band-dark .muted {
      color:#9a9a9a;
    }

    .anvil-slides {
      margin-top:32px;
      display:flex;
      gap:16px;
      overflow-x:scroll;
      overflow-y:hidden;
      scroll-snap-type:none;
      padding:24px 0 32px 0;
      -webkit-overflow-scrolling:touch;
      width:100vw;
      margin-left:calc(50% - 50vw); /* full-bleed, like Apple */
      scrollbar-width:none;         /* Firefox hide scrollbar */
      -ms-overflow-style:none;      /* IE/Edge hide scrollbar */
    }
    .anvil-slides::-webkit-scrollbar {
      display:none;                 /* Chrome/Safari hide scrollbar */
    }
        .anvil-dots {
      display:flex;
      justify-content:center;
      gap:8px;
      margin:18px 0 10px;
    }

    .anvil-dot {
      width:8px;
      height:8px;
      border-radius:999px;
      border:1px solid #fff;
      background:rgba(255,255,255,0.4);
      opacity:0.7;
      cursor:pointer;
      padding:0;
      outline:none;
      transition:background 0.2s ease, transform 0.2s ease, opacity 0.2s ease;
    }

    .anvil-dot.is-active {
      background:#fff;
      opacity:1;
      transform:scale(1.15);
    }

    .anvil-slide {
      flex:0 0 82%;
      max-width:460px;
      scroll-snap-align:start;
      background:radial-gradient(circle at top left, #222 0, #111 40%, #050505 100%);
      border-radius:var(--rad);
      padding:20px 18px 22px;
      border:1px solid rgba(255,255,255,0.08);
      box-shadow:0 20px 50px rgba(0,0,0,0.85);
      transition:
        transform 0.35s ease,
        box-shadow 0.35s ease,
        border-color 0.35s ease,
        background 0.35s ease;
    }
    .anvil-slide h3 {
      font-size:20px;
      margin-bottom:8px;
      color:#fdfdfd;
    }
    .anvil-slide p {
      font-size:15px;
      margin-bottom:8px;
    }
    .anvil-slide ul.list {
      margin-top:6px;
      padding-left:0;
      list-style:none;
    }
    .anvil-slide ul.list li::before {
      content:"•";
      display:inline-block;
      margin-right:6px;
      color:#cfcfcf;
    }
    .anvil-slide:hover {
      transform:translateY(-6px) scale(1.01);
      box-shadow:0 26px 70px rgba(0,0,0,0.95);
      border-color:rgba(255,255,255,0.32);
      background:radial-gradient(circle at top left, #303030 0, #141414 40%, #050505 100%);
    }

    .band-pill {
      display:inline-flex;
      align-items:center;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      margin-bottom:10px;
      color:#cfcfcf;
    }

    .band-dark small {
      color:#7a7a7a;
    }

    @media (min-width:900px){
      .anvil-slide { flex-basis:30%; }
    }
            /* IMPULSE ANVIL – ANATOMY SECTION */
    .anatomy-band {
      border-bottom:none;
      padding-top:80px;
      padding-bottom:80px;
    }

    .plugin-anatomy {
      display:grid;
      grid-template-columns:minmax(0, 1.1fr) minmax(0, 1fr);
      gap:32px;
      align-items:start;
      margin-top:32px;
    }

    .plugin-anatomy__image-wrap {
      position:sticky;
      top:120px;
      align-self:flex-start;
      overflow:visible;
    }

    .plugin-anatomy__image-inner {
      position:relative;
      border-radius:var(--rad);
      overflow:hidden;
      box-shadow:0 24px 70px rgba(0,0,0,0.9);
      background:#000;
      max-width:700px;
      margin:0 auto;
      aspect-ratio: 950 / 640;
      transition:transform 0.5s ease;
    }

    .plugin-anatomy__img {
      display:block;
      width:100%;
      height:100%;
      position:absolute;
      inset:0;
      object-fit:cover;
    }

    .plugin-anatomy__img--blur {
      filter:blur(2px) saturate(0.9);
      opacity:0.85;
    }

    .plugin-anatomy__img--focus {
      opacity:1;
      transition:clip-path 0.4s ease, opacity 0.4s ease;
      clip-path:inset(40% 40% 40% 40%);
    }

    .plugin-anatomy__focus-box {
      position:absolute;
      border:1px solid rgba(255,255,255,0.85);
      box-shadow:0 0 0 1px rgba(0,0,0,0.6);
      border-radius:10px;
      pointer-events:none;
      transition:all 0.4s ease;
    }

    .plugin-anatomy__focus-line {
      position:absolute;
      height:2px;
      background:rgba(255,255,255,0.9);
      transform-origin:left center;
      pointer-events:none;
      transition:all 0.4s ease;
    }

    .plugin-anatomy__steps {
      position:relative;
      margin-top:16px;
      transition:height 0.3s ease;
    }

    .plugin-anatomy__dots {
      display:flex;
      justify-content:center;
      gap:10px;
      margin:22px auto 8px;
    }
    .plugin-anatomy__dot {
      width:10px;
      height:10px;
      border-radius:999px;
      border:2px solid #fff;
      background:#fff;
      cursor:pointer;
      padding:0;
      outline:none;
      transition:background 0.2s, transform 0.2s, border-color 0.2s, opacity 0.2s;
      opacity:0.75;
    }
    .plugin-anatomy__dot.is-active {
      background:#000;
      border-color:#fff;
      opacity:1;
      transform:scale(1.15);
    }

        .anatomy-step {
      position:absolute;
      inset:0;
      padding:16px 18px;
      border-radius:14px;
      border:none;
      background:#050505;
      box-shadow:0 14px 40px rgba(0,0,0,0.7);
      opacity:0;
      transform:translateY(12px);
      transition:opacity 0.35s ease, transform 0.35s ease, box-shadow 0.35s ease;
      pointer-events:none;
    }


    .anatomy-step h3 {
      font-size:18px;
      margin-bottom:6px;
      color:#fdfdfd;
    }

    .anatomy-step p,
    .anatomy-step li {
      font-size:14px;
      color:#dedede;
    }

    .anatomy-step.is-active {
      opacity:1;
      transform:translateY(0);
      box-shadow:0 22px 55px rgba(0,0,0,0.95);
      pointer-events:auto;
    }

    .anatomy-step ul {
      list-style:none;
      margin-top:6px;
      padding-left:0;
    }
    .anatomy-step ul li::before {
      content:"•";
      display:inline-block;
      margin-right:6px;
      color:#cfcfcf;
    }

        @media (max-width:900px){
      .plugin-anatomy {
        grid-template-columns:1fr;
      }

      .plugin-anatomy__image-wrap {
        position:static;
        margin-bottom:16px;
      }

      
      /* Anatomy cards: let them size naturally on mobile */
      .plugin-anatomy__steps {
        position:relative;
        height:auto !important;
      }
            .anvil-slides {
        scroll-snap-type:x mandatory;
        -webkit-overflow-scrolling:touch;
      }

      .anvil-slide {
        scroll-snap-align:center;
      }

      .anatomy-step {
        position:relative;
        display:none;        /* hide non-active cards from layout */
      }
      .anatomy-step.is-active {
        display:block;       /* only the active one is visible & takes space */
      }
          /* Hide the dynamic stripe on mobile; keep only the highlight box */
      .plugin-anatomy__focus-line {
        display:none;
      }
    }



    /* FOOTER */
    footer {
      padding:24px 16px;
      text-align:center;
      font-size:14px;
      color:#555;
      flex-shrink:0;
    }
    footer a { color:inherit; text-decoration:none; border-bottom:1px solid transparent; }
    footer a:hover { border-bottom-color:#888; }

    /* MOBILE */
    @media (max-width:600px) {
      :root { --header-height:110px; }

      html { font-size:90%; }

      .logo-container { height:72px; }
      .logo-container img { height:56px; }

      nav { padding:8px 0; }
      nav ul { flex-wrap:wrap; gap:6px; }
      nav ul li { flex:1 1 33%; text-align:center; }
      nav ul li button,
      nav ul li a.nav-link {
        padding:6px 8px;
        font-size:13px;
      }
      .dropdown-content {
        width:auto; margin-top:8px; text-align:center;
      }

      #menuToggle { top:6px; font-size:20px; }

      .hero {
        grid-template-columns:1fr;
      }
      .hero h1 { font-size:32px; }

      .cols {
        grid-template-columns:1fr;
      }

      .anvil-slide {
        flex-basis:90%;
      }

      .grid {
        grid-template-columns:1fr;
      }
    }
  </style>

  <!-- Organization JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "FreQtik",
    "url": "https://freqtik.com",
    "logo": "https://freqtik.com/FreQtikBlackLogo.png",
    "email": "mailto:freqtiksup@gmail.com",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Wilhelm Leuschner Str. 93",
      "postalCode": "63263",
      "addressLocality": "Neu Isenburg",
      "addressCountry": "DE"
    },
    "sameAs": [
      "https://www.youtube.com/@FreQtik",
      "https://www.instagram.com/freqtik/",
      "https://open.spotify.com/artist/7sbdoA5VGDrbEjY3AngmgK"
    ]
  }
  </script>

    <!-- Product JSON-LD: Impulse Anvil -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "applicationCategory":"AudioApplication",
    "operatingSystem":"Windows 10/11 (64-bit)",
    "name":"Impulse Anvil",
    "description":"VST3 IR-morphing and design workstation with spectral/time morphing, curve shaping, Color/Fractal stages, and bake-to-IR export.",
    "offers":{
      "@type":"AggregateOffer",
      "lowPrice":"39",
      "highPrice":"79",
      "priceCurrency":"EUR"
    }
  }
  </script>

  <!-- Product JSON-LD: Impulse Forge -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "applicationCategory":"AudioApplication",
    "operatingSystem":"Windows 10/11 (64-bit)",
    "name":"Impulse Forge",
    "description":"Acoustic editor for building rooms, importing meshes, simulating acoustics and baking impulse responses.",
    "offers":{
      "@type":"Offer",
      "price":"89",
      "priceCurrency":"EUR"
    }
  }
  </script>

  <!-- Product JSON-LD: Impulse Smith (bundle) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "name":"Impulse Smith",
    "description":"Bundle of Impulse Anvil (VST3) and Impulse Forge (Acoustic Editor) for building, flying through and baking custom spaces.",
    "offers":{
      "@type":"AggregateOffer",
      "lowPrice":"99",
      "highPrice":"129",
      "priceCurrency":"EUR"
    }
  }
  </script>


</head>
<body>

  <button id="menuToggle" aria-label="Open menu" title="Open menu">☰</button>

  <div class="intro" id="intro" aria-hidden="true">
    <img src="FreQtikBlackLogo.png" alt="FreQtik Logo" />
    <p>create experiences & find solutions.</p>
  </div>

  <header id="mainHeader" role="banner">
    <div class="logo-container">
      <button class="logo-button" type="button" onclick="loadFeed('impulse'); closeDropdowns();">
        <img src="FreQtikBlackLogo.png" id="scrollLogo" alt="FreQtik Logo">
      </button>
    </div>
    <nav role="navigation" aria-label="Main">
      <ul>
        <!-- Audio Tools menu -->
        <li class="dropdown">
          <button onclick="toggleDropdown(this)" type="button" aria-haspopup="true" aria-expanded="false">Audio Tools</button>
          <div class="dropdown-content" role="menu" aria-label="Audio Tools">
            <a href="#" onclick="loadFeed('impulse');closeDropdowns();return false;">Impulse (All)</a>
            <a href="#" onclick="loadFeed('anvil');closeDropdowns();return false;">Impulse Anvil (VST3)</a>
            <a href="#" onclick="loadFeed('forge');closeDropdowns();return false;">Impulse Forge (Acoustic Editor)</a>
            <a href="#" onclick="loadFeed('smith');closeDropdowns();return false;">Impulse Smith (Bundle)</a>
          </div>
        </li>

        <li><button onclick="loadFeed('downloads')" type="button">Downloads</button></li>
        <li><button onclick="loadFeed('socials')" type="button">Connect</button></li>

        <!-- About & personal projects on the far right -->
        <li class="dropdown">
          <button onclick="toggleDropdown(this)" type="button" aria-haspopup="true" aria-expanded="false">About & Projects</button>
          <div class="dropdown-content" role="menu" aria-label="About & Projects">
            <a href="#" onclick="loadFeed('about');closeDropdowns();return false;">About FreQtik</a>

            <a href="#" onclick="loadFeed('ltb');closeDropdowns();return false;">Games · Learning to Bear</a>
            <a href="#" onclick="loadFeed('aim');closeDropdowns();return false;">Games · Aim Trainer Bee Pro</a>
            <a href="aimgame.html" onclick="closeDropdowns()">Games · UFO Clicker</a>

            <a href="#" onclick="loadFeed('youtube');closeDropdowns();return false;">Music · YouTube</a>
            <a href="#" onclick="loadFeed('spotify');closeDropdowns();return false;">Music · Spotify</a>
          </div>
        </li>
      </ul>
    </nav>
  </header>

  <div class="content-container" id="mainContent" role="main"></div>

  <footer role="contentinfo">
    <div>© <span id="yearSpan"></span> FreQtik. All rights reserved. ·
      <a href="#" onclick="loadFeed('impressum');return false;">Impressum / Legal Notice</a> ·
      <a href="/privacy.html">Privacy / Datenschutz</a> ·
      <a href="/terms.html">Terms / AGB</a>
    </div>
  </footer>

  <script>
    "use strict";

    /** steam app IDs (immutable) */
    const STEAM_IDS = Object.freeze({ ltb:2789890, aim:3666950 });
    const IMPULSE_SUITE_DOWNLOAD = 'https://github.com/FreQtik/impulse-smith-suite/releases/download/v1.0.0/ImpulseAnvil_Suite_Setup_1.0.0.exe';

    const introEl   = document.getElementById('intro');
    const headerEl  = document.getElementById('mainHeader');
    const toggleBtn = document.getElementById('menuToggle');
    const mainEl    = document.getElementById('mainContent');

    let lastY = window.scrollY;

    /* Dropdown helpers */
    function toggleDropdown(btn) {
      const li = btn.parentElement;
      if (!li) return;
      const isOpen = li.classList.toggle('dropdown-open');
      btn.setAttribute('aria-expanded', String(isOpen));
      document.querySelectorAll('nav .dropdown').forEach(d => {
        if (d !== li) {
          d.classList.remove('dropdown-open');
          const b = d.querySelector('button');
          if (b) b.setAttribute('aria-expanded', 'false');
        }
      });
    }
    function closeDropdowns() {
      document.querySelectorAll('nav .dropdown').forEach(d => {
        d.classList.remove('dropdown-open');
        const b = d.querySelector('button');
        if (b) b.setAttribute('aria-expanded', 'false');
      });
    }

    /* Close dropdowns when clicking anywhere outside nav dropdowns */
    document.addEventListener('click', (event) => {
      const target = event.target;
      // If click is not inside a nav dropdown, close all
      if (!target.closest('nav .dropdown')) {
        closeDropdowns();
      }
    });

    /* Tiny util */
    function escapeHtml(str){
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#39;");
    }

    /* Product building blocks (with image support) */
    function productHero(opts){
  return `
  <section id="${opts.id}">
    <div class="hero">
      <div>
        <span class="kicker">${opts.kicker}</span>
        <h1>${opts.title}</h1>
        <p class="tagline">${opts.tagline}</p>
        <div class="cta-row">
          <a class="btn primary"
             href="${opts.buyHref}"
             target="_blank"
             rel="noopener"
             aria-label="Buy ${opts.title}">
            Buy from €${opts.priceFrom}
          </a>
          <a class="btn"
             href="${opts.demoHref}"
             target="_blank"
             rel="noopener"
             aria-label="${opts.secondaryCtaLabel || ('Try ' + opts.title + ' demo')}">
            ${opts.secondaryCtaLabel || 'Try Demo'}
          </a>
          ${opts.docsHref ? `<a class="btn ghost" href="${opts.docsHref}" target="_blank" rel="noopener">Docs</a>` : ''}
        </div>
        <p class="note">${opts.req}</p>
      </div>
      <div class="hero-art">
        <div class="card">
          <img src="${opts.img}" alt="${opts.title} UI preview">
        </div>
      </div>
    </div>
  </section>`;
}


    function pricingGrid(title, plans){
      return `
      <section>
        <h2>${title}</h2>
        <div class="grid">
          ${plans.map(p=>`
            <div class="card ${p.popular?'popular':''}">
              <h3>${p.name}${p.badge?` <span class="badge">${p.badge}</span>`:''}</h3>
              <div class="price">€${p.price}</div>
              <div class="sub muted">${p.subtitle}</div>
              <div class="hr"></div>
              <ul class="list">
                ${p.points.map(pt=>`<li>${escapeHtml(pt)}</li>`).join('')}
              </ul>
              <div class="hr"></div>
              <div class="cta-row">
                <a class="btn primary" href="${p.buyHref}" target="_blank" rel="noopener">Buy</a>
                <a class="btn" href="${p.demoHref}" target="_blank" rel="noopener">Demo</a>
              </div>
              ${p.foot?`<div class="note">${p.foot}</div>`:''}
            </div>
          `).join('')}
        </div>
      </section>`;
    }

    function featureMatrix(title, cols, rows){
      return `
      <section>
        <h2>${title}</h2>
        <div class="card">
          <table class="matrix" aria-describedby="matrix-desc">
            <caption id="matrix-desc" class="tiny" style="caption-side:bottom;text-align:left;padding-top:8px;">Feature comparison across versions</caption>
            <thead>
              <tr>
                <th style="text-align:left">Feature</th>
                ${cols.map(c=>`<th>${escapeHtml(c)}</th>`).join('')}
              </tr>
            </thead>
            <tbody>
              ${rows.map(r=>`
                <tr>
                  <td style="text-align:left">${escapeHtml(r.name)}</td>
                  ${r.cells.map(c=>`<td>${c}</td>`).join('')}
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      </section>`;
    }

    function demoSection(items){
      return `
      <section>
        <h2>Demo & Licensing</h2>
        <div class="cols">
          <div class="card">
            <h3>Demo Limits</h3>
            <ul class="list">
              ${items.map(i=>`<li><strong>${escapeHtml(i.name)}:</strong> ${escapeHtml(i.detail)}</li>`).join('')}
            </ul>
          </div>
          <div class="card">
            <h3>License & Installer</h3>
            <ul class="list">
              <li>Perpetual license · 12 months of updates included</li>
              <li>3 activations per license (offline fallback available)</li>
              <li>Installer required for folder structure <span class="muted">(code-signing planned)</span></li>
              <li>Windows 10/11 (64-bit). Anvil: VST3 host · Forge: Acoustic Editor</li>
            </ul>
          </div>
        </div>
      </section>`;
    }

                /* Auto-scrolling slides (Anvil highlight band) */
    function initAutoSlides() {
      const sliders = mainEl.querySelectorAll('.anvil-slides');

      sliders.forEach(slidesEl => {
        if (!slidesEl || slidesEl.dataset.scrollInit === '1')
          return;

        slidesEl.dataset.scrollInit = '1';

        const isMobile = window.matchMedia('(max-width: 900px)').matches;
        const cards = Array.from(slidesEl.children);
        if (!cards.length) return;

        const dotsContainer = slidesEl.previousElementSibling;
        const dots = dotsContainer && dotsContainer.classList.contains('anvil-dots')
          ? Array.from(dotsContainer.querySelectorAll('.anvil-dot'))
          : [];

        let currentIdx = 0;           // which slide is "active"
        const state = {
          pos: slidesEl.scrollLeft || 0,
          speed: 0.25,
          auto: !isMobile,            // auto-scroll only on desktop
          animating: false
        };

        // Helper: mark active dot
        function setActiveDot(index) {
          dots.forEach(dot => {
            const idx = parseInt(dot.dataset.index, 10);
            dot.classList.toggle('is-active', idx === index);
          });
        }

        // Helper: smooth scroll to center a given card index
        function animateScrollToIndex(targetIdx) {
          const card = cards[targetIdx];
          if (!card) return;

          currentIdx = targetIdx;
          setActiveDot(currentIdx);

          const container = slidesEl;
          const containerRect = container.getBoundingClientRect();
          const cardRect = card.getBoundingClientRect();
          const startScroll = container.scrollLeft;
          const targetScroll = startScroll +
            (cardRect.left - containerRect.left) -
            (containerRect.width - cardRect.width) / 2;

          const duration = 400;
          const startTime = (window.performance && performance.now()) || Date.now();

          state.animating = true;

          function frame(now) {
            const t = Math.min(1, ((now || Date.now()) - startTime) / duration);
            const eased = t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2;
            container.scrollLeft = startScroll + (targetScroll - startScroll) * eased;

            if (t < 1) {
              requestAnimationFrame(frame);
            } else {
              state.animating = false;
              state.pos = container.scrollLeft; // auto-scroll resumes from here
            }
          }
          requestAnimationFrame(frame);
        }

        /* ------------------- MOBILE / TABLET ------------------- */
        if (isMobile) {
          // Native swipe + scroll-snap, no auto-scroll; support endless tap-through via cards/dots.
          cards.forEach((card, idx) => {
            card.addEventListener('click', () => {
              let targetIdx = idx;
              if (targetIdx === currentIdx) {
                // tapping same card again -> go to next in a loop
                targetIdx = (targetIdx + 1) % cards.length;
              }
              animateScrollToIndex(targetIdx);
            });
          });

          dots.forEach(dot => {
            dot.addEventListener('click', () => {
              const idx = parseInt(dot.dataset.index, 10);
              let targetIdx = idx;
              if (targetIdx === currentIdx) {
                targetIdx = (targetIdx + 1) % cards.length;
              }
              animateScrollToIndex(targetIdx);
            });
          });

          setActiveDot(0);
          return; // no JS auto-scroll on mobile
        }

        /* ------------------- DESKTOP ------------------- */

        // Click card: center it (first click), then loop to next if you keep clicking it
        cards.forEach((card, idx) => {
          card.addEventListener('click', () => {
            let targetIdx = idx;
            if (targetIdx === currentIdx) {
              targetIdx = (targetIdx + 1) % cards.length;
            }
            state.auto = false;
            animateScrollToIndex(targetIdx);
          });
        });

        // Click dot: same endless-loop behaviour
        dots.forEach(dot => {
          dot.addEventListener('click', () => {
            const idx = parseInt(dot.dataset.index, 10);
            let targetIdx = idx;
            if (targetIdx === currentIdx) {
              targetIdx = (targetIdx + 1) % cards.length;
            }
            state.auto = false;
            animateScrollToIndex(targetIdx);
          });
        });

        // Hover: pause auto-scroll; leaving: resume from *current* position
        slidesEl.addEventListener('mouseenter', () => {
          state.auto = false;
        });
        slidesEl.addEventListener('mouseleave', () => {
          state.auto = true;
        });

        // No wheel handler: do not hijack vertical scroll.

        function step() {
          if (!document.body.contains(slidesEl)) return;

          if (state.animating) {
            // Let the animation control scrollLeft; keep pos in sync
            state.pos = slidesEl.scrollLeft;
          } else if (state.auto) {
            // Gentle auto-scroll, starting from last position
            state.pos += state.speed;
            const maxScroll = slidesEl.scrollWidth - slidesEl.clientWidth;
            if (state.pos > maxScroll + 20) {
              state.pos = 0;
            }
            slidesEl.scrollLeft = state.pos;
          } else {
            // Auto paused: keep our pos in sync with manual movement
            state.pos = slidesEl.scrollLeft;
          }

          requestAnimationFrame(step);
        }

        // Initialize dots and start auto-scroll
        setActiveDot(0);
        requestAnimationFrame(step);
      });
    }




        /* IMPULSE ANVIL – ANATOMY HIGHLIGHTING */

    const anatomyFeatureMap = {
      global:  { top:0.03, left:0.02, width:0.36, height:0.30 },  // top-left: bypass, wet, normalize, levels
      ira:     { top:0.24, left:0.03, width:0.40, height:0.70 },  // left IR A panel
      irb:     { top:0.21, left:0.58, width:0.40, height:0.73 },  // right IR B panel
      morph:   { top:0.16, left:0.32, width:0.34, height:0.70 },  // central morph module
      fractal: { top:0.63, left:0.03, width:0.94, height:0.32 }   // bottom color/fractal rows
    };

    const anatomyLayoutMap = {
      global:{ shift:0 },
      ira:   { shift:-24 },
      irb:   { shift:24 },
      morph: { shift:0 },
      fractal:{ shift:0 }
    };

            function updateAnatomyHighlight(featureKey){
      const anatomy = mainEl.querySelector('.plugin-anatomy');
      if (!anatomy) return;

      const area = anatomyFeatureMap[featureKey];
      if (!area) return;

      const wrap     = anatomy.querySelector('.plugin-anatomy__image-wrap');
      const inner    = anatomy.querySelector('.plugin-anatomy__image-inner');
      const focusImg = anatomy.querySelector('.plugin-anatomy__img--focus');
      const box      = anatomy.querySelector('.plugin-anatomy__focus-box');
      const line     = anatomy.querySelector('.plugin-anatomy__focus-line');

      if (!wrap || !inner || !focusImg || !box || !line) return;

      const isMobile = window.matchMedia('(max-width: 900px)').matches;

      const layout = anatomyLayoutMap[featureKey] || { shift:0 };
      if (isMobile) {
        // Mobile: keep plugin centered, no side movement
        inner.style.transform = 'translateX(0px)';
      } else {
        // Desktop: gently shift plugin left/right per feature
        inner.style.transform = `translateX(${layout.shift}px)`;
      }

      const innerRect = inner.getBoundingClientRect();
      const wrapRect  = wrap.getBoundingClientRect();

      const x = innerRect.width  * area.left;
      const y = innerRect.height * area.top;
      const w = innerRect.width  * area.width;
      const h = innerRect.height * area.height;

      const topInset    = 100 * area.top;
      const rightInset  = 100 * (1 - area.left - area.width);
      const bottomInset = 100 * (1 - area.top  - area.height);
      const leftInset   = 100 * area.left;
      focusImg.style.clipPath = `inset(${topInset}% ${rightInset}% ${bottomInset}% ${leftInset}%)`;

      box.style.left   = `${x}px`;
      box.style.top    = `${y}px`;
      box.style.width  = `${w}px`;
      box.style.height = `${h}px`;

      let startX, startY, endX, endY;

      if (isMobile) {
        // MOBILE:
        // Use the real box position so the line always starts exactly at the highlighted area.
        const boxRect  = box.getBoundingClientRect();

        // Start at bottom-center of the highlight box (in wrap coordinates)
        startX = boxRect.left - wrapRect.left + boxRect.width / 2;
        startY = boxRect.bottom - wrapRect.top;

        // Short vertical pointer downwards toward the text
        endX   = startX;
        endY   = startY + 32; // adjust length if you want longer/shorter pointer
      } else {
        // DESKTOP:
        // Line from right edge of highlight into the text column
        startX = innerRect.left - wrapRect.left + x + w + 6;
        startY = innerRect.top  - wrapRect.top + y + h/2;
        endX   = wrapRect.width + 40; // 40px into the text column
        endY   = startY;
      }

      const dx = endX - startX;
      const dy = endY - startY;
      const length = Math.sqrt(dx*dx + dy*dy);
      const angle  = Math.atan2(dy, dx) * 180 / Math.PI;

      line.style.left  = `${startX}px`;
      line.style.top   = `${startY}px`;
      line.style.width = `${length}px`;
      line.style.transform = `rotate(${angle}deg)`;
    }



                    function initAnatomy(){
      const anatomy = mainEl.querySelector('.plugin-anatomy');
      if (!anatomy) return;

      const steps = Array.from(anatomy.querySelectorAll('.anatomy-step'));
      if (!steps.length) return;

      const bandRoot = anatomy.closest('.anatomy-band') || anatomy;
      const dots  = Array.from(bandRoot.querySelectorAll('.plugin-anatomy__dot'));
      const stepsContainer = anatomy.querySelector('.plugin-anatomy__steps');

      const featureOrder = ['global','ira','irb','morph','fractal'];
      let currentIndex = 0;

      const isMobile = window.matchMedia('(max-width: 900px)').matches;

      // Throttle for all step-like gestures (wheel, swipe, keys)
      const STEP_DELAY = 350; // ms
      let lastStepTime = 0;
      function canStep(){
        const now = (window.performance && performance.now) ? performance.now() : Date.now();
        if (now - lastStepTime < STEP_DELAY) return false;
        lastStepTime = now;
        return true;
      }

      // Clear any previous timer (if user switched sections)
      if (window.__anatomyTimer) {
        clearInterval(window.__anatomyTimer);
        window.__anatomyTimer = null;
      }

      function setActiveByIndex(idx) {
        if (idx < 0 || idx >= featureOrder.length) return;
        currentIndex = idx;
        const feature = featureOrder[currentIndex];

        let activeStep = null;
        steps.forEach(step => {
          const on = step.getAttribute('data-feature') === feature;
          step.classList.toggle('is-active', on);
          if (on) activeStep = step;
        });

        dots.forEach(dot => {
          const on = dot.getAttribute('data-target') === feature;
          dot.classList.toggle('is-active', on);
        });

        if (activeStep && stepsContainer) {
          // Desktop uses fixed-height container; on mobile height:auto !important
          stepsContainer.style.height = activeStep.offsetHeight + 'px';
          requestAnimationFrame(() => {
            stepsContainer.style.height = activeStep.offsetHeight + 'px';
          });
        }

        updateAnatomyHighlight(feature);
      }

      function restartTimer() {
        if (!isMobile) return; // auto-advance only on mobile
        if (window.__anatomyTimer) {
          clearInterval(window.__anatomyTimer);
        }
        window.__anatomyTimer = setInterval(() => {
          const nextIdx = (currentIndex + 1) % featureOrder.length;
          setActiveByIndex(nextIdx);
        }, 12000); // ~12 seconds per feature
      }

      // Dots: jump directly to a feature (no heavy throttle needed)
      dots.forEach(dot => {
        dot.addEventListener('click', () => {
          const feature = dot.getAttribute('data-target');
          const idx = featureOrder.indexOf(feature);
          if (idx !== -1) {
            setActiveByIndex(idx);
            restartTimer();
          }
        });
      });

      // Wheel inside the anatomy band: step through features on desktop
      const band = bandRoot;
      band.addEventListener('wheel', (ev) => {
        const delta = ev.deltaY || ev.detail || 0;
        if (!delta) return;

        const atFirst = currentIndex === 0;
        const atLast  = currentIndex === featureOrder.length - 1;

        if (delta > 0 && !atLast) {
          if (!canStep()) { ev.preventDefault(); return; }
          ev.preventDefault();
          setActiveByIndex(currentIndex + 1);
          restartTimer();
        } else if (delta < 0 && !atFirst) {
          if (!canStep()) { ev.preventDefault(); return; }
          ev.preventDefault();
          setActiveByIndex(currentIndex - 1);
          restartTimer();
        } else {
          // At edges: let normal page scroll continue
        }
      }, { passive:false });

      // Mobile swipe: swipe left/right to move features, throttled
      if (isMobile) {
        let touchStartX = null;
        let touchStartY = null;

        band.addEventListener('touchstart', (ev) => {
          const t = ev.touches[0];
          touchStartX = t.clientX;
          touchStartY = t.clientY;
        }, { passive:true });

        band.addEventListener('touchend', (ev) => {
          if (touchStartX == null || touchStartY == null) return;
          const t = ev.changedTouches[0];
          const dx = t.clientX - touchStartX;
          const dy = t.clientY - touchStartY;
          touchStartX = touchStartY = null;

          if (Math.abs(dx) > 40 && Math.abs(dx) > Math.abs(dy)) {
            if (!canStep()) return;

            if (dx < 0 && currentIndex < featureOrder.length - 1) {
              setActiveByIndex(currentIndex + 1);
            } else if (dx > 0 && currentIndex > 0) {
              setActiveByIndex(currentIndex - 1);
            }
            restartTimer();
          }
        }, { passive:true });
      }

      // Optional keyboard nav (also throttled)
      band.addEventListener('keydown', (ev) => {
        if (ev.key === 'ArrowDown') {
          if (currentIndex < featureOrder.length - 1 && canStep()) {
            ev.preventDefault();
            setActiveByIndex(currentIndex + 1);
            restartTimer();
          }
        } else if (ev.key === 'ArrowUp') {
          if (currentIndex > 0 && canStep()) {
            ev.preventDefault();
            setActiveByIndex(currentIndex - 1);
            restartTimer();
          }
        }
      });

      // Initialise: first card & first dot, plugin aligned
      setActiveByIndex(0);
      restartTimer();

      // Keep highlight & height aligned on resize
      window.addEventListener('resize', () => {
        const feature = featureOrder[currentIndex];
        setActiveByIndex(currentIndex);
        updateAnatomyHighlight(feature);
      }, { passive:true });
    }



    /* PAGE BUILDS */

    function buildImpulseAll(){
  const hero = productHero({
    id:'impulse',
    kicker:'Audio Toolkit · Windows only',
    title:'Impulse Smith Suite',
    tagline:'Design, morph and bake impulse responses — from field recording to IR file.',
    buyHref:'#TODO-buy-smith',
    demoHref:IMPULSE_SUITE_DOWNLOAD,
    docsHref:'#TODO-docs-smith',
    priceFrom: '149',
    req:'Includes Impulse Anvil (VST3 · Windows 10/11) & Impulse Forge (Acoustic Editor · Windows 10/11)',
    img:'impulse-forge-hero.png'
  });

  const tipsBand = `
  <section class="band-dark">
    <div class="band-inner">
      <div class="band-header">
        <span class="band-pill">Creative Tips</span>
        <h2>Use the world as your filter.</h2>
      </div>

      <div class="anvil-slides" aria-label="Impulse Smith tips and creative ideas">
        <article class="anvil-slide">
          <h3>Turn trash takes into gold</h3>
          <p>Ever had a noisy take with pops, clicks or someone bumping the mic? Don’t delete it – mine it.</p>
          <ul class="list">
            <li>Cut out a transient + tail from that “ruined” recording.</li>
            <li>Drop it into <strong>Impulse Anvil</strong> as an IR and morph it with a clean room or cab.</li>
            <li>Use the chaos of the noise to shape the sounds you actually love.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Record the world as filters</h3>
          <p>Birds, fabric rustling, plants, wind, ice, city noise – anything that moves air can become an impulse response.</p>
          <ul class="list">
            <li>Record with your phone, then fade the sound out so it dies naturally.</li>
            <li>Load it into Anvil, stretch or compress it and add Colour/Fractal for texture.</li>
            <li>Turn footsteps in frozen grass or wind in weeds into evolving reverbs and tonal shifts.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Bake your wildest FX chains</h3>
          <p>Have an insane effect chain that eats CPU, but you’re not ready to print it? Bake it into an IR.</p>
          <ul class="list">
            <li>Send a short burst of white/pink noise or a percussive hit through the chain at 100% wet.</li>
            <li>Capture the full tail, export that audio and drop it into Anvil.</li>
            <li>Now that whole chain is a portable IR you can morph, EQ and use anywhere – without the CPU bill.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Build · Fly · Bake · Morph</h3>
          <p>Use <strong>Impulse Forge</strong> to build the room, fly through it in real time, then bake its acoustics as IRs for Anvil.</p>
          <ul class="list">
            <li>Lay out geometry, assign acoustic materials and listen inside the space.</li>
            <li>Fire the one-click bake: Forge excites the room and records a high-quality WAV IR.</li>
            <li>Open that IR in Anvil, morph it with field recordings or other rooms and export new variants.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Out-of-the-Box series</h3>
          <p>Short, focused video recipes show exactly how to go from “random sound” to “usable IR pack”.</p>
          <ul class="list">
            <li>Trash-take to gold: pops, clicks and broken recordings as IRs.</li>
            <li>Recording the world as filters: ice, wind, traffic, water and more.</li>
            <li>Baking brutal FX chains into light, morphable IRs.</li>
          </ul>
          <p class="note">Watch the playlist on YouTube or right here on the page once the videos are live.</p>
        </article>
      </div>
    </div>
  </section>`;

  const videos = `
  <section>
    <h2>Out-of-the-box video recipes</h2>
    <p>Fast, caption-driven clips that show the whole pipeline – from recording a sound to designing an IR inside your DAW.</p>
    <div class="grid">
      <div class="card">
        <h3>Trash take → IR gold</h3>
        <p class="muted">See how a “ruined” take becomes a character IR that shapes a clean synth.</p>
        <div class="hr"></div>
        <div class="media-pane">
          <!-- TODO: replace VIDEO_ID_1 with your real YouTube ID -->
          <iframe class="responsive-iframe" src="https://www.youtube.com/embed/VIDEO_ID_1" loading="lazy" title="Trash take to IR gold" allowfullscreen></iframe>
        </div>
      </div>
      <div class="card">
        <h3>Recording the world as filters</h3>
        <p class="muted">Field record ice, wind, traffic – then morph those textures with rooms in Anvil.</p>
        <div class="hr"></div>
        <div class="media-pane">
          <!-- TODO: replace VIDEO_ID_2 with your real YouTube ID -->
          <iframe class="responsive-iframe" src="https://www.youtube.com/embed/VIDEO_ID_2" loading="lazy" title="Recording the world as filters" allowfullscreen></iframe>
        </div>
      </div>
      <div class="card">
        <h3>Bake your FX chains</h3>
        <p class="muted">Turn a huge FX chain into a single IR and free your CPU – then morph it anyway.</p>
        <div class="hr"></div>
        <div class="media-pane">
          <!-- TODO: replace VIDEO_ID_3 with your real YouTube ID -->
          <iframe class="responsive-iframe" src="https://www.youtube.com/embed/VIDEO_ID_3" loading="lazy" title="Baking FX chains into IRs" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </section>`;

        const pricing = pricingGrid('Bundle Pricing – Impulse Smith (windows only)', [
        {
          name:'Basic Bundle', badge:'Best value', price:99,
          subtitle:'Anvil Basic + Forge Full',
          points:[
            'Impulse Anvil Basic (VST3)',
            'Impulse Forge Full (standalone)',
            'Time Morph with full curve set in Anvil',
            'One-click bake in Forge',
            'Great for starting IR creators'
          ],
          buyHref:'#TODO-buy-smith-basic',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        },
        {
          name:'Pro Bundle', price:129, popular:true,
          subtitle:'Full creative workstation',
          points:[
            'Impulse Anvil Pro (VST3)',
            'Impulse Forge Full (standalone)',
            'Spectral + time morph, Color ×2, full Fractal depth',
            'Field recordings, rooms & FX chains baked and morphed',
            'Ideal for sound designers & sample creators'
          ],
          buyHref:'#TODO-buy-smith-pro',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        }
      ]);


        const matrix = featureMatrix('At a glance', ['Basic Bundle','Pro Bundle'], [
        { name:'Anvil tier',              cells:['Basic','Pro'] },
        { name:'Forge tier',              cells:['Full','Full'] },
        { name:'Morph modes (Anvil)',     cells:['Time','Time + Spectral'] },
        { name:'Curves (Anvil)',          cells:['Linear, Exp, Log, S, Power (+K)','Linear, Exp, Log, S, Power (+K)'] },
        { name:'Color / Fractal (Anvil)', cells:['1× Color per IR, no Fractal','2× Color per IR + full Fractal depth'] },
        { name:'Export / Bake',           cells:['Anvil bake + Forge one-click bake','Anvil bake + Forge one-click bake'] },
        { name:'Best for',                cells:['Producers exploring IR design','Heavy sound design, IR packs & libraries'] }
      ]);


  const demo = demoSection([
    { name:'Anvil', detail:'Perpetual demo with short periodic mute. Time Morph only, 1 Color stripe per IR, no Fractal, no export.' },
    { name:'Forge', detail:'Demo mode with live editor and on-engine capture; export/bake limits apply and files are tagged as demo.' }
  ]);

  const tiles = `
  <section>
    <h2>Included Apps</h2>
    <div class="grid">
      <div class="card">
        <h3>Impulse Anvil <span class="badge">VST3 · Windows</span></h3>
        <div class="media-pane" style="margin-bottom:10px;">
          <img src="impulse-anvil-header.png" alt="Impulse Anvil" onerror="this.closest('.media-pane').classList.add('media-hide')">
        </div>
        <p class="muted">IR morphing, colouring, Fractal depth and bake-to-WAV directly inside your DAW.</p>
        <div class="hr"></div>
        <ul class="list">
          <li>Dual A/B slots for IRs you already own.</li>
          <li>Time and spectral morph modes with curve shaping.</li>
          <li>Colour Stripes + Fractal depth for alive, evolving spaces.</li>
          <li>Bake your results as portable WAV IRs.</li>
        </ul>
        <div class="hr"></div>
        <div class="cta-row">
          <a class="btn" href="#" onclick="loadFeed('anvil');return false;">See Anvil</a>
        </div>
      </div>
      <div class="card">
        <h3>Impulse Forge <span class="badge">Acoustic Editor · Windows</span></h3>
        <div class="media-pane" style="margin-bottom:10px;">
          <img src="impulse-forge-hero.png" alt="Impulse Forge" onerror="this.closest('.media-pane').classList.add('media-hide')">
        </div>
        <p class="muted">Build rooms, fly through them, feed them from your DAW and bake their acoustics.</p>
        <div class="hr"></div>
        <ul class="list">
          <li>Geometry-based acoustic sandbox with snapping and grouping.</li>
          <li>Acoustic materials with absorption, transmission and scattering.</li>
          <li>.OBJ import from any 3D tool for custom spaces.</li>
          <li>Live input from Impulse Anvil via the VST3 bridge.</li>
          <li>One-click bake to high-quality WAV IRs.</li>
        </ul>
        <div class="hr"></div>
        <div class="cta-row">
          <a class="btn" href="#" onclick="loadFeed('forge');return false;">See Forge</a>
        </div>
      </div>
      <div class="card">
        <h3>Get the Suite</h3>
        <p class="muted">One workflow. Two tools. From raw audio and rooms to finished IRs.</p>
        <div class="hr"></div>
        <div class="cta-row">
          <a class="btn primary" href="#TODO-buy-smith" target="_blank" rel="noopener">Buy Impulse Smith</a>
          <a class="btn" href="IMPULSE_SUITE_DOWNLOAD" target="_blank" rel="noopener">Try Demo</a>
        </div>
      </div>
    </div>
  </section>`;

  const related = `
  <section>
    <h2>Continue exploring the Impulse family</h2>
    <div class="grid">
      <div class="card">
        <h3>Impulse Anvil</h3>
        <p class="muted">Part of the Impulse Smith Suite · VST3 IR forge inside your DAW.</p>
        <div class="hr"></div>
        <a class="btn" href="#" onclick="loadFeed('anvil');return false;">Go to Impulse Anvil</a>
      </div>
      <div class="card">
        <h3>Impulse Forge</h3>
        <p class="muted">Part of the Impulse Smith Suite · Standalone acoustic editor for building and baking spaces.</p>
        <div class="hr"></div>
        <a class="btn" href="#" onclick="loadFeed('forge');return false;">Go to Impulse Forge</a>
      </div>
    </div>
  </section>`;

  return hero + tipsBand + videos + pricing + matrix + tiles + demo + related;
}


        function buildAnvil(){
  const hero = productHero({
    id:'anvil',
    kicker:'VST3 Plugin · Windows',
    title:'Impulse Anvil',
    tagline:'Forge new impulse responses from the IRs, rooms and noise you already have – then use them everywhere.',
    buyHref:'#TODO-buy-anvil',
    demoHref:IMPULSE_SUITE_DOWNLOAD,
    docsHref:'#TODO-docs-anvil',
    priceFrom:'39',
    req:'Windows 10/11 · 64-bit · VST3 only',
    img:'impulse-anvil-header.png',
    secondaryCtaLabel:'Download'
  });


      const anvilIntro = `
      <section>
        <h2>What Impulse Anvil is</h2>
        <div class="cols">
          <div>
            <p><strong>Impulse Anvil</strong> is a dual-slot impulse response morphing &amp; baking plugin. It takes the IRs you already have – from other plugins, IR packs, your own captures, even AI-generated files – and lets you reshape, blend and re-forge them into new, portable WAV IRs.</p>
            <p>It’s not a “wiggle everything in real time” effect. Every move you make <strong>rebuilds the impulse response itself</strong> behind the scenes. You dial in the sound, bake it, and then use that IR in any other convolution reverb, cab sim or IR loader you own.</p>
            <p>Impulse Anvil started from a simple problem: <em>great instruments that felt dusty and over-used</em>. The solution was to create brand new spaces and resonances around them – spaces that hadn’t been heard before.</p>
          </div>
                    <div class="card">
            <h3>Impulse Responses, in short</h3>
            <p><strong>Impulse Responses are amazing.</strong> They’re like a “photo” of how a space or effect reacts to sound.</p>
            <p>Imagine you clap your hands in a room. You hear the first hit, then all the reflections and reverb as the sound dies away. If you record that clap and the whole decay very cleanly, you’ve basically captured the <strong>fingerprint of that room</strong>.</p>
            <p>Convolution reverb takes that fingerprint and <strong>stamps it onto any sound you want</strong>. Play a dry vocal through a cathedral IR and it feels like the singer is really in that cathedral. Do the same with a tiny bathroom IR and suddenly it sounds like they’re in a tiled box.</p>
            <p>But it doesn’t have to be “rooms”. If you record things like ice cracks, traffic, fabric rustling or wild FX chains and turn them into IRs, they become <strong>insanely complex filters and textures</strong> you can morph and reuse everywhere.</p>
            <p class="note">Impulse Anvil exists to make that whole process fun: record, build, bake, morph – and end up with IRs nobody else has.</p>
          </div>
        </div>
      </section>`;

            const anvilBand = `
      <section class="band-dark">
        <div class="band-inner">
          <div class="band-header">
            <span class="band-pill">Why producers reach for Impulse Anvil</span>
            <h2>Turn every IR collection into a forge.</h2>
          </div>

          <div class="anvil-dots" aria-hidden="true">
            <button class="anvil-dot" type="button" data-index="0"></button>
            <button class="anvil-dot" type="button" data-index="1"></button>
            <button class="anvil-dot" type="button" data-index="2"></button>
            <button class="anvil-dot" type="button" data-index="3"></button>
            <button class="anvil-dot" type="button" data-index="4"></button>
            <button class="anvil-dot" type="button" data-index="5"></button>
          </div>

          <div class="anvil-slides" aria-label="Impulse Anvil highlights">
            <article class="anvil-slide">
              <h3>Use any IRs you already own</h3>
              <p>Load IRs from other reverbs, cab sims, hardware captures, sample packs or AI tools. Impulse Anvil doesn’t care where they came from – it treats them as raw material.</p>
              <ul class="list">
                <li>Drop in WAV IRs from any plugin or library.</li>
                <li>Combine spaces, cabs and chains that were never meant to meet.</li>
                <li>Turn existing collections into a source of <strong>new</strong> IRs.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Forge, don’t automate</h3>
              <p>Impulse Anvil is a <strong>forge</strong>, not an automatable reverb. Every knob drag rebuilds the IR itself, so the result is precise, clean and portable.</p>
              <ul class="list">
                <li>Work deliberately, commit when it sounds right.</li>
                <li>No parameter-chasing in every project – just load the baked IR.</li>
                <li>Perfect for building reusable, recall-safe sounds.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Colour Stripes &amp; Fractal depth</h3>
              <p>Shape each source IR with independent Colour Stripes and optional Fractal stacking to build complex, living spaces.</p>
              <ul class="list">
                <li>Time, phase and gain control per stripe for precise shaping.</li>
                <li>Fractal mode re-applies that colouring in layers, adding density and richness.</li>
                <li>Turn simple rooms or cabs into hyper-detailed, characterful spaces.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Morph between A and B</h3>
              <p>Morph two IRs in time or in the spectral domain – or use hybrid modes to create spaces that feel almost synthesized.</p>
              <ul class="list">
                <li>Time or spectral morphing, with optional peak alignment.</li>
                <li>Multiple morph curves (Linear, Exp, Log, S, Power) with K control.</li>
                <li>From transparent blends to bold, broken spaces.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>IRs you can use anywhere</h3>
              <p>When you’ve forged something special, bake it out as a high-quality WAV IR and use it in any other impulse response tool you own.</p>
              <ul class="list">
                <li>Bake morphed, coloured and fractal-processed IRs to disk.</li>
                <li>Drop them into your favourite convolution reverb or cab sim.</li>
                <li>Build your own signature IR folders and packs.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>For creators who’ve heard it all</h3>
              <p>If your instruments and presets feel old, Impulse Anvil gives them new life by changing the space around them – not just the EQ or compressor on top.</p>
              <ul class="list">
                <li>Refresh dusty VST instruments with unheard spaces.</li>
                <li>Turn “boring” sounds into something exciting and inspiring.</li>
                <li>Perfect for artists chasing a <strong>truly personal</strong> sound.</li>
              </ul>
            </article>
          </div>
        </div>
      </section>`;


            const pricing = pricingGrid('Impulse Anvil – Versions', [
        {
          name:'Basic', price:39, subtitle:'Core morph & bake',
          points:[
            'Time Morph engine',
            'Morph curves + K shaping',
            '1 Color stripe per IR',
            'Per-IR gain & time stretch',
            'Bake morphed IRs to WAV'
          ],
          buyHref:'#TODO-buy-anvil-basic',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        },
        {
          name:'Pro', price:79, subtitle:'Full spectral & fractal toolkit', popular:true,
          points:[
            'Time + Spectral morph modes',
            'All curves with K control',
            '2 Color stripes per IR',
            'Fractal depth per slot',
            'Lerp bake & advanced export'
          ],
          buyHref:'#TODO-buy-anvil-pro',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        }
      ]);


            const matrix = featureMatrix('Feature comparison (Impulse Anvil)', ['Demo','Basic','Pro'], [
        { name:'Morph modes',        cells:['Time','Time','Time + Spectral'] },
        { name:'Morph curves & K',   cells:['Linear only','Linear, Exp, Log, S, Power (+K)','Linear, Exp, Log, S, Power (+K)'] },
        { name:'Live Morph',         cells:['✓','✓','✓'] },
        { name:'Color stripes per IR', cells:['×1','×1','×2'] },
        { name:'Fractal depth',      cells:['—','—','✓'] },
        { name:'Per-IR stretch & gain', cells:['✓','✓','✓'] },
        { name:'Bake / Export IR',   cells:['—','✓','✓ + Lerp bake'] },
        { name:'Spectral morph modes', cells:['—','—','✓'] },
        { name:'Demo mute / watermark', cells:['Periodic short mute','—','—'] }
      ]);


            const anatomy = `
      <section class="band-dark anatomy-band">
        <div class="band-inner">
          <div class="band-header">
  <span class="band-pill">Anatomy of Impulse Anvil</span>
  <h2>See exactly what each section does.</h2>
</div>


          <div class="plugin-anatomy__dots">
            <button type="button" class="plugin-anatomy__dot" data-target="global" aria-label="Global controls"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="ira" aria-label="IR A slot"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="irb" aria-label="IR B slot"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="morph" aria-label="Morph engine"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="fractal" aria-label="Fractal depth"></button>
          </div>

          <div class="plugin-anatomy">
            <div class="plugin-anatomy__image-wrap">
              <div class="plugin-anatomy__image-inner">
                <img src="Impulse-Anvil-UI.png" alt="Impulse Anvil user interface"
                     class="plugin-anatomy__img plugin-anatomy__img--blur">
                <img src="Impulse-Anvil-UI.png" alt="" aria-hidden="true"
                     class="plugin-anatomy__img plugin-anatomy__img--focus">
                <div class="plugin-anatomy__focus-box"></div>
              </div>
              <div class="plugin-anatomy__focus-line"></div>
            </div>

            <div class="plugin-anatomy__steps">
              <article class="anatomy-step" data-feature="global">
                <h3>Global control &amp; loudness</h3>
                <p>The top-left of Anvil gives you global control over the chain: bypass, wet-only listening, IR normalisation and the main input / wet level knobs.</p>
                <ul>
                  <li>Quickly check “wet only” to hear what the IR is really doing.</li>
                  <li>Normalize IRs when you just want a healthy level without thinking.</li>
                  <li>Use the Input &amp; Wet Level to hit the morph engine exactly as hard as you like.</li>
                </ul>
              </article>

              <article class="anatomy-step" data-feature="ira">
                <h3>IR A slot · Your main source</h3>
                <p>On the left side you load <strong>IR A</strong> – the main space, cab or chain you’re starting from.</p>
                <ul>
                  <li>Load any WAV IR from disk or from your preset banks.</li>
                  <li>Set IR A Gain in dB to match loudness by ear.</li>
                  <li>Use the Time A stretch to make that IR tighter or more cinematic before any morphing happens.</li>
                  <li>Shape A Colors to emphasise specific reflections or tonal regions.</li>
                </ul>
                <p>The result is a perfectly prepared “base reality” that everything else builds on.</p>
              </article>

              <article class="anatomy-step" data-feature="irb">
                <h3>IR B slot · The counterweight</h3>
                <p>On the right, <strong>IR B</strong> is the counterpart that pulls your sound into a new direction.</p>
                <ul>
                  <li>Load IRs from other plugins, packs, hardware or AI tools.</li>
                  <li>Match its level with IR B Gain so the morph feels natural.</li>
                  <li>Use Time B stretch to decide if B should feel tighter, longer or completely otherworldly.</li>
                  <li>B Colors let you pre-shape B so its character comes through exactly as much as you want.</li>
                </ul>
                <p>Think of B as the “what if?” version of your sound – waiting to be forged together with A.</p>
              </article>

              <article class="anatomy-step" data-feature="morph">
                <h3>Morph engine · Where A becomes B</h3>
                <p>The central Morph section is the heart of Impulse Anvil. Every move of the big knob rebuilds the IR between A and B.</p>
                <ul>
                  <li>Choose between Time Morph and Spectral Morph for temporal vs tonal focus.</li>
                  <li>Pick the Curve (Linear, Exp, Log, S, Power) and tune the K-parameter for how the transition behaves.</li>
                  <li>Align peaks when you want transparent blends that still feel punchy.</li>
                </ul>
                <p>Once it feels right, you bake it – and that exact fusion becomes a single IR you can load anywhere.</p>
              </article>

              <article class="anatomy-step" data-feature="fractal">
                <h3>Fractal / Recursive depth</h3>
                <p>At the bottom of the A and B sections you’ll find the Fractal depth controls. They tell Anvil how far to recursively re-apply its own IR structure.</p>
                <ul>
                  <li>Low values subtly increase density and smoothness, keeping things realistic.</li>
                  <li>Higher values create rich, layered tails that feel closer to a hybrid of convolution and algorithmic reverb.</li>
                  <li>Enable Fractal on both A and B and morph between two evolving, deeply textured spaces.</li>
                </ul>
                <p>It’s how you turn simple, flat IRs into living, modern spaces that still fit into a single WAV file.</p>
              </article>
            </div>
          </div>
        </div>
      </section>`;


            const demo = demoSection([
        {
          name:'Anvil',
          detail:'Perpetual demo with short periodic mute during playback. Time Morph only, 1 Color stripe per IR, no Fractal, no export.'
        }
      ]);


      const related = `
      <section>
        <h2>Part of the Impulse Smith bundle</h2>
        <div class="grid">
          <div class="card">
            <h3>Impulse Smith</h3>
            <p class="muted">Bundle including Impulse Anvil (VST3) and Impulse Forge (Acoustic Editor).</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('impulse');return false;">View Impulse Smith bundle</a>
          </div>
          <div class="card">
            <h3>Impulse Forge</h3>
            <p class="muted">Design the rooms and spaces that feed your Impulse Anvil IRs.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('forge');return false;">Go to Impulse Forge</a>
          </div>
        </div>
      </section>`;

      // order: hero / intro / first dark band / pricing / matrix / anatomy (dark) / demo / related
      return hero + anvilIntro + anvilBand + pricing + matrix + anatomy + demo + related;
    }



        function buildForge(){
      const hero = productHero({
        id:'forge',
        kicker:'Acoustic Editor · Windows',
        title:'Impulse Forge',
        tagline:'Build any room, fly through it, feed it from your DAW and bake its acoustics as impulse responses.',
        buyHref:'#TODO-buy-forge',
        demoHref:IMPULSE_SUITE_DOWNLOAD,
        docsHref:'#TODO-docs-forge',
        priceFrom:'89',
        req:'Standalone · Windows 10/11 · 64-bit',
        img:'impulse-forge-hero.png'
      });


  const forgeIntro = `
  <section>
    <h2>What Impulse Forge is</h2>
    <div class="cols">
      <div>
        <p><strong>Impulse Forge</strong> is a geometry-based acoustic sandbox for Windows. You build any room you can imagine, fly through it in first-person, feed it from your DAW and hear its acoustics react in real time.</p>
        <p>Create simple box rooms or intricate multi-room levels, edit them with precise snapping and grouping tools, then fire the one-click bake to capture the room as a high-quality WAV IR you can use in <strong>Impulse Anvil</strong> or any convolution reverb.</p>
        <p>You can also create complex meshes in any 3D package, export them as <strong>.obj</strong> and import them as runtime actors with full acoustic materials attached – perfect for architectural experiments, sound design spaces or game-style environments.</p>
      </div>
      <div class="card">
        <h3>Acoustic materials, for real</h3>
        <p>Every surface in Forge can have a dedicated acoustic material component with clearly exposed parameters:</p>
        <ul class="list">
          <li><strong>Absorption</strong> – Low / Mid / High bands</li>
          <li><strong>Transmission</strong> – Low / Mid / High bands</li>
          <li><strong>Scattering</strong> – how strongly the surface diffuses sound</li>
          <li>Material presets (Concrete, Brick, Glass, Wood, Curtain, Carpet, Metal) + fully Custom</li>
        </ul>
        <p class="note">Those values map directly into the underlying acoustic engine so what you see in the editor is what you hear in the simulation.</p>
      </div>
    </div>
  </section>`;

  const forgeBand = `
  <section class="band-dark">
    <div class="band-inner">
      <div class="band-header">
        <span class="band-pill">Build · Fly · Bake</span>
        <h2>From room shape to impulse response.</h2>
      </div>

      <div class="anvil-slides" aria-label="Impulse Forge highlights">
        <article class="anvil-slide">
          <h3>Geometry-based acoustic sandbox</h3>
          <p>Lay out walls, floors, ceilings and meshes directly in the editor. Snap, align and group like a level designer, but with acoustics as the main focus.</p>
          <ul class="list">
            <li>Precision grid and angle snapping.</li>
            <li>Selection, grouping and duplication for fast layout.</li>
            <li>Save/load complete acoustic levels as presets.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Import complex meshes via .OBJ</h3>
          <p>Already comfortable in Blender, Maya or Max? Model there, export as <strong>.obj</strong>, and let Forge create runtime actors with full collision and acoustic material support.</p>
          <ul class="list">
            <li>Runtime .OBJ import with triangulation and uniform scaling.</li>
            <li>Each imported mesh gets its own acoustic material component.</li>
            <li>Included in selection, grouping and acoustic export.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Walk the room, hear the room</h3>
          <p>A dedicated first-person character lets you fly or walk through your scene and listen as the space reacts around you.</p>
          <ul class="list">
            <li>Convolution preview wired to a submix for instant “room feel”.</li>
            <li>Physical acoustic simulation under the hood.</li>
            <li>Switch between exploring and editing with a single UI toggle.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Feed it from your DAW</h3>
          <p>Use the VST3 bridge via <strong>Impulse Anvil</strong> to send any track or bus into Forge in real time.</p>
          <ul class="list">
            <li>Play live instruments or stems into the room while you edit.</li>
            <li>Hear the mix react as you change geometry and materials.</li>
            <li>Perfect for designing spaces around specific sounds.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>High-resolution one-click bake</h3>
          <p>When a space feels right, trigger the bake: Forge fires an excitation signal through the room and records the response as a high-quality WAV IR.</p>
          <ul class="list">
            <li>One-click bake for fast “what if?” exploration.</li>
            <li>Float32 WAV IRs, ready for Anvil or any IR loader.</li>
            <li>Directly usable inside your DAW the moment it’s baked.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>From “I wonder how this sounds” to presets</h3>
          <p>Have you ever wondered how a very specific room shape might sound? With Forge you can build it, fly through it, and create your own presets in one workflow.</p>
          <ul class="list">
            <li>Experiment freely with shapes and materials.</li>
            <li>Save the ones you love as IRs and level presets.</li>
            <li>Use them in music, games, sound design and beyond.</li>
          </ul>
        </article>
      </div>
    </div>
  </section>`;

  const pricing = pricingGrid('Impulse Forge – Full License (Windows only)', [
        {
          name:'Forge Full', price:89,
          subtitle:'Build, fly, bake & feed from your DAW',
          points:[
            'Full 3D acoustic editor for Windows',
            'Live listening inside the room',
            'VST3 bridge input via Impulse Anvil',
            'One-click bake to high-quality WAV IRs',
            'Save/load levels and materials'
          ],
          buyHref:'#TODO-buy-forge-full',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        }
      ]);

  const matrix = featureMatrix('Feature overview', ['Forge Demo','Forge Full'], [
    { name:'Editor & navigation',   cells:['✓','✓'] },
    { name:'OBJ import',            cells:['✓','✓'] },
    { name:'Live convolution preview', cells:['✓','✓'] },
    { name:'VST3 bridge input (via Anvil)', cells:['✓ (time-limited)','✓'] },
    { name:'One-click bake to WAV IR', cells:['Limited / tagged demo','Full length, untagged'] },
    { name:'License',               cells:['Demo mode','Perpetual (2 seats)'] }
  ]);

  const demo = demoSection([
    { name:'Forge', detail:'Demo mode lets you explore the editor, listen live and run on-engine captures with export limits and demo tags applied to the files.' }
  ]);

  const faq = `
  <section>
    <h2>Workflow notes & FAQ</h2>
    <div class="grid">
      <div class="card">
        <h3>How does the DAW bridge work?</h3>
        <p>Impulse Anvil (VST3, Windows only) includes a bridge that routes audio into Forge.</p>
        <ul class="list">
          <li>Insert Anvil on a track or bus in your DAW.</li>
          <li>Enable the bridge so Anvil sends audio into Forge’s input.</li>
          <li>In Forge, listen as the room colours that live signal in real time.</li>
        </ul>
      </div>
      <div class="card">
        <h3>Why only one input?</h3>
        <p>Forge is designed around a single live input stream. To send multiple instruments at once:</p>
        <ul class="list">
          <li>Create a group bus in your DAW and route the instruments there.</li>
          <li>Put Anvil on that bus and enable the Forge bridge.</li>
          <li>Or put it on your master if you want to hear the whole mix inside the room.</li>
        </ul>
      </div>
      <div class="card">
        <h3>What does one-click bake actually do?</h3>
        <p>When you hit bake, Forge:</p>
        <ul class="list">
          <li>Fires an excitation signal through the current room.</li>
          <li>Records the response as a high-resolution impulse response.</li>
          <li>Writes a ready-to-use float32 WAV IR you can load in Anvil or any convolution reverb.</li>
        </ul>
      </div>
    </div>
  </section>`;

  const related = `
  <section>
    <h2>Part of the Impulse Smith ecosystem</h2>
    <div class="grid">
      <div class="card">
        <h3>Impulse Smith Suite</h3>
        <p class="muted">Impulse Forge is included in the Impulse Smith Suite alongside Impulse Anvil.</p>
        <div class="hr"></div>
        <a class="btn" href="#" onclick="loadFeed('impulse');return false;">View Impulse Smith Suite</a>
      </div>
      <div class="card">
        <h3>Impulse Anvil</h3>
        <p class="muted">Use your baked rooms, field recordings and FX chains as IRs and forge completely new spaces inside your DAW.</p>
        <div class="hr"></div>
        <a class="btn" href="#" onclick="loadFeed('anvil');return false;">Go to Impulse Anvil</a>
      </div>
    </div>
  </section>`;

  return hero + forgeIntro + forgeBand + pricing + matrix + demo + faq + related;
}


    /* Router */
    let currentFeed = null;
    function loadFeed(feed, options){
  const fromHash = options && options.fromHash === true;

  try {
        // Always close dropdowns when changing section
        closeDropdowns();

        let html = '';
        switch(feed){
          case 'impulse': html = buildImpulseAll(); break;
          case 'anvil': html = buildAnvil(); break;
          case 'forge': html = buildForge(); break;
          case 'smith': html = buildImpulseAll(); break; // alias to bundle page

          case 'about':
            html = `<section id="about"><h2>About FreQtik</h2><p>FreQtik is a one-person studio, building professional audio tools, software solutions and games.</p></section>`;
            break;

          case 'ltb': case 'aim': {
            const id = STEAM_IDS[feed];
            html = `<section id="${feed}" class="depth-effect">
              <h2>${feed==='ltb'?'Learning to Bear':'Aim Trainer Bee Pro'}</h2>
              <iframe class="responsive-iframe" src="https://store.steampowered.com/widget/${id}/" frameborder="0" loading="lazy" title="Steam widget ${id}"></iframe>
              <div id="steam-${feed}"><p>Loading details…</p></div>
            </section>`;
            setTimeout(()=>fetchSteam(feed,id),0);
            break;
          }

          case 'youtube':
            html = `<section id="youtube" class="depth-effect">
              <h2>YouTube Channel</h2>
              <div class="flex-container">
                <a href="https://www.youtube.com/@FreQtik" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png" alt="YouTube">Visit Channel
                </a>
              </div>
            </section>`;
            break;

          case 'spotify':
            html = `<section id="spotify" class="depth-effect">
              <h2>Spotify</h2>
              <iframe class="responsive-iframe" src="https://open.spotify.com/embed/artist/7sbdoA5VGDrbEjY3AngmgK" allow="encrypted-media" loading="lazy" title="Spotify embed"></iframe>
            </section>`;
            break;

                case 'downloads':
        html = `<section id="downloads" class="depth-effect">
          <h2>Downloads & Tools</h2>
          <p>Close your DAW, download the installer, run it, and you’re ready to forge IRs. Updating never touches your own IRs or projects.</p>
          <div class="grid" style="margin-top:14px">
            <div class="card">
              <h3>Impulse Anvil</h3>
              <p class="muted">Windows 10/11 · 64-bit · VST3 only</p>
              <p class="note">Single installer. Runs in Demo until you enter a Basic or Pro license.</p>
              <div class="hr"></div>
              <a class="btn" href="IMPULSE_SUITE_DOWNLOAD" target="_blank" rel="noopener">Download</a>
            </div>
            <div class="card">
              <h3>Impulse Forge Demo</h3>
              <p class="muted">Acoustic Editor · Windows 10/11 · 64-bit</p>
              <div class="hr"></div>
              <a class="btn" href="IMPULSE_SUITE_DOWNLOAD" target="_blank" rel="noopener">Download</a>
            </div>
            <div class="card">
              <h3>Impulse Smith (Suite) Demo</h3>
              <p class="muted">Includes both installers</p>
              <div class="hr"></div>
              <a class="btn" href="IMPULSE_SUITE_DOWNLOAD" target="_blank" rel="noopener">Download</a>
            </div>
          </div>
          <p class="note" style="margin-top:16px;">
            <strong>Windows SmartScreen</strong> may warn because the installer isn’t code-signed yet and will show “Unknown publisher”.
            The binary is built and hosted by FreQtik only. Once a code-signing certificate is in budget, future installers will be signed.
          </p>
          <p class="note">
            <strong>Licenses & seats.</strong> After purchase you receive a license key by email. Open Impulse Anvil or Impulse Forge, click the License button and paste the key – features unlock instantly. Each license gives you <strong>2 seats</strong>, so you can activate on two Windows machines you own.
          </p>
        </section>`;
        break;

          case 'socials':
            html = `<section id="socials" class="depth-effect">
              <h2>Connect</h2>
              <div class="flex-container">
                <a href="https://www.instagram.com/freqtik/" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">Instagram
                </a>
                <a href="https://open.spotify.com/artist/7sbdoA5VGDrbEjY3AngmgK" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="Spotify">Spotify
                </a>
                <a href="mailto:freqtiksup@gmail.com">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Mail_%28iOS%29.svg" alt="Email">Email
                </a>
              </div>
            </section>`;
            break;

          case 'impressum':
            html = `<section id="impressum" class="depth-effect">
              <h2>Impressum / Legal Notice</h2>

              <div lang="de">
                <p><strong>Angaben gemäß § 5 TMG</strong></p>
                <address>
                  <div><strong>FreQtik</strong></div>
                  <div>Maximilian Georg Walla</div>
                  <div>Wilhelm Leuschner Str. 93</div>
                  <div>63263 Neu Isenburg</div>
                  <div>Deutschland</div>
                </address>

                <p><strong>Kontakt</strong><br>
                  E-Mail: <a href="mailto:freqtiksup@gmail.com">freqtiksup@gmail.com</a>
                </p>

                <p><strong>Verantwortlich für den Inhalt nach § 18 Abs. 2 MStV</strong><br>
                  Maximilian Georg Walla, Wilhelm Leuschner Str. 93, 63263 Neu Isenburg, Deutschland
                </p>

                <h3>Haftungsausschluss, Links, Urheberrecht</h3>
                <p>Als Diensteanbieter sind wir gemäß § 7 Abs. 1 TMG für eigene Inhalte verantwortlich. Nach §§ 8–10 TMG sind wir nicht verpflichtet, fremde Informationen zu überwachen. Bei Kenntnis von Rechtsverletzungen entfernen wir Inhalte/Links umgehend. Inhalte unterliegen dem deutschen Urheberrecht.</p>

                <p><strong>EU-Streitschlichtung</strong><br>
                  Plattform der EU-Kommission: <a href="https://ec.europa.eu/consumers/odr" target="_blank" rel="noopener noreferrer">https://ec.europa.eu/consumers/odr</a>.
                </p>

                <p style="opacity:.7;margin-top:16px;">Stand: 2025-11-07</p>
              </div>

              <hr style="margin:24px 0;border:none;border-top:1px solid var(--line)">

              <div lang="en">
                <p><strong>Legal Notice (non-binding translation)</strong></p>
                <address>
                  <div><strong>FreQtik</strong></div>
                  <div>Maximilian Georg Walla</div>
                  <div>Wilhelm Leuschner Str. 93</div>
                  <div>63263 Neu Isenburg</div>
                  <div>Germany</div>
                </address>

                <p><strong>Contact</strong><br>
                  Email: <a href="mailto:freqtiksup@gmail.com">freqtiksup@gmail.com</a>
                </p>

                <h3>Disclaimer</h3>
                <p>The German version above governs. The English text is for convenience and does not change the legal meaning of the German “Impressum”.</p>

                <p style="opacity:.7">Last updated: 2025-11-07</p>
              </div>
            </section>`;
            break;

                  default:
          html = `<section><h2>Not found</h2><p>Sorry, that section doesn't exist.</p></section>`;
    }

    currentFeed = feed;

    mainEl.innerHTML = html;
    initAutoSlides(); // initialize auto-scrolling on any slides in this view
    initAnatomy();    // initialize plugin anatomy highlight if present
    mainEl.scrollIntoView({behavior:'smooth'});

    // Update URL hash when navigation comes from clicks, not from hashchange
    if (!fromHash) {
      const targetHash = '#' + feed;
      if (window.location.hash !== targetHash) {
        window.location.hash = targetHash;
      }
    }

  } catch (err) {
    console.error(err);
    mainEl.innerHTML = `<section><h2>Error</h2><p>Something went wrong loading this section.</p></section>`;
  }
}
    // Listen to back/forward and direct #links
window.addEventListener('hashchange', () => {
  const hash = window.location.hash || '';
  const feed = hash.startsWith('#') ? hash.substring(1) : '';

  if (!feed) {
    loadFeed('impulse', { fromHash: true });
    return;
  }

  if (feed === currentFeed)
    return;

  loadFeed(feed, { fromHash: true });
});


    /* Steam fetch helper */
    async function fetchSteam(feed, id){
      const targetId = `steam-${feed}`;
      const container = document.getElementById(targetId);
      if (!container) return;

      try{
        const url = encodeURIComponent(`https://store.steampowered.com/api/appdetails?appids=${id}&cc=US&l=en`);
        const res = await fetch(`https://api.allorigins.win/raw?url=${url}`, { method:'GET' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const json = await res.json();

        if (!json || !json[id] || !json[id].success) {
          throw new Error('Steam API returned no data.');
        }
        const info = json[id].data;
        const shots = Array.isArray(info?.screenshots)
          ? info.screenshots.map(
              s=>`<img src="${s.path_full}" style="max-width:100%;margin:10px 0;border-radius:4px;" alt="Screenshot">`
            ).join('')
          : '';

        container.innerHTML = `
          <p><strong>${escapeHtml(info?.name ?? 'Unknown')}</strong></p>
          <p>${escapeHtml(info?.short_description ?? '')}</p>
          ${shots}
          <p><a href="https://store.steampowered.com/app/${id}" target="_blank" rel="noopener noreferrer">View on Steam</a></p>
        `;
      }catch(e){
        container.innerHTML = `<p>Error loading Steam details. ${escapeHtml((e).message || '')}</p>`;
      }
    }

    /* menu toggle */
    toggleBtn.addEventListener('click', ()=>{
      headerEl.style.transform='translateY(0)';
      toggleBtn.style.display='none';
    });

    /* scroll behavior (header hide/show only; logo stays fixed) */
    window.addEventListener('scroll', ()=>{
      const y = window.scrollY;
      const hidden = (y>0);
      headerEl.style.transform = hidden ? 'translateY(-100%)' : 'translateY(0)';
      toggleBtn.style.display = hidden ? 'block' : 'none';

      // Close dropdowns when user scrolls
      closeDropdowns();
    });

    /* persist scroll */
    window.addEventListener('beforeunload', ()=> {
      try { sessionStorage.setItem('scrollPos', String(window.scrollY)); } catch {}
    });

    window.addEventListener('load', ()=>{
  const ySpan = document.getElementById('yearSpan');
  if (ySpan) ySpan.textContent = String(new Date().getFullYear());
  try {
    const pos = sessionStorage.getItem('scrollPos');
    if (pos) window.scrollTo(0, parseFloat(pos));
  } catch {}

  const hash = window.location.hash || '';
  const feedFromHash = hash && hash.startsWith('#') ? hash.substring(1) : '';

  if (feedFromHash) {
    loadFeed(feedFromHash, { fromHash: true });
  } else {
    loadFeed('impulse');
  }

  if (window.innerWidth < 600) introEl.classList.add('hidden');
});


    // dismiss intro on minimal mouse movement
    let moved=0,lx=null,ly=null,done=false;
    document.addEventListener('mousemove',e=>{
      if(done||window.innerWidth<600) return;
      if(lx!==null) moved+=Math.abs(e.clientX-lx)+Math.abs(e.clientY-ly);
      lx=e.clientX; ly=e.clientY;
      if(moved>300){ introEl.classList.add('hidden'); done=true; }
    });
  </script>
</body>
</html>






