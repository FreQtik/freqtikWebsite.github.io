<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FreQtik</title>
  <link rel="icon" type="image/png" href="QLogoPNGBlack_17x30.png">
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;600&display=swap" rel="stylesheet">
  <meta name="description" content="FreQtik — one-person studio, building professional audio tools, software solutions and games.">
  <style>
    :root {
      --bg: #fff;
      --text: #000;
      --muted: #666;
      --line: #e0e0e0;
      --shadow: rgba(0,0,0,0.08);
      --accent: #111;
      --accent2:#0b0b0b;
      --header-height: 200px;
      --rad: 14px;
    }
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Manrope',sans-serif; }
    html {
      background:var(--bg); color:var(--text);
      overflow-x:hidden; scroll-behavior:smooth;
      scroll-padding-top:var(--header-height);
    }
    body {
      overflow-x:hidden;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
     @media (min-width:901px){
      main > section:first-of-type {
        min-height: calc(100vh - 80px);
      }
    }
    /* INTRO */
    .intro {
      position:fixed; inset:0;
      background:var(--bg);
      display:flex; flex-direction:column;
      justify-content:center; align-items:center;
      z-index:9999;
      transition:opacity 1.5s,filter 1.5s;
    }
    .intro.hidden { opacity:0; filter:blur(8px); pointer-events:none; }
    .intro img { width:300px; max-width:90vw; }
    .intro p { margin-top:10px; font-size:18px; font-style:italic; opacity:0.5; }

    /* HEADER & TOGGLE */
    #menuToggle {
      position:fixed; top:10px; left:10px;
      z-index:200; background:none; border:none;
      font-size:24px; display:none; cursor:pointer;
    }
    header {
      position:fixed; top:0; left:0; right:0;
      background:var(--bg); z-index:100;
      box-shadow:0 4px 10px var(--shadow);
      transition:transform 0.3s;
      overflow:visible;
    }
    .logo-container {
      height:150px; border-bottom:1px solid var(--line);
      display:flex; justify-content:center; align-items:center;
    }
    .logo-button {
      background:none;
      border:none;
      padding:0;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .logo-container img {
      height:120px;
    }

    /* NAV */
    nav {
      display:flex; justify-content:center;
      padding:20px 0; border-bottom:1px solid var(--line);
      overflow:visible;
    }
    nav ul {
      display:flex; gap:40px; list-style:none; align-items:center;
    }
    nav ul li { position:relative; }
    nav ul li button, nav ul li a.nav-link {
      background:none; border:none; font-weight:600;
      font-size:16px; color:var(--text);
      padding:8px 16px; cursor:pointer;
      transition:transform 0.2s;
      text-decoration:none;
    }
    nav ul li button:hover,
    nav ul li a.nav-link:hover {
      transform:scale(1.05);
    }

    /* DROPDOWNS */
    .dropdown-content {
      display:none; position:absolute; top:100%; left:0;
      background:var(--bg); border:1px solid var(--line);
      padding:10px 15px; min-width:220px;
      box-shadow:0 4px 8px var(--shadow); z-index:999;
      white-space:nowrap;
    }
    nav ul li.dropdown:last-child .dropdown-content { left:auto; right:0; }

    .dropdown-open .dropdown-content { display:block; animation:fadeIn 0.3s; }

    .dropdown-content a {
      display:block; margin-bottom:12px;
      text-decoration:none; color:var(--text);
      font-size:16px;
      transition:transform 0.15s ease-out;
    }
    .dropdown-content a:last-child { margin-bottom:0; }
    .dropdown-content a:hover {
      transform:scale(1.03);
    }

    @keyframes fadeIn { from{opacity:0;transform:translateY(-5px);} to{opacity:1;transform:translateY(0);} }

    /* CONTENT */
    .content-container {
      padding-top:var(--header-height);
      flex:1 0 auto;
    }
    .responsive-iframe { display:block; width:100%; max-width:600px; height:300px; border:none; }
    section {
      padding:60px 20px; max-width:1100px; margin:auto;
      border-bottom:1px solid var(--line);
      opacity:0; transform:translateY(30px);
      animation:slideIn 0.6s ease forwards;
    }
    @keyframes slideIn { from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);} }
    section h2 { margin-bottom:20px; font-size:32px; border-bottom:1px solid var(--line); padding-bottom:5px; }
    section p, section ul { font-size:16px; line-height:1.65; color:var(--text); }
    section small { color:var(--muted); }
    section ul { list-style:inside; }
    .flex-container {
      display:flex; gap:20px; flex-wrap:wrap; justify-content:center; margin-top:20px;
    }
    .flex-container a {
      display:flex; align-items:center; gap:8px; text-decoration:none; font-size:16px; color:var(--text);
      padding:6px 12px; border-bottom:1px solid transparent; transition:border-color 0.3s;
    }
    .flex-container a:hover { border-bottom:1px solid var(--text); }
    .social-icon { width:20px; height:20px; }

    /* PRODUCT UI */
    .hero {
      display:grid; gap:32px; align-items:center;
      grid-template-columns: minmax(0,2fr) minmax(0,1.4fr);
    }
    .hero-art .card img {
      display:block;
      width:100%;
      height:auto;
      object-fit:contain;
    }
    .hero h1 { font-size:40px; line-height:1.1; }
    .tagline { color:var(--muted); font-weight:600; }
    .cta-row { display:flex; gap:12px; flex-wrap:wrap; margin-top:14px; }
    .btn {
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 16px; border-radius:var(--rad);
      border:1px solid var(--text); background:#fff; color:#000; text-decoration:none; font-weight:600;
      transition:transform .15s, box-shadow .2s, background .2s, color .2s;
      box-shadow:0 2px 6px var(--shadow);
    }
    .btn:hover { transform:translateY(-1px); }
    .btn.primary { background:var(--text); color:#fff; border-color:var(--text); }
    .btn.ghost { border-style:dashed; }
    .grid {
      display:grid; gap:18px; grid-template-columns: repeat(3,1fr);
    }
    .card {
      border:1px solid var(--line); border-radius:var(--rad); padding:18px;
      box-shadow:0 4px 12px var(--shadow);
      background:#fff;
    }
    .card h3 { font-size:20px; margin-bottom:8px; }
    .price { font-weight:800; font-size:26px; margin:8px 0 2px; }
    .sub { color:var(--muted); font-size:13px; }
    .badge { display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--line); margin-left:8px; color:#333; }
    .popular { border-color:#111; box-shadow:0 8px 20px var(--shadow); position:relative; }
    .popular::after{
      content:"Most popular"; position:absolute; top:10px; right:10px; font-size:11px;
      padding:4px 8px; border:1px solid var(--line); border-radius:999px; background:#fff;
    }
    .matrix { width:100%; border-collapse:collapse; margin-top:8px; }
    .matrix th, .matrix td { border:1px solid var(--line); padding:10px; font-size:14px; text-align:center; }
    .matrix th { background:#fafafa; }
    .muted { color:var(--muted); }
    .kicker { text-transform:uppercase; letter-spacing:.12em; font-weight:800; font-size:12px; color:#333; }
    .note { font-size:13px; color:var(--muted); margin-top:8px; }
    .cols { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
    .list { margin-top:8px; }
    .list li { margin:6px 0; }
    .hr { height:1px; background:var(--line); margin:18px 0; }
    .tiny { font-size:12px; color:var(--muted); }

    /* MEDIA PANE (product images) */
    .media-pane { border:1px solid var(--line); border-radius:var(--rad); overflow:hidden; box-shadow:0 4px 12px var(--shadow); background:#000; display:flex; align-items:center; justify-content:center; aspect-ratio: 16/10; }
    .media-pane img { width:100%; height:100%; object-fit:cover; display:block; filter:saturate(0.95) contrast(1.02); }
    .media-hide { display:none; }

    /* APPLE-LIKE DARK BAND (used for Anvil & Smith tips & Forge) */
    .band-dark {
      padding:80px 0;
      max-width:100%;
      margin:0;
      background:#000;
      color:#f5f5f5;
      border-bottom:none;
    }
    .band-dark .band-inner {
      max-width:1100px;
      margin:0 auto;
      padding:0 20px;
    }
    .band-dark h2 {
      border-bottom:none;
      font-size:32px;
      margin-bottom:6px;
      padding-bottom:0;
      color:#f5f5f5;
    }
    .band-dark .kicker {
      color:#bbb;
    }
    .band-dark p,
    .band-dark li {
      color:#e0e0e0;
    }
    .band-dark .muted {
      color:#9a9a9a;
    }

    .anvil-slides {
      margin-top:32px;
      display:flex;
      gap:16px;
      overflow-x:scroll;
      overflow-y:hidden;
      scroll-snap-type:none;
      padding:24px 0 32px 0;
      -webkit-overflow-scrolling:touch;
      width:100vw;
      margin-left:calc(50% - 50vw); /* full-bleed, like Apple */
      scrollbar-width:none;         /* Firefox hide scrollbar */
      -ms-overflow-style:none;      /* IE/Edge hide scrollbar */
    }
    .anvil-slides::-webkit-scrollbar {
      display:none;                 /* Chrome/Safari hide scrollbar */
    }
        .anvil-dots {
      display:flex;
      justify-content:center;
      gap:8px;
      margin:18px 0 10px;
    }

    .anvil-dot {
      width:8px;
      height:8px;
      border-radius:999px;
      border:1px solid #fff;
      background:rgba(255,255,255,0.4);
      opacity:0.7;
      cursor:pointer;
      padding:0;
      outline:none;
      transition:background 0.2s ease, transform 0.2s ease, opacity 0.2s ease;
    }

    .anvil-dot.is-active {
      background:#fff;
      opacity:1;
      transform:scale(1.15);
    }

    .anvil-slide {
      flex:0 0 82%;
      max-width:460px;
      scroll-snap-align:start;
      background:radial-gradient(circle at top left, #222 0, #111 40%, #050505 100%);
      border-radius:var(--rad);
      padding:20px 18px 22px;
      border:1px solid rgba(255,255,255,0.08);
      box-shadow:0 20px 50px rgba(0,0,0,0.85);
      transition:
        transform 0.35s ease,
        box-shadow 0.35s ease,
        border-color 0.35s ease,
        background 0.35s ease;
    }
    .anvil-slide h3 {
      font-size:20px;
      margin-bottom:8px;
      color:#fdfdfd;
    }
    .anvil-slide p {
      font-size:15px;
      margin-bottom:8px;
    }
    .anvil-slide ul.list {
      margin-top:6px;
      padding-left:0;
      list-style:none;
    }
    .anvil-slide ul.list li::before {
      content:"•";
      display:inline-block;
      margin-right:6px;
      color:#cfcfcf;
    }
    .anvil-slide:hover {
      transform:translateY(-6px) scale(1.01);
      box-shadow:0 26px 70px rgba(0,0,0,0.95);
      border-color:rgba(255,255,255,0.32);
      background:radial-gradient(circle at top left, #303030 0, #141414 40%, #050505 100%);
    }

    .band-pill {
      display:inline-flex;
      align-items:center;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      margin-bottom:10px;
      color:#cfcfcf;
    }

    .band-dark small {
      color:#7a7a7a;
    }

    @media (min-width:900px){
      .anvil-slide { flex-basis:30%; }
    }
            /* IMPULSE ANVIL – ANATOMY SECTION */
    .anatomy-band {
      border-bottom:none;
      padding-top:80px;
      padding-bottom:80px;
    }

    .plugin-anatomy {
      display:grid;
      grid-template-columns:minmax(0, 1.1fr) minmax(0, 1fr);
      gap:32px;
      align-items:start;
      margin-top:32px;
    }

    .plugin-anatomy__image-wrap {
      position:sticky;
      top:120px;
      align-self:flex-start;
      overflow:visible;
    }

    .plugin-anatomy__image-inner {
      position:relative;
      border-radius:var(--rad);
      overflow:hidden;
      box-shadow:0 24px 70px rgba(0,0,0,0.9);
      background:#000;
      max-width:700px;
      margin:0 auto;
      aspect-ratio: 950 / 640;
      transition:transform 0.5s ease;
    }

    .plugin-anatomy__img {
      display:block;
      width:100%;
      height:100%;
      position:absolute;
      inset:0;
      object-fit:cover;
    }

    .plugin-anatomy__img--blur {
      filter:blur(2px) saturate(0.9);
      opacity:0.85;
    }

    .plugin-anatomy__img--focus {
      opacity:1;
      transition:clip-path 0.4s ease, opacity 0.4s ease;
      clip-path:inset(40% 40% 40% 40%);
    }

    .plugin-anatomy__focus-box {
      position:absolute;
      border:1px solid rgba(255,255,255,0.85);
      box-shadow:0 0 0 1px rgba(0,0,0,0.6);
      border-radius:10px;
      pointer-events:none;
      transition:all 0.4s ease;
    }

    .plugin-anatomy__focus-line {
      position:absolute;
      height:2px;
      background:rgba(255,255,255,0.9);
      transform-origin:left center;
      pointer-events:none;
      transition:all 0.4s ease;
    }

    .plugin-anatomy__steps {
      position:relative;
      margin-top:16px;
      transition:height 0.3s ease;
    }

    .plugin-anatomy__dots {
      display:flex;
      justify-content:center;
      gap:10px;
      margin:22px auto 8px;
    }
    .plugin-anatomy__dot {
      width:10px;
      height:10px;
      border-radius:999px;
      border:2px solid #fff;
      background:#fff;
      cursor:pointer;
      padding:0;
      outline:none;
      transition:background 0.2s, transform 0.2s, border-color 0.2s, opacity 0.2s;
      opacity:0.75;
    }
    .plugin-anatomy__dot.is-active {
      background:#000;
      border-color:#fff;
      opacity:1;
      transform:scale(1.15);
    }

        .anatomy-step {
      position:absolute;
      inset:0;
      padding:16px 18px;
      border-radius:14px;
      border:none;
      background:#050505;
      box-shadow:0 14px 40px rgba(0,0,0,0.7);
      opacity:0;
      transform:translateY(12px);
      transition:opacity 0.35s ease, transform 0.35s ease, box-shadow 0.35s ease;
      pointer-events:none;
    }


    .anatomy-step h3 {
      font-size:18px;
      margin-bottom:6px;
      color:#fdfdfd;
    }

    .anatomy-step p,
    .anatomy-step li {
      font-size:14px;
      color:#dedede;
    }

    .anatomy-step.is-active {
      opacity:1;
      transform:translateY(0);
      box-shadow:0 22px 55px rgba(0,0,0,0.95);
      pointer-events:auto;
    }

    .anatomy-step ul {
      list-style:none;
      margin-top:6px;
      padding-left:0;
    }
    .anatomy-step ul li::before {
      content:"•";
      display:inline-block;
      margin-right:6px;
      color:#cfcfcf;
    }

        @media (max-width:900px){
      .plugin-anatomy {
        grid-template-columns:1fr;
      }

      .plugin-anatomy__image-wrap {
        position:static;
        margin-bottom:16px;
      }

      
      /* Anatomy cards: let them size naturally on mobile */
      .plugin-anatomy__steps {
        position:relative;
        height:auto !important;
      }
            .anvil-slides {
        scroll-snap-type:x mandatory;
        -webkit-overflow-scrolling:touch;
      }

      .anvil-slide {
        scroll-snap-align:center;
      }

      .anatomy-step {
        position:relative;
        display:none;        /* hide non-active cards from layout */
      }
      .anatomy-step.is-active {
        display:block;       /* only the active one is visible & takes space */
      }
          /* Hide the dynamic stripe on mobile; keep only the highlight box */
      .plugin-anatomy__focus-line {
        display:none;
      }
    }



    /* FOOTER */
    footer {
      padding:24px 16px;
      text-align:center;
      font-size:14px;
      color:#555;
      flex-shrink:0;
    }
    footer a { color:inherit; text-decoration:none; border-bottom:1px solid transparent; }
    footer a:hover { border-bottom-color:#888; }

    /* MOBILE */
    @media (max-width:600px) {
      :root { --header-height:110px; }

      html { font-size:90%; }

      .logo-container { height:72px; }
      .logo-container img { height:56px; }

      nav { padding:8px 0; }
      nav ul { flex-wrap:wrap; gap:6px; }
      nav ul li { flex:1 1 33%; text-align:center; }
      nav ul li button,
      nav ul li a.nav-link {
        padding:6px 8px;
        font-size:13px;
      }
      .dropdown-content {
        width:auto; margin-top:8px; text-align:center;
      }

      #menuToggle { top:6px; font-size:20px; }

      .hero {
        grid-template-columns:1fr;
      }
      .hero h1 { font-size:32px; }

      .cols {
        grid-template-columns:1fr;
      }

      .anvil-slide {
        flex-basis:90%;
      }

      .grid {
        grid-template-columns:1fr;
      }
    }
  </style>

  <!-- Organization JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "FreQtik",
    "url": "https://freqtik.com",
    "logo": "https://freqtik.com/FreQtikBlackLogo.png",
    "email": "mailto:freqtiksup@gmail.com",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Wilhelm Leuschner Str. 93",
      "postalCode": "63263",
      "addressLocality": "Neu Isenburg",
      "addressCountry": "DE"
    },
    "sameAs": [
      "https://www.youtube.com/@FreQtik",
      "https://www.instagram.com/freqtik/",
      "https://open.spotify.com/artist/7sbdoA5VGDrbEjY3AngmgK"
    ]
  }
  </script>

    <!-- Product JSON-LD: Impulse Anvil -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "applicationCategory":"AudioApplication",
    "operatingSystem":"Windows 10/11 (64-bit)",
    "name":"Impulse Anvil",
    "description":"VST3 IR-morphing and design workstation with spectral/time morphing, Color/Fractal stages, and bake-to-IR export."
    "offers":{
      "@type":"AggregateOffer",
      "lowPrice":"39",
      "highPrice":"79",
      "priceCurrency":"EUR"
    }
  }
  </script>

  <!-- Product JSON-LD: Impulse Forge -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "applicationCategory":"AudioApplication",
    "operatingSystem":"Windows 10/11 (64-bit)",
    "name":"Impulse Forge",
    "description":"Acoustic editor for building rooms, importing meshes, simulating acoustics and baking impulse responses.",
    "offers":{
      "@type":"Offer",
      "price":"89",
      "priceCurrency":"EUR"
    }
  }
  </script>

  


</head>
<body>

  <button id="menuToggle" aria-label="Open menu" title="Open menu">☰</button>

  <div class="intro" id="intro" aria-hidden="true">
    <img src="FreQtikBlackLogo.png" alt="FreQtik Logo" />
    <p>create experiences & find solutions.</p>
  </div>

  <header id="mainHeader" role="banner">
    <div class="logo-container">
      <button class="logo-button" type="button" onclick="loadFeed('impulse'); closeDropdowns();">
        <img src="FreQtikBlackLogo.png" id="scrollLogo" alt="FreQtik Logo">
      </button>
    </div>
    <nav role="navigation" aria-label="Main">
  <ul>
    <!-- Audio Tools menu -->
    <li class="dropdown">
      <button onclick="toggleDropdown(this)" type="button" aria-haspopup="true" aria-expanded="false">Audio Tools</button>
      <div class="dropdown-content" role="menu" aria-label="Audio Tools">
        <a href="#" onclick="loadFeed('impulse');closeDropdowns();return false;">Impulse (All)</a>
        <a href="#" onclick="loadFeed('anvil');closeDropdowns();return false;">Impulse Anvil (VST3)</a>
        <a href="#" onclick="loadFeed('forge');closeDropdowns();return false;">Impulse Forge (Acoustic Editor)</a>
        <a href="#" onclick="loadFeed('smith');closeDropdowns();return false;">Impulse Smith Suite (Installer)</a>
      </div>
    </li>

    <li><button onclick="loadFeed('downloads')" type="button">Downloads</button></li>
    <li><button onclick="loadFeed('docs')" type="button">Docs &amp; FAQ</button></li>
    <li><button onclick="loadFeed('socials')" type="button">Connect</button></li>

    <!-- About & personal projects on the far right -->
    <li class="dropdown">
      <button onclick="toggleDropdown(this)" type="button" aria-haspopup="true" aria-expanded="false">About & Projects</button>
      <div class="dropdown-content" role="menu" aria-label="About & Projects">
        <a href="#" onclick="loadFeed('about');closeDropdowns();return false;">About FreQtik</a>

        <a href="#" onclick="loadFeed('ltb');closeDropdowns();return false;">Games · Learning to Bear</a>
        <a href="#" onclick="loadFeed('aim');closeDropdowns();return false;">Games · Aim Trainer Bee Pro</a>
        <a href="aimgame.html" onclick="closeDropdowns()">Games · UFO Clicker</a>

        <a href="#" onclick="loadFeed('youtube');closeDropdowns();return false;">Music · YouTube</a>
        <a href="#" onclick="loadFeed('spotify');closeDropdowns();return false;">Music · Spotify</a>
      </div>
    </li>
  </ul>
</nav>

  </header>

  <div class="content-container" id="mainContent" role="main"></div>

  <footer role="contentinfo">
    <div>© <span id="yearSpan"></span> FreQtik. All rights reserved. ·
      <a href="#" onclick="loadFeed('impressum');return false;">Impressum / Legal Notice</a> ·
      <a href="/privacy.html">Privacy / Datenschutz</a> ·
      <a href="/terms.html">Terms / AGB</a>
    </div>
  </footer>

  <script>
    "use strict";

    /** steam app IDs (immutable) */
    const STEAM_IDS = Object.freeze({ ltb:2789890, aim:3666950 });
    const IMPULSE_SUITE_DOWNLOAD = 'https://github.com/FreQtik/impulse-smith-suite/releases/download/v1.0.0/ImpulseAnvil_Suite_Setup_1.0.0.exe';

    const introEl   = document.getElementById('intro');
    const headerEl  = document.getElementById('mainHeader');
    const toggleBtn = document.getElementById('menuToggle');
    const mainEl    = document.getElementById('mainContent');

    let lastY = window.scrollY;

    /* Dropdown helpers */
    function toggleDropdown(btn) {
      const li = btn.parentElement;
      if (!li) return;
      const isOpen = li.classList.toggle('dropdown-open');
      btn.setAttribute('aria-expanded', String(isOpen));
      document.querySelectorAll('nav .dropdown').forEach(d => {
        if (d !== li) {
          d.classList.remove('dropdown-open');
          const b = d.querySelector('button');
          if (b) b.setAttribute('aria-expanded', 'false');
        }
      });
    }
    function closeDropdowns() {
      document.querySelectorAll('nav .dropdown').forEach(d => {
        d.classList.remove('dropdown-open');
        const b = d.querySelector('button');
        if (b) b.setAttribute('aria-expanded', 'false');
      });
    }

    /* Close dropdowns when clicking anywhere outside nav dropdowns */
    document.addEventListener('click', (event) => {
      const target = event.target;
      // If click is not inside a nav dropdown, close all
      if (!target.closest('nav .dropdown')) {
        closeDropdowns();
      }
    });

    /* Tiny util */
    function escapeHtml(str){
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#39;");
    }

    /* Product building blocks (with image support) */
    function productHero(opts){
  return `
  <section id="${opts.id}">
    <div class="hero">
      <div>
        <span class="kicker">${opts.kicker}</span>
        <h1>${opts.title}</h1>
        <p class="tagline">${opts.tagline}</p>
                <div class="cta-row">
          ${opts.buyHref && opts.priceFrom ? `
          <a class="btn primary"
             href="${opts.buyHref}"
             target="_blank"
             rel="noopener"
             aria-label="Buy ${opts.title}">
            Buy from €${opts.priceFrom}
          </a>` : ''}
          <a class="btn"
             href="${opts.demoHref}"
             target="_blank"
             rel="noopener"
             aria-label="${opts.secondaryCtaLabel || ('Try ' + opts.title + ' demo')}">
            ${opts.secondaryCtaLabel || 'Try Demo'}
          </a>
          ${opts.docsHref ? `<a class="btn ghost" href="${opts.docsHref}" onclick="loadFeed('docs');">Docs</a>` : ''}
        </div>

        <p class="note">${opts.req}</p>
      </div>
      <div class="hero-art">
        <div class="card">
          <img src="${opts.img}" alt="${opts.title} UI preview">
        </div>
      </div>
    </div>
  </section>`;
}


    function pricingGrid(title, plans){
      return `
      <section>
        <h2>${title}</h2>
        <div class="grid">
          ${plans.map(p=>`
            <div class="card ${p.popular?'popular':''}">
              <h3>${p.name}${p.badge?` <span class="badge">${p.badge}</span>`:''}</h3>
              <div class="price">€${p.price}</div>
              <div class="sub muted">${p.subtitle}</div>
              <div class="hr"></div>
              <ul class="list">
                ${p.points.map(pt=>`<li>${escapeHtml(pt)}</li>`).join('')}
              </ul>
              <div class="hr"></div>
              <div class="cta-row">
                <a class="btn primary" href="${p.buyHref}" target="_blank" rel="noopener">Buy</a>
                <a class="btn" href="${p.demoHref}" target="_blank" rel="noopener">Demo</a>
              </div>
              ${p.foot?`<div class="note">${p.foot}</div>`:''}
            </div>
          `).join('')}
        </div>
      </section>`;
    }

    function featureMatrix(title, cols, rows){
      return `
      <section>
        <h2>${title}</h2>
        <div class="card">
          <table class="matrix" aria-describedby="matrix-desc">
            <caption id="matrix-desc" class="tiny" style="caption-side:bottom;text-align:left;padding-top:8px;">Feature comparison across versions</caption>
            <thead>
              <tr>
                <th style="text-align:left">Feature</th>
                ${cols.map(c=>`<th>${escapeHtml(c)}</th>`).join('')}
              </tr>
            </thead>
            <tbody>
              ${rows.map(r=>`
                <tr>
                  <td style="text-align:left">${escapeHtml(r.name)}</td>
                  ${r.cells.map(c=>`<td>${c}</td>`).join('')}
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      </section>`;
    }

        function demoSection(items){
      return `
      <section>
        <h2>Demo & Licensing</h2>
        <div class="cols">
          <div class="card">
            <h3>Demo Limits</h3>
            <ul class="list">
              ${items.map(i=>`<li><strong>${escapeHtml(i.name)}:</strong> ${escapeHtml(i.detail)}</li>`).join('')}
            </ul>
          </div>
          <div class="card">
            <h3>License & Installer</h3>
            <ul class="list">
              <li>Perpetual license · 12 months of updates included</li>
              <li>2 seats per license (e.g. studio PC + laptop)</li>
              <li>Installer required for folder structure <span class="muted">(code-signing planned)</span></li>
              <li>Windows 10/11 (64-bit). Anvil: VST3 host · Forge: Acoustic Editor</li>
            </ul>
          </div>
        </div>
      </section>`;
    }


                /* Auto-scrolling slides (Anvil highlight band) */
    function initAutoSlides() {
      const sliders = mainEl.querySelectorAll('.anvil-slides');

      sliders.forEach(slidesEl => {
        if (!slidesEl || slidesEl.dataset.scrollInit === '1')
          return;

        slidesEl.dataset.scrollInit = '1';

        const isMobile = window.matchMedia('(max-width: 900px)').matches;
        const cards = Array.from(slidesEl.children);
        if (!cards.length) return;

        const dotsContainer = slidesEl.previousElementSibling;
        const dots = dotsContainer && dotsContainer.classList.contains('anvil-dots')
          ? Array.from(dotsContainer.querySelectorAll('.anvil-dot'))
          : [];

        let currentIdx = 0;           // which slide is "active"
        const state = {
          pos: slidesEl.scrollLeft || 0,
          speed: 0.25,
          auto: !isMobile,            // auto-scroll only on desktop
          animating: false
        };

        // Helper: mark active dot
        function setActiveDot(index) {
          dots.forEach(dot => {
            const idx = parseInt(dot.dataset.index, 10);
            dot.classList.toggle('is-active', idx === index);
          });
        }

        // Helper: smooth scroll to center a given card index
        function animateScrollToIndex(targetIdx) {
          const card = cards[targetIdx];
          if (!card) return;

          currentIdx = targetIdx;
          setActiveDot(currentIdx);

          const container = slidesEl;
          const containerRect = container.getBoundingClientRect();
          const cardRect = card.getBoundingClientRect();
          const startScroll = container.scrollLeft;
          const targetScroll = startScroll +
            (cardRect.left - containerRect.left) -
            (containerRect.width - cardRect.width) / 2;

          const duration = 400;
          const startTime = (window.performance && performance.now()) || Date.now();

          state.animating = true;

          function frame(now) {
            const t = Math.min(1, ((now || Date.now()) - startTime) / duration);
            const eased = t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2;
            container.scrollLeft = startScroll + (targetScroll - startScroll) * eased;

            if (t < 1) {
              requestAnimationFrame(frame);
            } else {
              state.animating = false;
              state.pos = container.scrollLeft; // auto-scroll resumes from here
            }
          }
          requestAnimationFrame(frame);
        }

        /* ------------------- MOBILE / TABLET ------------------- */
        if (isMobile) {
          // Native swipe + scroll-snap, no auto-scroll; support endless tap-through via cards/dots.
          cards.forEach((card, idx) => {
            card.addEventListener('click', () => {
              let targetIdx = idx;
              if (targetIdx === currentIdx) {
                // tapping same card again -> go to next in a loop
                targetIdx = (targetIdx + 1) % cards.length;
              }
              animateScrollToIndex(targetIdx);
            });
          });

          dots.forEach(dot => {
            dot.addEventListener('click', () => {
              const idx = parseInt(dot.dataset.index, 10);
              let targetIdx = idx;
              if (targetIdx === currentIdx) {
                targetIdx = (targetIdx + 1) % cards.length;
              }
              animateScrollToIndex(targetIdx);
            });
          });

          setActiveDot(0);
          return; // no JS auto-scroll on mobile
        }

        /* ------------------- DESKTOP ------------------- */

        // Click card: center it (first click), then loop to next if you keep clicking it
        cards.forEach((card, idx) => {
          card.addEventListener('click', () => {
            let targetIdx = idx;
            if (targetIdx === currentIdx) {
              targetIdx = (targetIdx + 1) % cards.length;
            }
            state.auto = false;
            animateScrollToIndex(targetIdx);
          });
        });

        // Click dot: same endless-loop behaviour
        dots.forEach(dot => {
          dot.addEventListener('click', () => {
            const idx = parseInt(dot.dataset.index, 10);
            let targetIdx = idx;
            if (targetIdx === currentIdx) {
              targetIdx = (targetIdx + 1) % cards.length;
            }
            state.auto = false;
            animateScrollToIndex(targetIdx);
          });
        });

        // Hover: pause auto-scroll; leaving: resume from *current* position
        slidesEl.addEventListener('mouseenter', () => {
          state.auto = false;
        });
        slidesEl.addEventListener('mouseleave', () => {
          state.auto = true;
        });

        // No wheel handler: do not hijack vertical scroll.

        function step() {
          if (!document.body.contains(slidesEl)) return;

          if (state.animating) {
            // Let the animation control scrollLeft; keep pos in sync
            state.pos = slidesEl.scrollLeft;
          } else if (state.auto) {
            // Gentle auto-scroll, starting from last position
            state.pos += state.speed;
            const maxScroll = slidesEl.scrollWidth - slidesEl.clientWidth;
            if (state.pos > maxScroll + 20) {
              state.pos = 0;
            }
            slidesEl.scrollLeft = state.pos;
          } else {
            // Auto paused: keep our pos in sync with manual movement
            state.pos = slidesEl.scrollLeft;
          }

          requestAnimationFrame(step);
        }

        // Initialize dots and start auto-scroll
        setActiveDot(0);
        requestAnimationFrame(step);
      });
    }




        /* IMPULSE ANVIL – ANATOMY HIGHLIGHTING */

    const anatomyFeatureMap = {
      global:  { top:0.03, left:0.02, width:0.36, height:0.30 },  // top-left: bypass, wet, normalize, levels
      ira:     { top:0.24, left:0.03, width:0.40, height:0.70 },  // left IR A panel
      irb:     { top:0.21, left:0.58, width:0.40, height:0.73 },  // right IR B panel
      morph:   { top:0.16, left:0.32, width:0.34, height:0.70 },  // central morph module
      fractal: { top:0.63, left:0.03, width:0.94, height:0.32 }   // bottom color/fractal rows
    };

    const anatomyLayoutMap = {
      global:{ shift:0 },
      ira:   { shift:-24 },
      irb:   { shift:24 },
      morph: { shift:0 },
      fractal:{ shift:0 }
    };

            function updateAnatomyHighlight(featureKey){
      const anatomy = mainEl.querySelector('.plugin-anatomy');
      if (!anatomy) return;

      const area = anatomyFeatureMap[featureKey];
      if (!area) return;

      const wrap     = anatomy.querySelector('.plugin-anatomy__image-wrap');
      const inner    = anatomy.querySelector('.plugin-anatomy__image-inner');
      const focusImg = anatomy.querySelector('.plugin-anatomy__img--focus');
      const box      = anatomy.querySelector('.plugin-anatomy__focus-box');
      const line     = anatomy.querySelector('.plugin-anatomy__focus-line');

      if (!wrap || !inner || !focusImg || !box || !line) return;

      const isMobile = window.matchMedia('(max-width: 900px)').matches;

      const layout = anatomyLayoutMap[featureKey] || { shift:0 };
      if (isMobile) {
        // Mobile: keep plugin centered, no side movement
        inner.style.transform = 'translateX(0px)';
      } else {
        // Desktop: gently shift plugin left/right per feature
        inner.style.transform = `translateX(${layout.shift}px)`;
      }

      const innerRect = inner.getBoundingClientRect();
      const wrapRect  = wrap.getBoundingClientRect();

      const x = innerRect.width  * area.left;
      const y = innerRect.height * area.top;
      const w = innerRect.width  * area.width;
      const h = innerRect.height * area.height;

      const topInset    = 100 * area.top;
      const rightInset  = 100 * (1 - area.left - area.width);
      const bottomInset = 100 * (1 - area.top  - area.height);
      const leftInset   = 100 * area.left;
      focusImg.style.clipPath = `inset(${topInset}% ${rightInset}% ${bottomInset}% ${leftInset}%)`;

      box.style.left   = `${x}px`;
      box.style.top    = `${y}px`;
      box.style.width  = `${w}px`;
      box.style.height = `${h}px`;

      let startX, startY, endX, endY;

      if (isMobile) {
        // MOBILE:
        // Use the real box position so the line always starts exactly at the highlighted area.
        const boxRect  = box.getBoundingClientRect();

        // Start at bottom-center of the highlight box (in wrap coordinates)
        startX = boxRect.left - wrapRect.left + boxRect.width / 2;
        startY = boxRect.bottom - wrapRect.top;

        // Short vertical pointer downwards toward the text
        endX   = startX;
        endY   = startY + 32; // adjust length if you want longer/shorter pointer
      } else {
        // DESKTOP:
        // Line from right edge of highlight into the text column
        startX = innerRect.left - wrapRect.left + x + w + 6;
        startY = innerRect.top  - wrapRect.top + y + h/2;
        endX   = wrapRect.width + 40; // 40px into the text column
        endY   = startY;
      }

      const dx = endX - startX;
      const dy = endY - startY;
      const length = Math.sqrt(dx*dx + dy*dy);
      const angle  = Math.atan2(dy, dx) * 180 / Math.PI;

      line.style.left  = `${startX}px`;
      line.style.top   = `${startY}px`;
      line.style.width = `${length}px`;
      line.style.transform = `rotate(${angle}deg)`;
    }



                    function initAnatomy(){
      const anatomy = mainEl.querySelector('.plugin-anatomy');
      if (!anatomy) return;

      const steps = Array.from(anatomy.querySelectorAll('.anatomy-step'));
      if (!steps.length) return;

      const bandRoot = anatomy.closest('.anatomy-band') || anatomy;
      const dots  = Array.from(bandRoot.querySelectorAll('.plugin-anatomy__dot'));
      const stepsContainer = anatomy.querySelector('.plugin-anatomy__steps');

      const featureOrder = ['global','ira','irb','morph','fractal'];
      let currentIndex = 0;

      const isMobile = window.matchMedia('(max-width: 900px)').matches;

      // Throttle for all step-like gestures (wheel, swipe, keys)
      const STEP_DELAY = 350; // ms
      let lastStepTime = 0;
      function canStep(){
        const now = (window.performance && performance.now) ? performance.now() : Date.now();
        if (now - lastStepTime < STEP_DELAY) return false;
        lastStepTime = now;
        return true;
      }

      // Clear any previous timer (if user switched sections)
      if (window.__anatomyTimer) {
        clearInterval(window.__anatomyTimer);
        window.__anatomyTimer = null;
      }

      function setActiveByIndex(idx) {
        if (idx < 0 || idx >= featureOrder.length) return;
        currentIndex = idx;
        const feature = featureOrder[currentIndex];

        let activeStep = null;
        steps.forEach(step => {
          const on = step.getAttribute('data-feature') === feature;
          step.classList.toggle('is-active', on);
          if (on) activeStep = step;
        });

        dots.forEach(dot => {
          const on = dot.getAttribute('data-target') === feature;
          dot.classList.toggle('is-active', on);
        });

        if (activeStep && stepsContainer) {
          // Desktop uses fixed-height container; on mobile height:auto !important
          stepsContainer.style.height = activeStep.offsetHeight + 'px';
          requestAnimationFrame(() => {
            stepsContainer.style.height = activeStep.offsetHeight + 'px';
          });
        }

        updateAnatomyHighlight(feature);
      }

      function restartTimer() {
        if (!isMobile) return; // auto-advance only on mobile
        if (window.__anatomyTimer) {
          clearInterval(window.__anatomyTimer);
        }
        window.__anatomyTimer = setInterval(() => {
          const nextIdx = (currentIndex + 1) % featureOrder.length;
          setActiveByIndex(nextIdx);
        }, 12000); // ~12 seconds per feature
      }

      // Dots: jump directly to a feature (no heavy throttle needed)
      dots.forEach(dot => {
        dot.addEventListener('click', () => {
          const feature = dot.getAttribute('data-target');
          const idx = featureOrder.indexOf(feature);
          if (idx !== -1) {
            setActiveByIndex(idx);
            restartTimer();
          }
        });
      });

      // Wheel inside the anatomy band: step through features on desktop
      const band = bandRoot;
      band.addEventListener('wheel', (ev) => {
        const delta = ev.deltaY || ev.detail || 0;
        if (!delta) return;

        const atFirst = currentIndex === 0;
        const atLast  = currentIndex === featureOrder.length - 1;

        if (delta > 0 && !atLast) {
          if (!canStep()) { ev.preventDefault(); return; }
          ev.preventDefault();
          setActiveByIndex(currentIndex + 1);
          restartTimer();
        } else if (delta < 0 && !atFirst) {
          if (!canStep()) { ev.preventDefault(); return; }
          ev.preventDefault();
          setActiveByIndex(currentIndex - 1);
          restartTimer();
        } else {
          // At edges: let normal page scroll continue
        }
      }, { passive:false });

      // Mobile swipe: swipe left/right to move features, throttled
      if (isMobile) {
        let touchStartX = null;
        let touchStartY = null;

        band.addEventListener('touchstart', (ev) => {
          const t = ev.touches[0];
          touchStartX = t.clientX;
          touchStartY = t.clientY;
        }, { passive:true });

        band.addEventListener('touchend', (ev) => {
          if (touchStartX == null || touchStartY == null) return;
          const t = ev.changedTouches[0];
          const dx = t.clientX - touchStartX;
          const dy = t.clientY - touchStartY;
          touchStartX = touchStartY = null;

          if (Math.abs(dx) > 40 && Math.abs(dx) > Math.abs(dy)) {
            if (!canStep()) return;

            if (dx < 0 && currentIndex < featureOrder.length - 1) {
              setActiveByIndex(currentIndex + 1);
            } else if (dx > 0 && currentIndex > 0) {
              setActiveByIndex(currentIndex - 1);
            }
            restartTimer();
          }
        }, { passive:true });
      }

      // Optional keyboard nav (also throttled)
      band.addEventListener('keydown', (ev) => {
        if (ev.key === 'ArrowDown') {
          if (currentIndex < featureOrder.length - 1 && canStep()) {
            ev.preventDefault();
            setActiveByIndex(currentIndex + 1);
            restartTimer();
          }
        } else if (ev.key === 'ArrowUp') {
          if (currentIndex > 0 && canStep()) {
            ev.preventDefault();
            setActiveByIndex(currentIndex - 1);
            restartTimer();
          }
        }
      });

      // Initialise: first card & first dot, plugin aligned
      setActiveByIndex(0);
      restartTimer();

      // Keep highlight & height aligned on resize
      window.addEventListener('resize', () => {
        const feature = featureOrder[currentIndex];
        setActiveByIndex(currentIndex);
        updateAnatomyHighlight(feature);
      }, { passive:true });
    }



    /* PAGE BUILDS */

    function buildImpulseAll(){
  const hero = productHero({
    id:'impulse',
    kicker:'Audio Toolkit · Windows only',
    title:'Impulse Smith Suite',
    tagline:'Design, morph and bake impulse responses — from field recording to IR file.',
    // No direct “Buy Suite” – licenses for Anvil and Forge are separate
    demoHref:IMPULSE_SUITE_DOWNLOAD,
    docsHref:'#docs',
    req:'Impulse Smith Suite is the shared installer and workflow for Impulse Anvil (VST3 · Windows 10/11) and Impulse Forge (Acoustic Editor · Windows 10/11). Licenses are purchased separately for each app.',
    img:'ImpulseSmithSuite.png'
  });


  const tipsBand = `
  <section class="band-dark">
    <div class="band-inner">
      <div class="band-header">
        <span class="band-pill">Creative Tips</span>
        <h2>Use the world as your filter.</h2>
      </div>

      <div class="anvil-slides" aria-label="Impulse Smith tips and creative ideas">
        <article class="anvil-slide">
          <h3>Turn trash takes into gold</h3>
          <p>Ever had a noisy take with pops, clicks or someone bumping the mic? Don’t delete it – mine it.</p>
          <ul class="list">
            <li>Cut out a transient + tail from that “ruined” recording.</li>
            <li>Drop it into <strong>Impulse Anvil</strong> as an IR and morph it with a clean room or cab.</li>
            <li>Use the chaos of the noise to shape the sounds you actually love.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Record the world as filters</h3>
          <p>Birds, fabric rustling, plants, wind, ice, city noise – anything that moves air can become an impulse response.</p>
          <ul class="list">
            <li>Record with your phone, then fade the sound out so it dies naturally.</li>
            <li>Load it into Anvil, stretch or compress it and add Colour/Fractal for texture.</li>
            <li>Turn footsteps in frozen grass or wind in weeds into evolving reverbs and tonal shifts.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Bake your wildest FX chains</h3>
          <p>Have an insane effect chain that eats CPU, but you’re not ready to print it? Bake it into an IR.</p>
          <ul class="list">
            <li>Send a short burst of white/pink noise or a percussive hit through the chain at 100% wet.</li>
            <li>Capture the full tail, export that audio and drop it into Anvil.</li>
            <li>Now that whole chain is a portable IR you can morph, EQ and use anywhere – without the CPU bill.</li>
          </ul>
        </article>

                        <article class="anvil-slide">
          <h3>Build · Fly · Bake · Morph</h3>
          <p>Use <strong>Impulse Forge</strong> to build the room, fly through it in real time, then bake its acoustics as IRs for Anvil.</p>
          <ul class="list">
            <li>Lay out geometry, assign acoustic materials and listen inside the space.</li>
            <li>Hit Bake: Forge excites the room and records a high-quality WAV IR.</li>
            <li>Open that IR in Anvil, morph it with field recordings or other rooms and export new variants.</li>
          </ul>
        </article>



                <article class="anvil-slide">
          <h3>High-resolution bake</h3>
          <p>When a space feels right, trigger the bake: Forge fires an excitation signal through the room and records the response as a high-quality WAV IR.</p>
          <ul class="list">
            <li>Fast, focused baking for “what if?” exploration.</li>
            <li>Float32 WAV IRs, ready for Anvil or any IR loader.</li>
            <li>Directly usable inside your DAW the moment it’s baked.</li>
          </ul>
        </article>

      </div>
    </div>
  </section>`;

  const videos = `
  <section>
    <h2>Out-of-the-box video recipes</h2>
    <p>Fast, caption-driven clips that show the whole pipeline – from recording a sound to designing an IR inside your DAW.</p>
    <div class="grid">
      <div class="card">
        <h3>Trash take → IR gold</h3>
        <p class="muted">See how a “ruined” take becomes a character IR that shapes a clean synth.</p>
        <div class="hr"></div>
        <div class="media-pane">
          <!-- TODO: replace VIDEO_ID_1 with your real YouTube ID -->
          <iframe class="responsive-iframe" src="https://www.youtube.com/embed/VIDEO_ID_1" loading="lazy" title="Trash take to IR gold" allowfullscreen></iframe>
        </div>
      </div>
      <div class="card">
        <h3>Recording the world as filters</h3>
        <p class="muted">Field record ice, wind, traffic – then morph those textures with rooms in Anvil.</p>
        <div class="hr"></div>
        <div class="media-pane">
          <!-- TODO: replace VIDEO_ID_2 with your real YouTube ID -->
          <iframe class="responsive-iframe" src="https://www.youtube.com/embed/VIDEO_ID_2" loading="lazy" title="Recording the world as filters" allowfullscreen></iframe>
        </div>
      </div>
      <div class="card">
        <h3>Bake your FX chains</h3>
        <p class="muted">Turn a huge FX chain into a single IR and free your CPU – then morph it anyway.</p>
        <div class="hr"></div>
        <div class="media-pane">
          <!-- TODO: replace VIDEO_ID_3 with your real YouTube ID -->
          <iframe class="responsive-iframe" src="https://www.youtube.com/embed/VIDEO_ID_3" loading="lazy" title="Baking FX chains into IRs" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </section>`;

                const packs = `
  <section>
    <h2>Included IR Packs</h2>
    <p class="muted">The Suite installer includes demo content immediately. Bonus packs are included with the corresponding Impulse Anvil license tier.</p>

    <div class="grid">
      <div class="card">
        <h3>Demo included</h3>
        <ul class="list">
          <li><strong>ABSTRACT SPACES</strong> IR Pack <span class="badge">31 IRs</span></li>
        </ul>
        <p class="note">Available in Demo mode right away.</p>
      </div>

      <div class="card">
        <h3>Impulse Anvil Basic · Bonus Packs</h3>
        <ul class="list">
          <li><strong>HOME PACK</strong></li>
          <li><strong>ARTIFICIAL PACK</strong> <span class="badge">+29</span></li>
        </ul>
        <p class="note">Included with an Impulse Anvil Basic license.</p>
      </div>

      <div class="card">
        <h3>Impulse Anvil Pro · Extra Packs</h3>
        <p class="muted">Everything in Basic, plus:</p>
        <ul class="list">
          <li><strong>FABRIC MAGIC</strong></li>
          <li><strong>HUMANOID</strong></li>
          <li><strong>PHASE</strong></li>
        </ul>
        <p class="note">Included with an Impulse Anvil Pro license.</p>
      </div>
    </div>

    <p class="note"><strong>Important:</strong> Impulse Anvil and Impulse Forge are purchased and licensed separately. “Impulse Smith Suite” is the installer + workflow — not a bundle product.</p>
  </section>`;



                const demo = demoSection([
        { name:'Anvil', detail:'Perpetual demo. Short periodic mute; export limited and some features locked compared to full versions. Includes the ABSTRACT SPACES IR pack (31 IRs).' },
        { name:'Forge', detail:'Full editor and live listening; export / bake to WAV is disabled in the demo.' }
      ]);



  const tiles = `
  <section>
    <h2>Included Apps</h2>
    <div class="grid">
      <div class="card">
        <h3>Impulse Anvil <span class="badge">VST3 · Windows</span></h3>
        <div class="media-pane" style="margin-bottom:10px;">
          <img src="anvilProductImage.png" alt="Impulse Anvil" onerror="this.closest('.media-pane').classList.add('media-hide')">
        </div>
        <p class="muted">IR morphing, colouring, Fractal depth and bake-to-WAV directly inside your DAW.</p>
        <div class="hr"></div>
        <ul class="list">
          <li>Dual A/B slots for IRs you already own.</li>
          <li>Time and spectral morph modes with curve shaping.</li>
          <li>Colour Stripes + Fractal depth for alive, evolving spaces.</li>
          <li>Bake your results as portable WAV IRs.</li>
        </ul>
        <div class="hr"></div>
        <div class="cta-row">
          <a class="btn" href="#" onclick="loadFeed('anvil');return false;">See Anvil</a>
        </div>
      </div>
      <div class="card">
        <h3>Impulse Forge <span class="badge">Acoustic Editor · Windows</span></h3>
        <div class="media-pane" style="margin-bottom:10px;">
          <img src="ImpulseForgeProductImage.png" alt="Impulse Forge" onerror="this.closest('.media-pane').classList.add('media-hide')">
        </div>
        <p class="muted">Build rooms, fly through them, feed them from your DAW and bake their acoustics.</p>
        <div class="hr"></div>
        <ul class="list">
          <li>Geometry-based acoustic sandbox with snapping and grouping.</li>
          <li>Acoustic materials with absorption, transmission and scattering.</li>
          <li>.OBJ import from any 3D tool for custom spaces.</li>
                    <li>Live input from Impulse Anvil via the VST3 bridge.</li>
          <li>Bake to high-quality WAV IRs.</li>
        </ul>

        <div class="hr"></div>
        <div class="cta-row">
          <a class="btn" href="#" onclick="loadFeed('forge');return false;">See Forge</a>
        </div>
      </div>
                  <div class="card">
        <h3>Install the Suite</h3>
        <p class="muted">Impulse Smith Suite is the shared installer that sets up both Impulse Anvil and Impulse Forge in demo mode.</p>
        <p class="note">Licenses for Anvil and Forge are purchased separately. There is no combined “bundle” license – Impulse Smith is the name of the installer and workflow, not a separate product.</p>
        <div class="hr"></div>
        <div class="cta-row">
          <a class="btn" href="${IMPULSE_SUITE_DOWNLOAD}" target="_blank" rel="noopener">Download Installer</a>
          <a class="btn ghost" href="#" onclick="loadFeed('downloads');return false;">More about installation</a>
        </div>
      </div>

    </div>
  </section>`;

  const related = `
  <section>
    <h2>Continue exploring the Impulse family</h2>
    <div class="grid">
      <div class="card">
        <h3>Impulse Anvil</h3>
        <p class="muted">Part of the Impulse Smith Suite · VST3 IR forge inside your DAW.</p>
        <div class="hr"></div>
        <a class="btn" href="#" onclick="loadFeed('anvil');return false;">Go to Impulse Anvil</a>
      </div>
      <div class="card">
        <h3>Impulse Forge</h3>
        <p class="muted">Part of the Impulse Smith Suite · Standalone acoustic editor for building and baking spaces.</p>
        <div class="hr"></div>
        <a class="btn" href="#" onclick="loadFeed('forge');return false;">Go to Impulse Forge</a>
      </div>
    </div>
  </section>`;

          return hero + tipsBand + videos + tiles + packs + demo + related;


}


        function buildAnvil(){
  const hero = productHero({
    id:'anvil',
    kicker:'VST3 Plugin · Windows',
    title:'Impulse Anvil',
    tagline:'Forge new impulse responses from the IRs, rooms and noise you already have – then use them everywhere.',
    buyHref:'#TODO-buy-anvil',
    demoHref:IMPULSE_SUITE_DOWNLOAD,
    docsHref:'#docs',
    priceFrom:'39',
    req:'Windows 10/11 · 64-bit · VST3 only',
    img:'anvilProductImage.png',
    secondaryCtaLabel:'Download'
  });


      const anvilIntro = `
      <section>
        <h2>What Impulse Anvil is</h2>
        <div class="cols">
          <div>
            <p><strong>Impulse Anvil</strong> is a dual-slot impulse response morphing &amp; baking plugin. It takes the IRs you already have – from other plugins, IR packs, your own captures, even AI-generated files – and lets you reshape, blend and re-forge them into new, portable WAV IRs.</p>
            <p>It’s not a “wiggle everything in real time” effect. Every move you make <strong>rebuilds the impulse response itself</strong> behind the scenes. You dial in the sound, bake it, and then use that IR in Anvil or any other convolution reverb, cab sim or IR loader you own.</p>
            <p>Impulse Anvil started from a simple problem: <em>great instruments that felt dusty and over-used</em>. The solution was to create brand new spaces and resonances around them – spaces that hadn’t been heard before.</p>
          </div>
                    <div class="card">
            <h3>Impulse Responses, in short</h3>
            <p><strong>Impulse Responses are amazing.</strong> They’re like a “photo” of how a space or effect reacts to sound.</p>
            <p>Imagine you clap your hands in a room. You hear the first hit, then all the reflections and reverb as the sound dies away. If you record that clap and the whole decay very cleanly, you’ve basically captured the <strong>fingerprint of that room</strong>.</p>
            <p>Convolution reverb takes that fingerprint and <strong>stamps it onto any sound you want</strong>. Play a dry vocal through a cathedral IR and it feels like the singer is really in that cathedral. Do the same with a tiny bathroom IR and suddenly it sounds like they’re in a tiled box.</p>
            <p>But it doesn’t have to be “rooms”. If you record things like ice cracks, traffic, fabric rustling or wild FX chains and turn them into IRs, they become <strong>insanely complex filters and textures</strong> you can morph and reuse everywhere.</p>
            <p class="note">Impulse Anvil exists to make that whole process fun: record, build, bake, morph – and end up with IRs nobody else has.</p>
          </div>
        </div>
      </section>`;

            const anvilBand = `
      <section class="band-dark">
        <div class="band-inner">
          <div class="band-header">
            <span class="band-pill">Why producers reach for Impulse Anvil</span>
            <h2>Turn every IR collection into a forge.</h2>
          </div>

          <div class="anvil-dots" aria-hidden="true">
            <button class="anvil-dot" type="button" data-index="0"></button>
            <button class="anvil-dot" type="button" data-index="1"></button>
            <button class="anvil-dot" type="button" data-index="2"></button>
            <button class="anvil-dot" type="button" data-index="3"></button>
            <button class="anvil-dot" type="button" data-index="4"></button>
            <button class="anvil-dot" type="button" data-index="5"></button>
          </div>

          <div class="anvil-slides" aria-label="Impulse Anvil highlights">
            <article class="anvil-slide">
              <h3>Use any IRs you already own</h3>
              <p>Load IRs from other reverbs, cab sims, hardware captures, sample packs or AI tools. Impulse Anvil doesn’t care where they came from – it treats them as raw material.</p>
              <ul class="list">
                <li>Drop in WAV IRs from any plugin or library.</li>
                <li>Combine spaces, cabs and chains that were never meant to meet.</li>
                <li>Turn existing collections into a source of <strong>new</strong> IRs.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Forge, don’t automate</h3>
              <p>Impulse Anvil is a <strong>forge</strong>, not an automatable reverb. Every knob drag rebuilds the IR itself, so the result is precise, clean and portable.</p>
              <ul class="list">
                <li>Work deliberately, commit when it sounds right.</li>
                <li>No parameter-chasing in every project – just load the baked IR.</li>
                <li>Perfect for building reusable, recall-safe sounds.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Colour Stripes &amp; Fractal depth</h3>
              <p>Shape each source IR with independent Colour Stripes and optional Fractal stacking to build complex, living spaces.</p>
              <ul class="list">
                <li>Time, phase and gain control per stripe for precise shaping.</li>
                <li>Fractal mode re-applies that colouring in layers, adding density and richness.</li>
                <li>Turn simple rooms or cabs into hyper-detailed, characterful spaces.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>Morph between A and B</h3>
              <p>Morph two IRs in time or in the spectral domain – or use hybrid modes to create spaces that feel almost synthesized.</p>
              <ul class="list">
                <li>Time or spectral morphing, with optional peak alignment.</li>
                <li>Multiple morph modes: Time, Spectral, Band Swap and ZigZag.</li>
                <li>From transparent blends to bold, broken spaces.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>IRs you can use anywhere</h3>
              <p>When you’ve forged something special, bake it out as a high-quality WAV IR and use it in any other impulse response tool you own.</p>
              <ul class="list">
                <li>Bake morphed, coloured and fractal-processed IRs to disk.</li>
                <li>Drop them into your favourite convolution reverb or cab sim.</li>
                <li>Build your own signature IR folders and packs.</li>
              </ul>
            </article>

            <article class="anvil-slide">
              <h3>For creators who’ve heard it all</h3>
              <p>If your instruments and presets feel old, Impulse Anvil gives them new life by changing the space around them – not just the EQ or compressor on top.</p>
              <ul class="list">
                <li>Refresh dusty VST instruments with unheard spaces.</li>
                <li>Turn “boring” sounds into something exciting and inspiring.</li>
                <li>Perfect for artists chasing a <strong>truly personal</strong> sound.</li>
              </ul>
            </article>
          </div>
        </div>
      </section>`;


            const pricing = pricingGrid('Impulse Anvil – Versions', [
        {
          name:'Basic', price:39, subtitle:'Core morph & bake',
          points:[
            'Time Morph engine',
            'Live Morph + Bake Morph export',
            '1 Color stripe per IR',
            'Per-IR gain & time stretch',
            'Bake morphed IRs to WAV'
          ],
          buyHref:'#TODO-buy-anvil-basic',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        },
        {
          name:'Pro', price:79, subtitle:'Full spectral & fractal toolkit', popular:true,
          points:[
            'Time + Spectral morph modes',
            'Spectral morph modes (Pro)',
            '2 Color stripes per IR',
            'Fractal depth per slot'
          ],
          buyHref:'#TODO-buy-anvil-pro',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        }
      ]);


            const matrix = featureMatrix('Feature comparison (Impulse Anvil)', ['Demo','Basic','Pro'], [
        { name:'Morph modes',        cells:['Time','Time','Time + Spectral'] },
        { name:'Live Morph',         cells:['✓','✓','✓'] },
        { name:'Color stripes per IR', cells:['×1','×1','×2'] },
        { name:'Fractal depth',      cells:['—','—','✓'] },
        { name:'Per-IR stretch & gain', cells:['✓','✓','✓'] },
        { name:'Bake / Export IR',   cells:['—','✓','✓'] },
        { name:'Spectral morph modes', cells:['—','—','✓'] },
        { name:'Demo mute / watermark', cells:['Periodic short mute','—','—'] }
      ]);


            const anatomy = `
      <section class="band-dark anatomy-band">
        <div class="band-inner">
          <div class="band-header">
  <span class="band-pill">Anatomy of Impulse Anvil</span>
  <h2>See exactly what each section does.</h2>
</div>


          <div class="plugin-anatomy__dots">
            <button type="button" class="plugin-anatomy__dot" data-target="global" aria-label="Global controls"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="ira" aria-label="IR A slot"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="irb" aria-label="IR B slot"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="morph" aria-label="Morph engine"></button>
            <button type="button" class="plugin-anatomy__dot" data-target="fractal" aria-label="Fractal depth"></button>
          </div>

          <div class="plugin-anatomy">
            <div class="plugin-anatomy__image-wrap">
              <div class="plugin-anatomy__image-inner">
                <img src="Impulse-Anvil-UI.png" alt="Impulse Anvil user interface"
                     class="plugin-anatomy__img plugin-anatomy__img--blur">
                <img src="Impulse-Anvil-UI.png" alt="" aria-hidden="true"
                     class="plugin-anatomy__img plugin-anatomy__img--focus">
                <div class="plugin-anatomy__focus-box"></div>
              </div>
              <div class="plugin-anatomy__focus-line"></div>
            </div>

            <div class="plugin-anatomy__steps">
              <article class="anatomy-step" data-feature="global">
                <h3>Global control &amp; loudness</h3>
                <p>The top-left of Anvil gives you global control over the chain: bypass, wet-only listening, IR normalisation and the main input / wet level knobs.</p>
                <ul>
                  <li>Quickly check “wet only” to hear what the IR is really doing.</li>
                  <li>Normalize IRs when you just want a healthy level without thinking.</li>
                  <li>Use the Input &amp; Wet Level to hit the morph engine exactly as hard as you like.</li>
                </ul>
              </article>

              <article class="anatomy-step" data-feature="ira">
                <h3>IR A slot · Your main source</h3>
                <p>On the left side you load <strong>IR A</strong> – the main space, cab or chain you’re starting from.</p>
                <ul>
                  <li>Load any WAV IR from disk or from your preset banks.</li>
                  <li>Set IR A Gain in dB to match loudness by ear.</li>
                  <li>Use the Time A stretch to make that IR tighter or more cinematic before any morphing happens.</li>
                  <li>Shape A Colors to emphasise specific reflections or tonal regions.</li>
                </ul>
                <p>The result is a perfectly prepared “base reality” that everything else builds on.</p>
              </article>

              <article class="anatomy-step" data-feature="irb">
                <h3>IR B slot · The counterweight</h3>
                <p>On the right, <strong>IR B</strong> is the counterpart that pulls your sound into a new direction.</p>
                <ul>
                  <li>Load IRs from other plugins, packs, hardware or AI tools.</li>
                  <li>Match its level with IR B Gain so the morph feels natural.</li>
                  <li>Use Time B stretch to decide if B should feel tighter, longer or completely otherworldly.</li>
                  <li>B Colors let you pre-shape B so its character comes through exactly as much as you want.</li>
                </ul>
                <p>Think of B as the “what if?” version of your sound – waiting to be forged together with A.</p>
              </article>

              <article class="anatomy-step" data-feature="morph">
                <h3>Morph engine · Where A becomes B</h3>
                <p>The central Morph section is the heart of Impulse Anvil. Every move of the big knob rebuilds the IR between A and B.</p>
                <ul>
                  <li>Choose between Time Morph and Spectral Morph for temporal vs tonal focus.</li>
                  <li>Select a morph mode (Time, Spectral, Band Swap, ZigZag) depending on whether you want transparent blending or more textured hybrids.</li>
                  <li>Align peaks when you want transparent blends that still feel punchy.</li>
                </ul>
                <p>Once it feels right, you bake it – and that exact fusion becomes a single IR you can load anywhere.</p>
              </article>

              <article class="anatomy-step" data-feature="fractal">
                <h3>Fractal / Recursive depth</h3>
                <p>At the bottom of the A and B sections you’ll find the Fractal depth controls. They tell Anvil how far to recursively re-apply its own IR structure.</p>
                <ul>
                  <li>Low values subtly increase density and smoothness, keeping things realistic.</li>
                  <li>Higher values create rich, layered tails that feel closer to a hybrid of convolution and algorithmic reverb.</li>
                  <li>Enable Fractal on both A and B and morph between two evolving, deeply textured spaces.</li>
                </ul>
                <p>It’s how you turn simple, flat IRs into living, modern spaces that still fit into a single WAV file.</p>
              </article>
            </div>
          </div>
        </div>
      </section>`;


            const demo = demoSection([
        {
          name:'Anvil',
          detail:'Perpetual demo with short periodic mute during playback. Time Morph only, 1 Color stripe per IR, no Fractal, no export.'
        }
      ]);


            const related = `
      <section>
        <h2>Impulse Smith Suite workflow</h2>
        <div class="grid">
          <div class="card">
            <h3>Impulse Forge</h3>
            <p class="muted">Design rooms and spaces, then bake them to IRs you can load in Anvil.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('forge');return false;">Go to Impulse Forge</a>
          </div>

          <div class="card">
            <h3>Impulse Smith Suite (Installer)</h3>
            <p class="muted">Single Windows installer that installs Anvil + Forge in demo mode.</p>
            <div class="hr"></div>
            <a class="btn" href="${IMPULSE_SUITE_DOWNLOAD}" target="_blank" rel="noopener">Download for Windows</a>
          </div>
        </div>
        <p class="note"><strong>Licensing:</strong> Anvil and Forge are purchased separately — the Suite is not sold as a bundle.</p>
      </section>`;


      // order: hero / intro / first dark band / pricing / matrix / anatomy (dark) / demo / related
      return hero + anvilIntro + anvilBand + pricing + matrix + anatomy + demo + related;
    }



        function buildForge(){
      const hero = productHero({
        id:'forge',
        kicker:'Acoustic Editor · Windows',
        title:'Impulse Forge',
        tagline:'Build any room, fly through it, feed it from your DAW and bake its acoustics as impulse responses.',
        buyHref:'#TODO-buy-forge',
        demoHref:IMPULSE_SUITE_DOWNLOAD,
        docsHref:'#docs',
        priceFrom:'89',
        req:'Standalone · Windows 10/11 · 64-bit',
        img:'ImpulseForgeProductImage.png'
      });


  const forgeIntro = `
  <section>
    <h2>What Impulse Forge is</h2>
    <div class="cols">
      <div>
        <p><strong>Impulse Forge</strong> is a geometry-based acoustic sandbox for Windows. You build any room you can imagine, fly through it in first-person, feed it from your DAW and hear its acoustics react in real time.</p>
        <p>Create simple box rooms or intricate multi-room levels, edit them with precise snapping and grouping tools, then use Bake to capture the room as a high-quality WAV IR you can use in <strong>Impulse Anvil</strong> or any convolution reverb.</p>
        <p>You can also create complex meshes in any 3D package, export them as <strong>.obj</strong> and import them as runtime actors with full acoustic materials attached – perfect for architectural experiments, sound design spaces or game-style environments.</p>
      </div>
      <div class="card">
        <h3>Acoustic materials, for real</h3>
        <p>Every surface in Forge can have a dedicated acoustic material component with clearly exposed parameters:</p>
        <ul class="list">
          <li><strong>Absorption</strong> – Low / Mid / High bands</li>
          <li><strong>Transmission</strong> – Low / Mid / High bands</li>
          <li><strong>Scattering</strong> – how strongly the surface diffuses sound</li>
          <li>Material presets (Concrete, Brick, Glass, Wood, Curtain, Carpet, Metal) + fully Custom</li>
        </ul>
        <p class="note">Those values map directly into the underlying acoustic engine so what you see in the editor is what you hear in the simulation.</p>
      </div>
    </div>
  </section>`;

  const forgeBand = `
  <section class="band-dark">
    <div class="band-inner">
      <div class="band-header">
        <span class="band-pill">Build · Fly · Bake</span>
        <h2>From room shape to impulse response.</h2>
      </div>

      <div class="anvil-slides" aria-label="Impulse Forge highlights">
        <article class="anvil-slide">
          <h3>Geometry-based acoustic sandbox</h3>
          <p>Lay out walls, floors, ceilings and meshes directly in the editor. Snap, align and group like a level designer, but with acoustics as the main focus.</p>
          <ul class="list">
            <li>Precision grid and angle snapping.</li>
            <li>Selection, grouping and duplication for fast layout.</li>
            <li>Save/load complete acoustic levels as presets.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Import complex meshes via .OBJ</h3>
          <p>Already comfortable in Blender, Maya or Max? Model there, export as <strong>.obj</strong>, and let Forge create runtime actors with full collision and acoustic material support.</p>
          <ul class="list">
            <li>Runtime .OBJ import with triangulation and uniform scaling.</li>
            <li>Each imported mesh gets its own acoustic material component.</li>
            <li>Included in selection, grouping and acoustic export.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Walk the room, hear the room</h3>
          <p>A dedicated first-person character lets you fly or walk through your scene and listen as the space reacts around you.</p>
          <ul class="list">
            <li>Convolution preview wired to a submix for instant “room feel”.</li>
            <li>Physical acoustic simulation under the hood.</li>
            <li>Switch between exploring and editing with a single UI toggle.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>Feed it from your DAW</h3>
          <p>Use the VST3 bridge via <strong>Impulse Anvil</strong> to send any track or bus into Forge in real time.</p>
          <ul class="list">
            <li>Play live instruments or stems into the room while you edit.</li>
            <li>Hear the mix react as you change geometry and materials.</li>
            <li>Perfect for designing spaces around specific sounds.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>High-resolution one-click bake</h3>
          <p>When a space feels right, trigger the bake: Forge fires an excitation signal through the room and records the response as a high-quality WAV IR.</p>
          <ul class="list">
            <li>One-click bake for fast “what if?” exploration.</li>
            <li>Float32 WAV IRs, ready for Anvil or any IR loader.</li>
            <li>Directly usable inside your DAW the moment it’s baked.</li>
          </ul>
        </article>

        <article class="anvil-slide">
          <h3>From “I wonder how this sounds” to presets</h3>
          <p>Have you ever wondered how a very specific room shape might sound? With Forge you can build it, fly through it, and create your own presets in one workflow.</p>
          <ul class="list">
            <li>Experiment freely with shapes and materials.</li>
            <li>Save the ones you love as IRs and level presets.</li>
            <li>Use them in music, games, sound design and beyond.</li>
          </ul>
        </article>
      </div>
    </div>
  </section>`;

  const pricing = pricingGrid('Impulse Forge – Full License (Windows only)', [
        {
          name:'Forge Full', price:89,
          subtitle:'Build, fly, bake & feed from your DAW',
                    points:[
            'Full 3D acoustic editor for Windows',
            'Live listening inside the room',
            'VST3 bridge input via Impulse Anvil',
            'Bake to high-quality WAV IRs',
            'Save/load levels and materials'
          ],

          buyHref:'#TODO-buy-forge-full',
          demoHref:IMPULSE_SUITE_DOWNLOAD
        }
      ]);

  const matrix = featureMatrix('Feature overview', ['Forge Demo','Forge Full'], [
    { name:'Editor & navigation',   cells:['✓','✓'] },
    { name:'OBJ import',            cells:['✓','✓'] },
    { name:'Live convolution preview', cells:['✓','✓'] },
    { name:'VST3 bridge input (via Anvil)', cells:['✓','✓'] },
    { name:'Baking', cells:['X','✓'] },
    { name:'License',               cells:['Demo mode','Perpetual (2 seats)'] }
  ]);

  const demo = demoSection([
        {
          name:'Forge',
          detail:'Demo gives you the full editor and live listening from Anvil. Export / bake to WAV is disabled.'
        }
      ]);

  const faq = `
  <section>
    <h2>Workflow notes & FAQ</h2>
    <div class="grid">
      <div class="card">
        <h3>How does the DAW bridge work?</h3>
        <p>Impulse Anvil (VST3, Windows only) includes a bridge that routes audio into Forge.</p>
        <ul class="list">
          <li>Insert Anvil on a track or bus in your DAW.</li>
          <li>Enable the bridge so Anvil sends audio into Forge’s input.</li>
          <li>In Forge, listen as the room colours that live signal in real time.</li>
        </ul>
      </div>
      <div class="card">
        <h3>One Input</h3>
        <p>Forge is designed around a single live input stream. To send multiple instruments at once:</p>
        <ul class="list">
          <li>Create a group bus in your DAW and route the instruments there.</li>
          <li>Put Anvil on that bus and enable the Forge bridge.</li>
          <li>Or put it on your master if you want to hear the whole mix inside the room.</li>
        </ul>
      </div>
      <div class="card">
        <h3>What is baking?</h3>
        <p>When you hit bake, Forge:</p>
        <ul class="list">
          <li>Fires an excitation signal through the current room.</li>
          <li>Records the response as a high-resolution impulse response.</li>
          <li>Writes a ready-to-use float32 WAV IR you can load in Anvil or any convolution reverb.</li>
        </ul>
      </div>
    </div>
  </section>`;

  const related = `
      <section>
        <h2>Part of the Impulse Smith ecosystem</h2>
        <div class="grid">
          <div class="card">
            <div class="card">
  <h3>Impulse Smith Suite (Installer)</h3>
  <p class="muted">Single Windows installer that installs Anvil + Forge in demo mode.</p>
  <div class="hr"></div>
  <a class="btn" href="${IMPULSE_SUITE_DOWNLOAD}" target="_blank" rel="noopener">Download for Windows</a>
</div>

          </div>
          <div class="card">
            <h3>Impulse Anvil</h3>
            <p class="muted">Use your baked rooms as IRs and forge completely new spaces inside your DAW.</p>
            <div class="hr"></div>
            <a class="btn" href="#" onclick="loadFeed('anvil');return false;">Go to Impulse Anvil</a>
          </div>
        </div>
      </section>`;

      return hero + forgeIntro + forgeBand + pricing + matrix + demo + related;
    }

    // Docs & FAQ page
    function buildDocs(){
            const hero = `
      <section id="docs">
        <h2>Docs &amp; FAQ – Impulse Smith Suite</h2>
       <p>Quick starts, common questions and a plain-language explanation of impulse responses for Impulse Anvil, Impulse Forge and the Impulse Smith Suite workflow.</p>

        <div class="grid">
          <div class="card">
            <h3>Impulse Anvil</h3>
            <p class="muted">VST3 plugin · Windows 10/11 · 64-bit</p>
            <div class="hr"></div>
            <a class="btn" href="#"
               onclick="document.getElementById('docs-anvil')?.scrollIntoView({behavior:'smooth'}); return false;">
              Anvil quickstart
            </a>
          </div>
          <div class="card">
            <h3>Impulse Forge</h3>
            <p class="muted">Standalone Acoustic Editor · Windows 10/11 · 64-bit</p>
            <div class="hr"></div>
            <a class="btn" href="#"
               onclick="document.getElementById('docs-forge')?.scrollIntoView({behavior:'smooth'}); return false;">
              Forge quickstart
            </a>
          </div>
          <div class="card">
            <h3>Impulse Smith Suite</h3>
            <p class="muted">Licensing, installer &amp; workflow tips.</p>
            <div class="hr"></div>
            <a class="btn" href="#"
               onclick="document.getElementById('docs-suite')?.scrollIntoView({behavior:'smooth'}); return false;">
              Suite FAQ
            </a>
          </div>
        </div>
      </section>`;


            const anvilQuickstart = `
<section id="docs-anvil">
  <h2>Impulse Anvil – Documentation</h2>
  <p class="muted">VST3 plugin · Windows 10/11 · 64-bit</p>

  <div class="card" style="margin-top:14px">
    <h3>Jump to</h3>
    <div class="flex-container" style="justify-content:flex-start; gap:10px; flex-wrap:wrap; margin-top:10px">
      <a class="btn" href="#" onclick="document.getElementById('anvil-quickstart')?.scrollIntoView({behavior:'smooth'}); return false;">Quickstart</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-global')?.scrollIntoView({behavior:'smooth'}); return false;">Global Controls</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-bridge')?.scrollIntoView({behavior:'smooth'}); return false;">Forge Bridge</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-bake')?.scrollIntoView({behavior:'smooth'}); return false;">Bake / Export</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-slots')?.scrollIntoView({behavior:'smooth'}); return false;">IR A / IR B</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-color')?.scrollIntoView({behavior:'smooth'}); return false;">Color Stripes</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-fractal')?.scrollIntoView({behavior:'smooth'}); return false;">Fractal Depth</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-morph')?.scrollIntoView({behavior:'smooth'}); return false;">Live Morph Modes</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-workflow')?.scrollIntoView({behavior:'smooth'}); return false;">Creative Workflow</a>
      <a class="btn" href="#" onclick="document.getElementById('anvil-performance')?.scrollIntoView({behavior:'smooth'}); return false;">Performance Tips</a>
    </div>

    <p class="note" style="margin-top:10px">
      <strong>Impulse Anvil is a forge.</strong> It doesn’t “automate like an FX” — it <strong>rebuilds the impulse response</strong> whenever you tweak it.
      When it’s right, you <strong>bake/export</strong> a new WAV IR you can use anywhere.
    </p>
  </div>

  <div class="hr"></div>

  <!-- 1) QUICKSTART -->
  <section id="anvil-quickstart" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>1) Quickstart (first 2 minutes)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <ol class="list">
          <li><strong>Install the suite.</strong> Run the Impulse Smith installer (Windows 10/11, 64-bit). Shared content installs under <code>C:\\ProgramData\\FreQtik</code>.</li>
          <li><strong>Insert Anvil.</strong> Load the VST3 on a send or insert like any convolution reverb / IR loader.</li>
          <li><strong>Load IR A (and IR B).</strong> Click <strong>Load IR A</strong> / <strong>Load IR B</strong> and pick:
            <ul class="list">
              <li><strong>Load from preset</strong> (built-in / baked IRs), or</li>
              <li><strong>Load from file</strong> (any WAV IR you own).</li>
            </ul>
          </li>
          <li><strong>Set safe levels.</strong> Use <strong>Input</strong> (incoming gain) and <strong>Wet Level</strong> (effect output). Optional: enable <strong>Normalize</strong> (see notes below).</li>
          <li><strong>Enable reverb.</strong> Turn <strong>Use Anvil</strong> on to hear the convolution engine processing your signal.</li>
          <li><strong>Morph &amp; shape.</strong> Enable <strong>Morph</strong> and move the <strong>Morph</strong> knob to blend A and B. Add <strong>Color</strong> and <strong>Fractal</strong> for richer, stranger spaces.</li>
          <li><strong>Bake/export when it’s right.</strong> Click <strong>Bake Morph</strong> to write the current result as a WAV IR you can reuse anywhere.</li>
        </ol>
      </div>

      <div class="card">
        <h3>Safety notes (recommended)</h3>
        <ul class="list">
          <li><strong>Normalize can jump in loudness.</strong> Before enabling it, lower <strong>Wet Level</strong> to play safe.</li>
          <li><strong>Longer IR = more CPU.</strong> Be intentional with IR length, especially if you stack Color/Fractal and spectral morphing.</li>
          <li><strong>Forge Bridge needs 48 kHz.</strong> Only relevant if you connect to Impulse Forge.</li>
        </ul>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 2) GLOBAL CONTROLS -->
  <section id="anvil-global" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>2) Global Controls (top-left)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <ul class="list">
          <li><strong>Bypass</strong> — bypasses the entire effect.</li>
          <li><strong>Wet Only</strong> — removes the dry path (useful for send FX). Also acts as the <strong>bridge switch</strong> when connecting to Forge (details below).</li>
          <li><strong>Normalize</strong> — automatically normalizes loaded/processed IRs. <strong>Tip:</strong> reduce wet output before enabling to avoid sudden loudness jumps.</li>
          <li><strong>Use Anvil</strong> — enables the internal convolution engine. If it’s off, you won’t hear reverb (but you can still bake/process IRs and/or bridge to Forge).</li>
        </ul>

        <div class="hr"></div>

        <p><strong>Metering &amp; level</strong></p>
        <ul class="list">
          <li><strong>Input</strong> — controls incoming loudness (what you feed into the reverb).</li>
          <li><strong>Wet Level</strong> — controls the effect output loudness.</li>
        </ul>
      </div>

      <div class="card">
        <h3>Rule of thumb</h3>
        <p>Think of Anvil as a <strong>reverb factory</strong>:</p>
        <ul class="list">
          <li>Load IRs → shape/morph → bake/export → reuse forever.</li>
          <li>You can still use it as a normal convolution reverb, but the superpower is <strong>building new IRs</strong>.</li>
        </ul>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 3) IMPULSE FORGE BRIDGE -->
  <section id="anvil-bridge" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>3) Impulse Forge Bridge (live audio into the editor)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>Sample rate requirement</strong></p>
        <ul class="list">
          <li>The bridge works only in <strong>48 kHz</strong> projects.</li>
          <li>If you don’t use Forge, you’re not bound to 48 kHz.</li>
        </ul>

        <p style="margin-top:10px"><strong>Bridge configuration (must match exactly)</strong></p>
        <ol class="list">
          <li>Set <strong>Wet Only</strong> to <strong>true</strong>.</li>
          <li>Set <strong>Use Anvil</strong> to <strong>false</strong>.</li>
          <li>Make sure <strong>IR A</strong>, <strong>IR B</strong>, and <strong>Morph</strong> are <strong>off</strong>.</li>
          <li>Click <strong>Impulse Forge</strong> (top-right) to launch the editor.</li>
        </ol>

        <p class="note">
          When the bridge is active, the track may go <strong>silent in the DAW</strong> — that’s normal. Your signal is being routed into Impulse Forge for live preview.
          If you don’t hear audio inside the editor, make sure your DAW is playing. If needed: close the editor and repeat the steps.
        </p>
      </div>

      <div class="card">
        <h3>Important limitations</h3>
        <ul class="list">
          <li><strong>Only one bridge at a time.</strong> Don’t open two editors and don’t connect two plugins at once.</li>
          <li><strong>One editor, one input.</strong> If you want multiple tracks in one room, route them to a <strong>group bus</strong>, then place Anvil on that bus and enable the bridge there.</li>
          <li>Don’t run multiple Anvils “bridging” into one editor simultaneously.</li>
        </ul>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 4) BAKE / EXPORT -->
  <section id="anvil-bake" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>4) Bake / Export (save your forged IRs as WAV)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>Bake Morph</strong> writes what you currently hear (including morphing mode, slot stretch, colors, fractal and normalization state) to a WAV file.</p>

        <p style="margin-top:10px"><strong>Export only IR A or only IR B</strong></p>
        <ol class="list">
          <li>Enable <strong>Morph</strong>.</li>
          <li>Turn the Morph knob fully to <strong>A</strong> or fully to <strong>B</strong>.</li>
          <li>If you want to be extra safe, re-load the IR you want to export (A or B), then set the knob again.</li>
          <li>Click <strong>Bake Morph</strong>.</li>
        </ol>

        <p class="note">
          Your baked files are directly accessible in presets (e.g. <strong>Morphed</strong> / <strong>Baked</strong>), and also available via <strong>Load from file</strong>.
          Using “Load from file” shows you the folder location so you can rename, organize or delete your bakes (and you can also drop your favourite external IRs into that folder for fast access).
        </p>
      </div>

      <div class="card">
        <h3>Morph stacking (advanced)</h3>
        <p>If you bake a morph, you can immediately load that baked file and morph it again.</p>
        <ul class="list">
          <li>Forge A+B → bake → load as a new IR → morph again.</li>
          <li>Stacking often unveils new textures, sweeps and artifacts that don’t exist in either source IR.</li>
        </ul>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 5) IR A / IR B -->
  <section id="anvil-slots" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>5) IR A / IR B (source slots)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <ul class="list">
          <li><strong>Solo A / Solo B</strong> — audition one slot while you fine-tune it.</li>
          <li><strong>Per-slot Gain</strong> — balances A and B before morphing (best used with Normalize off).</li>
          <li><strong>Time Stretch</strong> — stretch the IR (roughly <strong>0.5×</strong> to <strong>2×</strong>) to reshape tone:
            <ul class="list">
              <li>Longer usually feels <strong>darker</strong> / more “cinematic”.</li>
              <li>Shorter usually feels <strong>brighter</strong> / tighter.</li>
            </ul>
          </li>
        </ul>

        <p class="note">
          If <strong>Normalize</strong> is enabled, your per-slot gain may feel less influential because the IR is already being pushed toward a consistent loudness.
          If you want manual balancing, disable Normalize.
        </p>
      </div>

      <div class="card">
        <h3>Design mindset</h3>
        <p>IR A is your “base reality”. IR B is the counterweight that pulls your sound into a new world.</p>
        <p class="muted">Treat them like two rooms you’re welding together.</p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 6) COLOR STRIPES -->
  <section id="anvil-color" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>6) Color Stripes (layered self-modulation)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p>Each slot includes two Color stripes. A Color stripe layers a processed copy of the IR on top of itself.</p>
        <ul class="list">
          <li><strong>Enable</strong> the Color stripe checkbox.</li>
          <li><strong>Color Time</strong> — time-stretch that layer only.</li>
          <li><strong>Color Delay</strong> — tiny pre-delay to shift the layer in time (great for phasey textures).</li>
          <li><strong>Color Gain</strong> — sets how present that layer is in the final IR.</li>
        </ul>

        <p class="note">
          Layering can reinforce or cancel frequencies, creating sweeps, textures, and “movement” without any modulation plugin —
          it’s the IR interacting with its own layered version.
        </p>
      </div>

      <div class="card">
        <h3>Practical example</h3>
        <ul class="list">
          <li>Set the base IR to <strong>0.5×</strong> (tighter/cleaner).</li>
          <li>Add a Color stripe at <strong>2×</strong> but <strong>very low gain</strong>.</li>
          <li>Result: perceived longer tail + depth, while keeping the initial detail crisp.</li>
        </ul>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 7) FRACTAL DEPTH -->
  <section id="anvil-fractal" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>7) Fractal Depth (recursive layering)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>Fractal Depth</strong> generates additional layers by repeatedly re-processing the previous layer and summing it into the final IR.</p>
        <ul class="list">
          <li><strong>Depth 1–2:</strong> subtle density, smoother tails, “higher resolution” feeling.</li>
          <li><strong>Depth 3–4:</strong> richer, thicker, more abstract spaces; artifacts and textures can appear (often in a good way).</li>
          <li>Because each step is derived from the last, later layers can become progressively more stretched/offset.</li>
        </ul>

        <p class="note">
          Fractal depth can be magical — but it’s also CPU-heavy and will be included when you bake/export.
        </p>
      </div>

      <div class="card">
        <h3>Under the hood (plain truth)</h3>
        <p class="muted">Fractal does: <strong>base IR + layer1 + layer2 + ...</strong> where each new layer is created from the previous layer, alternating Color 1 and Color 2 settings.</p>
        <p class="muted">It’s recursion, but summed into a single WAV IR you can carry anywhere.</p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 8) LIVE MORPHING -->
  <section id="anvil-morph" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>8) Live Morphing (center section)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p>The big Morph knob blends <strong>IR A</strong> and <strong>IR B</strong> into one newly forged IR.</p>
        <ul class="list">
          <li><strong>Timed Morph</strong> — a clean time-domain blend (most predictable).</li>
          <li><strong>Spectral Morph</strong> — FFT-based morphing (often feels like “tone/space morphing”).</li>
          <li><strong>Spectral Band Swap</strong> — alternating frequency bands trade places across the morph.</li>
          <li><strong>Spectral ZigZag</strong> — a more “striped”, dramatic band mask that flips across the morph.</li>
        </ul>

        <p class="note">
          Spectral modes usually cost more CPU. If you push hard (long IRs + spectral + colors + fractal), temporarily increase your audio buffer while forging.
        </p>
      </div>

      <div class="card">
        <h3>Mode behaviour (in practice)</h3>
        <ul class="list">
          <li><strong>Time Morph:</strong> smooth and transparent; great for “real room” blends.</li>
          <li><strong>Spectral:</strong> can feel more synthetic or “impossible” (often worth it).</li>
          <li><strong>BandSwap / ZigZag:</strong> adds texture and character; can produce phasey, hybrid results.</li>
        </ul>
        <p class="muted">If a spectral mode produces an essentially silent result, the engine falls back to Time Morph.</p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 9) CREATIVE WORKFLOW -->
  <section id="anvil-workflow" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>9) Creative Workflow (how to get “unheard” IRs)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>You’re not limited to “room” IRs.</strong> Any WAV can become a texture source.</p>
        <ul class="list">
          <li>Morph a tiny space with a huge space.</li>
          <li>Combine a clean IR with a noisy field recording for texture.</li>
          <li>Use nature noise (wind, water, birds, street noise, fabric rustling) as a complex “filter fingerprint”.</li>
        </ul>

        <p class="note">
          Noise is powerful because it contains countless micro-sources colliding and filtering each other — perfect for creating organic textures when imprinted on your audio.
        </p>
      </div>

      <div class="card">
        <h3>Best habit</h3>
        <p>Whenever you hit gold: <strong>Bake it</strong>.</p>
        <p class="muted">Your IR library becomes your signature sound — portable, recall-safe, and usable in any convolution tool.</p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 10) PERFORMANCE -->
  <section id="anvil-performance" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>10) Performance tips</h3>
    <ul class="list">
      <li><strong>Long IRs cost more.</strong> Longer tails = more processing and heavier spectral work.</li>
      <li><strong>Heavy forging = raise buffer.</strong> If you hear crackles while tweaking, increase your DAW audio buffer size temporarily.</li>
      <li><strong>Then bake.</strong> Once it’s baked, it becomes a normal IR you can load anywhere — no more heavy rebuilding needed.</li>
    </ul>

    <p class="note">Impulse Anvil is <strong>Windows-only</strong> and <strong>VST3-only</strong>.</p>
  </section>
</section>`;



            const forgeQuickstart = `
<section id="docs-forge">
  <h2>Impulse Forge – Documentation</h2>
  <p class="muted">Acoustic Editor · Windows 10/11 · 64-bit</p>

  <div class="card" style="margin-top:14px">
    <h3>Jump to</h3>
    <div class="flex-container" style="justify-content:flex-start; gap:10px; flex-wrap:wrap; margin-top:10px">
      <a class="btn" href="#" onclick="document.getElementById('forge-setup')?.scrollIntoView({behavior:'smooth'}); return false;">Setup (DAW Bridge)</a>
      <a class="btn" href="#" onclick="document.getElementById('forge-explore')?.scrollIntoView({behavior:'smooth'}); return false;">Exploration Mode</a>
      <a class="btn" href="#" onclick="document.getElementById('forge-build')?.scrollIntoView({behavior:'smooth'}); return false;">Build Mode</a>
      <a class="btn" href="#" onclick="document.getElementById('forge-selection')?.scrollIntoView({behavior:'smooth'}); return false;">Selection & Materials</a>
      <a class="btn" href="#" onclick="document.getElementById('forge-spawn')?.scrollIntoView({behavior:'smooth'}); return false;">Spawning & OBJ Import</a>
      <a class="btn" href="#" onclick="document.getElementById('forge-levels')?.scrollIntoView({behavior:'smooth'}); return false;">Save / Load / New Level</a>
    </div>

    <p class="note" style="margin-top:10px">
      Forge has two modes: <strong>Exploration</strong> (fly, listen, bake/capture acoustics) and <strong>Build</strong> (place & edit geometry, import meshes).
      Toggle modes using the <strong>big cube button</strong> bottom-left or press <strong>Tab</strong>.
    </p>
  </div>

  <div class="hr"></div>

  <!-- 1) SETUP -->
  <section id="forge-setup" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>1) Setup: Live DAW Bridge (Preview audio inside Forge)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>DAW project settings</strong></p>
        <ul class="list">
          <li>Set your project sample rate to <strong>48 kHz</strong>.</li>
          <li>Any bit depth is fine.</li>
        </ul>

        <p style="margin-top:10px"><strong>Insert Impulse Forge (bridge configuration)</strong></p>
        <ol class="list">
          <li>Drop the plugin on the track you want to preview.</li>
          <li>Set <strong>Wet Only</strong> to <strong>true</strong>.</li>
          <li>Set <strong>Use Anvil</strong> to <strong>false</strong>.</li>
          <li>Make sure <strong>A</strong>, <strong>B</strong>, and <strong>Morph</strong> are <strong>deactivated</strong>.</li>
          <li><strong>Important:</strong> The bridge only works when <strong>no reverb is toggled</strong>.</li>
        </ol>

        <p class="note">
          Your track may become <strong>inaudible in the DAW</strong>—that’s expected. The signal is now routed into the acoustic editor for in-room preview.
        </p>

        <div class="hr"></div>

        <p><strong>Bridge limitation (important)</strong></p>
        <ul class="list">
          <li>Impulse Forge supports only <strong>one live bridge connection</strong> at a time.</li>
          <li>You <strong>cannot</strong> open two editors at the same time or route two tracks/instruments through two separate plugin instances.</li>
          <li>Never use multiple Anvils for one editor, and do not attempt to run multiple editors in parallel.</li>
        </ul>

        <p class="note">
          Want multiple tracks inside one editor? Create a <strong>group/bus track</strong> and route/send your instruments into that group,
          then insert <strong>one</strong> Impulse Forge on the group track.
        </p>
      </div>

      <div class="card">
        <h3>Open the editor</h3>
        <ol class="list">
          <li>Click the <strong>Impulse Forge</strong> button on the <strong>top-right</strong> of the plugin.</li>
          <li>The editor opens. After a moment, you should hear your audio being affected by the loaded level.</li>
        </ol>

        <div class="hr"></div>

        <h3>Troubleshooting (no audio)</h3>
        <ul class="list">
          <li>Make sure your <strong>DAW is playing</strong>.</li>
          <li>If you still don’t hear audio: close the editor and repeat the setup steps.</li>
        </ul>

        <p class="note">If you hear audio coming from inside the editor, the <strong>Live Bridge</strong> is active.</p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 2) EXPLORATION -->
  <section id="forge-explore" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>2) Getting Started: Exploration Mode</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>What it’s for</strong></p>
        <ul class="list">
          <li>Fly around and listen to the space in real time.</li>
          <li>Find a reverb/room sound you love.</li>
          <li><strong>Bake</strong> (capture) that acoustics as an impulse response (IR).</li>
        </ul>

        <p style="margin-top:10px"><strong>Controls</strong></p>
        <ul class="list">
          <li><strong>WASD</strong> — move</li>
          <li><strong>Q / E</strong> — fly down / up</li>
          <li><strong>Hold Right Click</strong> — move the camera while navigating</li>
        </ul>

        <p style="margin-top:10px"><strong>Move inside geometry</strong></p>
        <p>
          You can move not only around geometry, but also <strong>inside</strong> it. Entering placed geometry turns it into a “room” itself.
          For example: fly into a thin wall → it becomes invisible → now you hear how the inside of the wall sounds.
        </p>
      </div>

      <div class="card">
        <h3>Baking / Exporting a Room (Capture an IR)</h3>
        <p>When you’ve found a reverb you like, stop and look at the <strong>Bake</strong> section:</p>
        <ol class="list">
          <li><strong>Enable “Mute”</strong> so the editor output becomes silent (clean recording).</li>
          <li>Choose <strong>Mono</strong> or <strong>Stereo</strong> IR.</li>
          <li>Type the <strong>reverb length</strong> (seconds) of your current reverb tail.</li>
          <li>Give it a <strong>clear name</strong>.</li>
          <li>Press <strong>Bake</strong>. You’ll hear a noise burst and get a confirmation when it’s successful.</li>
        </ol>

        <p class="note">
          Tip: briefly unmute/mute to hear mostly the tail, then estimate the seconds. It doesn’t have to be perfect — but don’t make it unnecessarily long (longer IRs = more CPU on playback).
        </p>

        <div class="hr"></div>

        <h3>What gets written to disk</h3>
        <p>This bake writes a <strong>48 kHz / 32-bit WAV</strong> impulse response file — your room is saved permanently.</p>

        <div class="hr"></div>

        <h3>Loading your baked IR in Anvil</h3>
        <ul class="list">
          <li><strong>Load IR A</strong> → choose <strong>Load from file</strong> (second option).</li>
          <li>Or: <strong>Load from preset</strong> → <strong>Baked</strong> → choose your preset.</li>
        </ul>
      </div>
    </div>

    <p class="note" style="margin-top:10px">That’s it for Exploration Mode — have fun exploring. Next: Build Mode (Editing).</p>
  </section>

  <div class="hr"></div>

  <!-- 3) BUILD MODE -->
  <section id="forge-build" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>3) Build Mode: Transform Basics (Manipulating Geometry)</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>Default spawn</strong></p>
        <p>When loading Impulse Forge you will always spawn in the <strong>Default Level</strong>.</p>
        <p>In <strong>Build Mode</strong>, you can still fly around — and <strong>left-click geometry</strong> to select it.</p>

        <p style="margin-top:10px"><strong>The Transform Gizmo</strong></p>
        <ul class="list">
          <li><strong>X (Red):</strong> front / back</li>
          <li><strong>Y (Green):</strong> left / right</li>
          <li><strong>Z (Blue):</strong> up / down</li>
        </ul>

        <p style="margin-top:10px"><strong>Transform modes</strong></p>
        <p>Found at the top-middle of the editor in Build Mode (or via shortcuts):</p>
        <ul class="list">
          <li><strong>Move / Drag</strong> (1)</li>
          <li><strong>Rotate</strong> (2)</li>
          <li><strong>Scale</strong> (3)</li>
        </ul>

        <p style="margin-top:10px"><strong>Gizmo customization</strong></p>
        <ul class="list">
          <li>You can switch the gizmo location between <strong>Centered</strong> and <strong>Object Pivot</strong>.</li>
          <li>This is in the dropdown arrow <strong>below</strong> the <strong>Local / World</strong> toggle (next to snapping).</li>
          <li>You can also adjust the gizmo <strong>thickness</strong> and <strong>size</strong> to your liking.</li>
        </ul>
      </div>

      <div class="card">
        <h3>Move / Drag</h3>
        <ol class="list">
          <li>Select an object.</li>
          <li>Hover the gizmo axis you want to transform (the axis becomes slightly thicker).</li>
          <li><strong>Click and release</strong> to start dragging.</li>
          <li><strong>Click again</strong> to end the drag.</li>
        </ol>
        <p class="note">Click between two axes in Move mode to drag on both axes at once (planar move). Distance snapping can be set per axis.</p>

        <div class="hr"></div>

        <h3>Rotate</h3>
        <p>Same principle: click/release the axis, then move your mouse gently to rotate. Angle snapping can be set per axis.</p>

        <div class="hr"></div>

        <h3>Scale</h3>
        <p>Same principle: click/release the axis, then move your mouse gently to scale. Scale snapping can be set per axis.</p>

        <div class="hr"></div>

        <h3>Snapping</h3>
        <ul class="list">
          <li>Snapping is enabled by default while transforming.</li>
          <li>Click the little arrow below snapping to open snapping options.</li>
          <li>Adjust snap amounts to fit your models/workflow, or turn snapping off for free transforms.</li>
        </ul>

        <div class="hr"></div>

        <h3>World vs Local Space</h3>
        <p>
          Use the <strong>World / Local</strong> switch (top, next to transform modes):
          <strong>World</strong> transforms along fixed world axes, while <strong>Local</strong> transforms relative to the object’s rotation.
        </p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 4) SELECTION -->
  <section id="forge-selection" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>4) Selected Geometry: Acoustic Materials & Editor Functions</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>Acoustic Material (surface settings)</strong></p>
        <p>When an object is selected, the Selection UI shows acoustic surface options:</p>
        <ul class="list">
          <li><strong>Absorption</strong> (Low / Mid / High): how much of each band is absorbed.</li>
          <li><strong>Transmission</strong> (Low / Mid / High): how much passes through the wall.</li>
          <li><strong>Scatter</strong>: how much the surface diffuses sound.</li>
        </ul>
        <p class="note">Values range from <strong>0 to 1</strong>. You can choose presets (Wood, Curtain, Glass, Concrete, Ceramic, etc.) or dial in custom values.</p>

        <p style="margin-top:10px"><strong>Visual feedback (color mapping)</strong></p>
        <p>
          Acoustic parameters map to object color — change values and the geometry color changes to reflect acoustic behavior.
          This makes materials much easier to differentiate at a glance.
        </p>

        <p class="note">
          Tip: In the Default Level, if you want to change values of existing walls, choose a <strong>preset first</strong> before adjusting individual values.
        </p>
      </div>

      <div class="card">
        <h3>Selection shortcuts</h3>
        <ul class="list">
          <li><strong>ESC</strong> — unselect</li>
          <li><strong>Shift + Click</strong> — add/remove objects from selection</li>
          <li>With multiple selected objects, acoustic changes apply to <strong>all</strong> of them.</li>
        </ul>

        <div class="hr"></div>

        <h3>Editing</h3>
        <ul class="list">
          <li><strong>Delete</strong> (Ctrl + R / Del) — delete selection</li>
          <li><strong>Duplicate</strong> (Shift + Space) — instantly duplicate and group the selection</li>
          <li><strong>Group / Ungroup</strong> — transform multiple objects as one</li>
        </ul>

        <div class="hr"></div>

        <h3>Undo / Redo</h3>
        <ul class="list">
          <li><strong>Undo:</strong> Shift + Z</li>
          <li><strong>Redo:</strong> Shift + Y</li>
        </ul>

        <div class="hr"></div>

        <h3>World Transform (top bar)</h3>
        <p class="note">
          You can use World Transform for quick numeric changes — but be aware: these changes are <strong>not undo/redo-able</strong>.
        </p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 5) SPAWNING -->
  <section id="forge-spawn" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>5) Spawning Objects, Importing OBJs & Spawn Tools</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>Spawning objects</strong></p>
        <ol class="list">
          <li>In Build Mode, bottom-center of the editor, open the <strong>Objects</strong> section.</li>
          <li>Click an object once to enable spawning.</li>
          <li>Hover anywhere in the editor and <strong>left-click</strong> to place it (as many as you like).</li>
          <li>Press <strong>ESC</strong> to stop spawning.</li>
        </ol>

        <div class="hr"></div>

        <p><strong>Import .OBJ meshes</strong></p>
        <ul class="list">
          <li>In the Objects panel, click <strong>Import</strong> (right side) to list your packed OBJs.</li>
          <li>OBJs spawn in the <strong>same click-to-place manner</strong> as all other objects (click to enable spawning, then left-click to place).</li>
          <li>If you add new OBJs and don’t see them: <strong>toggle Import off/on</strong> to refresh the import list.</li>
        </ul>

        <p>
          Import folder location:
          <code>C:\\Users\\User\\Documents\\ImpulseForgeImports</code>
        </p>

        <ul class="list">
          <li>Click an imported object to spawn it.</li>
          <li>If it seems invisible (too small/large), adjust the <strong>Scale</strong> value below Import, then click the object again to re-import at that scale.</li>
        </ul>
      </div>

      <div class="card">
        <h3>Spawn Materials</h3>
        <p>
          On the top panel (left of the transform section), open <strong>Spawn Material</strong>.
          Set the material you want applied to newly spawned objects so they spawn with the correct acoustic settings right away.
        </p>

        <div class="hr"></div>

        <h3>Spawn Array (build faster)</h3>
        <p>
          Left of Spawn Materials you’ll find <strong>Spawn Array</strong>. This lets you spawn multiple objects from one selected object.
        </p>
        <ol class="list">
          <li>Place an object (e.g., a cube) and select it.</li>
          <li>Click <strong>Volume Array</strong>.</li>
          <li>Choose how many <strong>steps</strong> it should perform.</li>
          <li>Use <strong>Increment Transform</strong> to define the change between each step.</li>
          <li>You can toggle whether the array spawns in <strong>World</strong> space or <strong>Local</strong> space.</li>
        </ol>
        <p class="note">
          Example: set <strong>Z rotation</strong> to <strong>5°</strong> to add 5° per step, creating fast repeating structures and patterns.
        </p>
      </div>
    </div>
  </section>

  <div class="hr"></div>

  <!-- 6) LEVELS -->
  <section id="forge-levels" style="padding:0; border-bottom:none; opacity:1; transform:none; animation:none;">
    <h3>6) Save / Load / New Level</h3>

    <div class="cols" style="margin-top:10px">
      <div>
        <p><strong>Default Level rules</strong></p>
        <ul class="list">
          <li>Forge always launches in the <strong>Default Level</strong>.</li>
          <li>Default Level geometry is <strong>not saved</strong> unless you modified its <strong>acoustic values</strong>.</li>
        </ul>

        <p style="margin-top:10px"><strong>New Level</strong></p>
        <p>
          Clicking <strong>New Level</strong> erases all default geometry, so you end up only with geometry you have placed.
          You can still build inside the Default Level and Save — it just won’t include default models unless you modified them acoustically.
        </p>
      </div>

      <div class="card">
        <h3>Saving</h3>
        <ol class="list">
          <li>Click <strong>Save</strong>.</li>
          <li>Enter a name for your current level.</li>
          <li>Click <strong>Save</strong> to confirm.</li>
        </ol>

        <div class="hr"></div>

        <h3>Loading</h3>
        <ol class="list">
          <li>Click <strong>Load</strong>.</li>
          <li>Select your level from the list to load it into place.</li>
        </ol>

        <p class="note">
          For a clean load of a level you created: click <strong>New Level</strong> first, then <strong>Load</strong> your level.
        </p>
      </div>
    </div>
  </section>
</section>`;




      const suiteFaq = `
      <section id="docs-suite">
        <h2>Impulse Smith Suite – FAQ</h2>
        <div class="grid">
          <div class="card">
            <h3>Licensing &amp; seats</h3>
            <ul class="list">
              <li>Each license gives you <strong>2 seats</strong> (for example studio PC + laptop).</li>              
              <li>Demo installs use the same installer – entering a license instantly unlocks Basic or Pro.</li>
            </ul>
          </div>
          <div class="card">
            <h3>Installer &amp; updates</h3>
            <ul class="list">
              <li>The installer is currently <strong>unsigned</strong>. Windows may show an “Unknown publisher” SmartScreen warning.</li>
              <li>Updating with a newer installer simply replaces the binaries. Your presets, IRs and baked files are left untouched.</li>
              <li>Use the same installer for demo and full; licensing is handled inside the apps.</li>
            </ul>
          </div>
          <div class="card">
            <h3>Platforms &amp; formats</h3>
            <ul class="list">
              <li><strong>Impulse Anvil:</strong> Windows 10/11 · 64-bit · VST3 only.</li>
              <li><strong>Impulse Forge:</strong> Windows 10/11 · 64-bit standalone Acoustic Editor.</li>
              <li>Baked IRs are standard WAV files and work in any convolution reverb or IR loader.</li>
            </ul>
          </div>
        </div>
      </section>`;

      const irBasics = `
      <section id="docs-ir">
        <h2>Impulse Responses – in plain language</h2>
        <div class="cols">
          <div>
            <p>An <strong>Impulse Response (IR)</strong> is like a fingerprint of how a system reacts to sound. You send a very short signal in, record what comes out, and store that as audio.</p>
            <p>That “system” can be almost anything:</p>
            <ul class="list">
              <li>a real room, tunnel or stairwell,</li>
              <li>a guitar cab and microphone chain,</li>
              <li>a hardware FX box, pedalboard or plugin chain,</li>
              <li>or even a noisy field recording you’ve shaped on purpose.</li>
            </ul>
            <p>When you convolve another sound with that IR, you’re effectively playing your new sound <em>through</em> that room, chain or texture.</p>
          </div>
          <div class="card">
            <h3>Creative IR ideas</h3>
            <ul class="list">
              <li>Turn “bad” recordings into <strong>beautiful filters</strong> – pops, clicks, rustling fabric, city noise, ice cracking.</li>
              <li>Record CPU-heavy FX chains once as a short noise burst, bake the result and re-use it as a light-weight IR anywhere.</li>
              <li>Capture real-world gestures: a footstep in frozen grass, sliding over dirt, wind through weeds – the motion becomes your reverb tail.</li>
              
            </ul>
            <p class="note">Impulse Anvil lets you <strong>shape and morph</strong> these IRs. Impulse Forge lets you <strong>design entire acoustic worlds</strong> to capture in the first place.</p>
          </div>
        </div>
      </section>`;

      const support = `
      <section id="docs-support">
        <h2>Support &amp; learning</h2>
        <div class="cols">
          <div>
            <p>If you run into trouble with activation, installs or crashes, reach out directly:</p>
            <ul class="list">
              <li>Email: <a href="mailto:freqtiksup@gmail.com">freqtiksup@gmail.com</a></li>
            </ul>
            <p class="note">Please include your DAW, Windows version and a short description of what you were doing when the issue happened.</p>
          </div>
          <div class="card">
            <h3>Videos &amp; creative walkthroughs</h3>
            <p>Short videos will show how to:</p>
            <ul class="list">
              <li>Take a boring sound and make it inspiring with IRs.</li>
              <li>Record your own IRs from nature, city or household sounds.</li>
              <li>Use Impulse Forge + Anvil together to build complete IR packs.</li>
            </ul>
            <p class="note">These will live on the FreQtik YouTube channel and be linked directly from this page.</p>
          </div>
        </div>
      </section>`;

      return hero + anvilQuickstart + forgeQuickstart + suiteFaq + irBasics + support;
    }


    /* Router */
    let currentFeed = null;
    function loadFeed(feed, options){
  const fromHash = options && options.fromHash === true;

  try {
        // Always close dropdowns when changing section
        closeDropdowns();

        let html = '';
        switch(feed){
          case 'impulse': html = buildImpulseAll(); break;
          case 'anvil': html = buildAnvil(); break;
          case 'forge': html = buildForge(); break;
          case 'smith': html = buildImpulseAll(); break; // alias to bundle page

          case 'about':
            html = `<section id="about"><h2>About FreQtik</h2><p>FreQtik is a one-person studio, building professional audio tools, software solutions and games.</p></section>`;
            break;

          case 'ltb': case 'aim': {
            const id = STEAM_IDS[feed];
            html = `<section id="${feed}" class="depth-effect">
              <h2>${feed==='ltb'?'Learning to Bear':'Aim Trainer Bee Pro'}</h2>
              <iframe class="responsive-iframe" src="https://store.steampowered.com/widget/${id}/" frameborder="0" loading="lazy" title="Steam widget ${id}"></iframe>
              <div id="steam-${feed}"><p>Loading details…</p></div>
            </section>`;
            setTimeout(()=>fetchSteam(feed,id),0);
            break;
          }

          case 'youtube':
            html = `<section id="youtube" class="depth-effect">
              <h2>YouTube Channel</h2>
              <div class="flex-container">
                <a href="https://www.youtube.com/@FreQtik" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png" alt="YouTube">Visit Channel
                </a>
              </div>
            </section>`;
            break;

          case 'spotify':
            html = `<section id="spotify" class="depth-effect">
              <h2>Spotify</h2>
              <iframe class="responsive-iframe" src="https://open.spotify.com/embed/artist/7sbdoA5VGDrbEjY3AngmgK" allow="encrypted-media" loading="lazy" title="Spotify embed"></iframe>
            </section>`;
            break;

                                case 'downloads':
        html = `<section id="downloads" class="depth-effect">
          <h2>Downloads &amp; Tools</h2>
          <p>Close your DAW, download the installer, run it, and you’re ready to forge IRs. Updating never touches your own IRs or projects.</p>
          <div class="grid" style="margin-top:14px">
            <div class="card">
              <h3>Impulse Smith Suite Installer</h3>
              <p class="muted">Installs Impulse Anvil (VST3) and Impulse Forge (Standalone) in one step.</p>
              <p class="note">Single Windows installer. Runs in Demo until you enter a license.</p>
              <div class="hr"></div>
              <a class="btn" href="${IMPULSE_SUITE_DOWNLOAD}" target="_blank" rel="noopener">Download for Windows</a>
            </div>
            <div class="card">
              <h3>What you get</h3>
              <ul class="list">
                <li>Impulse Anvil VST3 plugin for Windows 10/11 (64-bit).</li>
                <li>Impulse Forge standalone Acoustic Editor for Windows 10/11 (64-bit).</li>
                <li>Shared content folders under <code>C:\\ProgramData\\FreQtik</code>.</li>
                <li>Demo mode by default – unlocks instantly when you enter a license key.</li>
              </ul>
            </div>
            <div class="card">
              <h3>System requirements</h3>
              <ul class="list">
                <li>Windows 10 or 11 · 64-bit.</li>
                <li>VST3-compatible DAW for Impulse Anvil.</li>
                <li>Internet connection for license activation and update checks.</li>
              </ul>
            </div>
          </div>
          <p class="note" style="margin-top:16px;">
            <strong>Windows SmartScreen</strong> may warn because the installer isn’t code-signed yet and will show “Unknown publisher”.
            The binary is built and hosted by FreQtik only. Once a code-signing certificate is in budget, future installers will be signed.
          </p>
          <p class="note">
            <strong>Licenses &amp; seats.</strong> After purchase you receive a license key by email. Open Impulse Anvil or Impulse Forge, click the License button and paste the key – features unlock instantly. Each license gives you <strong>2 seats</strong>, so you can activate on two Windows machines you own.
          </p>
        </section>`;
        break;


          case 'docs':
            html = buildDocs();
            break;

          case 'socials':
            html = `<section id="socials" class="depth-effect">
              <h2>Connect</h2>
              <div class="flex-container">
                <a href="https://www.instagram.com/freqtik/" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">Instagram
                </a>
                <a href="https://open.spotify.com/artist/7sbdoA5VGDrbEjY3AngmgK" target="_blank" rel="noopener noreferrer">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="Spotify">Spotify
                </a>
                <a href="mailto:freqtiksup@gmail.com">
                  <img class="social-icon" src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Mail_%28iOS%29.svg" alt="Email">Email
                </a>
              </div>
            </section>`;
            break;


          case 'impressum':
            html = `<section id="impressum" class="depth-effect">
              <h2>Impressum / Legal Notice</h2>

              <div lang="de">
                <p><strong>Angaben gemäß § 5 TMG</strong></p>
                <address>
                  <div><strong>FreQtik</strong></div>
                  <div>Maximilian Georg Walla</div>
                  <div>Wilhelm Leuschner Str. 93</div>
                  <div>63263 Neu Isenburg</div>
                  <div>Deutschland</div>
                </address>

                <p><strong>Kontakt</strong><br>
                  E-Mail: <a href="mailto:freqtiksup@gmail.com">freqtiksup@gmail.com</a>
                </p>

                <p><strong>Verantwortlich für den Inhalt nach § 18 Abs. 2 MStV</strong><br>
                  Maximilian Georg Walla, Wilhelm Leuschner Str. 93, 63263 Neu Isenburg, Deutschland
                </p>

                <h3>Haftungsausschluss, Links, Urheberrecht</h3>
                <p>Als Diensteanbieter sind wir gemäß § 7 Abs. 1 TMG für eigene Inhalte verantwortlich. Nach §§ 8–10 TMG sind wir nicht verpflichtet, fremde Informationen zu überwachen. Bei Kenntnis von Rechtsverletzungen entfernen wir Inhalte/Links umgehend. Inhalte unterliegen dem deutschen Urheberrecht.</p>

                <p><strong>EU-Streitschlichtung</strong><br>
                  Plattform der EU-Kommission: <a href="https://ec.europa.eu/consumers/odr" target="_blank" rel="noopener noreferrer">https://ec.europa.eu/consumers/odr</a>.
                </p>

                <p style="opacity:.7;margin-top:16px;">Stand: 2025-11-07</p>
              </div>

              <hr style="margin:24px 0;border:none;border-top:1px solid var(--line)">

              <div lang="en">
                <p><strong>Legal Notice (non-binding translation)</strong></p>
                <address>
                  <div><strong>FreQtik</strong></div>
                  <div>Maximilian Georg Walla</div>
                  <div>Wilhelm Leuschner Str. 93</div>
                  <div>63263 Neu Isenburg</div>
                  <div>Germany</div>
                </address>

                <p><strong>Contact</strong><br>
                  Email: <a href="mailto:freqtiksup@gmail.com">freqtiksup@gmail.com</a>
                </p>

                <h3>Disclaimer</h3>
                <p>The German version above governs. The English text is for convenience and does not change the legal meaning of the German “Impressum”.</p>

                <p style="opacity:.7">Last updated: 2025-11-07</p>
              </div>
            </section>`;
            break;

                  default:
          html = `<section><h2>Not found</h2><p>Sorry, that section doesn't exist.</p></section>`;
    }

    currentFeed = feed;

    mainEl.innerHTML = html;
    initAutoSlides(); // initialize auto-scrolling on any slides in this view
    initAnatomy();    // initialize plugin anatomy highlight if present
    mainEl.scrollIntoView({behavior:'smooth'});

    // Update URL hash when navigation comes from clicks, not from hashchange
    if (!fromHash) {
      const targetHash = '#' + feed;
      if (window.location.hash !== targetHash) {
        window.location.hash = targetHash;
      }
    }

  } catch (err) {
    console.error(err);
    mainEl.innerHTML = `<section><h2>Error</h2><p>Something went wrong loading this section.</p></section>`;
  }
}
    // Listen to back/forward and direct #links
window.addEventListener('hashchange', () => {
  const hash = window.location.hash || '';
  const feed = hash.startsWith('#') ? hash.substring(1) : '';

  if (!feed) {
    loadFeed('impulse', { fromHash: true });
    return;
  }

  if (feed === currentFeed)
    return;

  loadFeed(feed, { fromHash: true });
});


    /* Steam fetch helper */
    async function fetchSteam(feed, id){
      const targetId = `steam-${feed}`;
      const container = document.getElementById(targetId);
      if (!container) return;

      try{
        const url = encodeURIComponent(`https://store.steampowered.com/api/appdetails?appids=${id}&cc=US&l=en`);
        const res = await fetch(`https://api.allorigins.win/raw?url=${url}`, { method:'GET' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const json = await res.json();

        if (!json || !json[id] || !json[id].success) {
          throw new Error('Steam API returned no data.');
        }
        const info = json[id].data;
        const shots = Array.isArray(info?.screenshots)
          ? info.screenshots.map(
              s=>`<img src="${s.path_full}" style="max-width:100%;margin:10px 0;border-radius:4px;" alt="Screenshot">`
            ).join('')
          : '';

        container.innerHTML = `
          <p><strong>${escapeHtml(info?.name ?? 'Unknown')}</strong></p>
          <p>${escapeHtml(info?.short_description ?? '')}</p>
          ${shots}
          <p><a href="https://store.steampowered.com/app/${id}" target="_blank" rel="noopener noreferrer">View on Steam</a></p>
        `;
      }catch(e){
        container.innerHTML = `<p>Error loading Steam details. ${escapeHtml((e).message || '')}</p>`;
      }
    }

    /* menu toggle */
    toggleBtn.addEventListener('click', ()=>{
      headerEl.style.transform='translateY(0)';
      toggleBtn.style.display='none';
    });

    /* scroll behavior (header hide/show only; logo stays fixed) */
    window.addEventListener('scroll', ()=>{
      const y = window.scrollY;
      const hidden = (y>0);
      headerEl.style.transform = hidden ? 'translateY(-100%)' : 'translateY(0)';
      toggleBtn.style.display = hidden ? 'block' : 'none';

      // Close dropdowns when user scrolls
      closeDropdowns();
    });

    /* persist scroll */
    window.addEventListener('beforeunload', ()=> {
      try { sessionStorage.setItem('scrollPos', String(window.scrollY)); } catch {}
    });

    window.addEventListener('load', ()=>{
  const ySpan = document.getElementById('yearSpan');
  if (ySpan) ySpan.textContent = String(new Date().getFullYear());
  try {
    const pos = sessionStorage.getItem('scrollPos');
    if (pos) window.scrollTo(0, parseFloat(pos));
  } catch {}

  const hash = window.location.hash || '';
  const feedFromHash = hash && hash.startsWith('#') ? hash.substring(1) : '';

  if (feedFromHash) {
    loadFeed(feedFromHash, { fromHash: true });
  } else {
    loadFeed('impulse');
  }

  if (window.innerWidth < 600) introEl.classList.add('hidden');
});


    // dismiss intro on minimal mouse movement
    let moved=0,lx=null,ly=null,done=false;
    document.addEventListener('mousemove',e=>{
      if(done||window.innerWidth<600) return;
      if(lx!==null) moved+=Math.abs(e.clientX-lx)+Math.abs(e.clientY-ly);
      lx=e.clientX; ly=e.clientY;
      if(moved>300){ introEl.classList.add('hidden'); done=true; }
    });
  </script>
</body>
</html>



























